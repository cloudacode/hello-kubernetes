
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="쿠버네티스 환경에서 설정 파일은 Configmap로 관리 및 중요한 데이터는 Secrets으로 인코딩하여 관리 할 수 있다.">
      
      
        <meta name="author" content="kcfigaro@gmail.com, juner84s@gmail.com, steven.hj.shim@gmail.com">
      
      
        <link rel="canonical" href="https://cloudacode.com/hello-kubernetes/hello-kubernetes/section02/configmap-secret/">
      
      
        <link rel="prev" href="../readiness-liveness-probe/">
      
      
        <link rel="next" href="../handson/pod/">
      
      
      <link rel="icon" href="../../../assets/application-brackets-black.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>2.6 ConfigMap & Secret - 쿠버네티스 스쿨</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-L86XX3YR79"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-L86XX3YR79",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-L86XX3YR79",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  
  
  
  
    
    
    
  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="2.6 ConfigMap & Secret - 쿠버네티스 스쿨" />
  <meta property="og:description" content="쿠버네티스 환경에서 설정 파일은 Configmap로 관리 및 중요한 데이터는 Secrets으로 인코딩하여 관리 할 수 있다." />
  <meta property="og:url" content="https://cloudacode.com/hello-kubernetes/hello-kubernetes/section02/configmap-secret/" />
  <meta property="og:image" content="https://raw.githubusercontent.com/cloudacode/hello-kubernetes/main/docs/assets/kubernetes-school.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#26-configmap-secret" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="쿠버네티스 스쿨" class="md-header__button md-logo" aria-label="쿠버네티스 스쿨" data-md-component="logo">
      
  <img src="../../../assets/application-brackets-outline.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            쿠버네티스 스쿨
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2.6 ConfigMap & Secret
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cloudacode/hello-kubernetes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cloudacode/hello-kubernetes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="쿠버네티스 스쿨" class="md-nav__button md-logo" aria-label="쿠버네티스 스쿨" data-md-component="logo">
      
  <img src="../../../assets/application-brackets-outline.png" alt="logo">

    </a>
    쿠버네티스 스쿨
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cloudacode/hello-kubernetes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cloudacode/hello-kubernetes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Get started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            1. Get started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/what-is-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 컨테이너란 무엇인가
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/what-is-kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 쿠버네티스의 이해
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/what-is-helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 헬름이란 무엇인가
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    핸즈온 실습
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            핸즈온 실습
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/handson/setup-local-k8s-kind/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온. 쿠버네티스 환경 구성(local) - Kind
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/handson/setup-cloud-k8s-eks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온. 쿠버네티스 환경 구성(cloud) - AWS EKS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section01/handson/setup-redis-via-helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온. Helm으로 Redis Cluster 환경 구성 및 배포
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Fundamentals
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            2. Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pod-namespce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 Pod & Namespace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pod-requests-limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2 Resources & QoS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-ingress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3 Service & Ingress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment-replicaset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4 Deployment & ReplicaSet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readiness-liveness-probe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.5 Readiness & Liveness Probe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2.6 ConfigMap & Secret
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2.6 ConfigMap & Secret
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Pod 에 ConfigMap 정보를 전달하기
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pod 에 ConfigMap 정보를 전달하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 환경변수로 정의하기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap-command-line-argument" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 Command-line Argument로 전달하기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_2" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 파일 혹은 디렉토리로 마운트하기
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_3" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap 의 변경 사항 반영
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immutable-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Immutable ConfigMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_4" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap 의 제약사항
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    <span class="md-ellipsis">
      Secret
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret_1" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 타입
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret_2" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 사용 예시
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret_3" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 보호
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    핸즈온 실습
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            핸즈온 실습
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handson/pod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 2.1 Pod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handson/resource-qos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 2.2 Resources & QoS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handson/service-ingress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 2.3 Service & Ingress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handson/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 2.4 Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handson/configmap-secret/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 2.6 Configmap & Secret
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3. Advanced
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            3. Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/horizontal-pod-autoscaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 HPA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/storage-persistent-volume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/statefulset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3 StatefulSet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/s3-c4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4 Taints &amp; Tolerations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/s3-c5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5 Affinity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    핸즈온 실습
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            핸즈온 실습
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/handson/horizontal-pod-autoscaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 3.1 Horizontal Pod Autoscaling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/handson/storage-persistent-volume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 3.2 Persistent Volume
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section03/handson/statefulset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    핸즈온 3.3 StatefulSet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    4. Core(TODO)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            4. Core(TODO)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section04/container-network-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1 Container Network Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section04/container-storage-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2 Container Storage Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section04/container-resource-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3 Container Resource Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section04/coredns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4 CoreDNS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    5. Mgmt Component(WIP)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            5. Mgmt Component(WIP)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/k8-essential-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1 Essential Mgmt Components Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/ingress-controller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.2 Ingress Controller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.3 Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/dns-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.4 DNS Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/cert-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.5 Certificate Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/secret-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.6 Secret Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/continuous-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.7 Continuous Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section05/backup-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.8 Backup Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    6. Istio(TODO)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            6. Istio(TODO)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section06/istio-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1 Istio Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section06/traffic-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2 Traffic Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section06/service-mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.3 Service Mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section06/security-observability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.4 Security & Observability
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    7. Managed Kubernetes(WIP)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            7. Managed Kubernetes(WIP)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section07/aws-eks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.1 AWS EKS Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section07/gcp-gke/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.2 GCP GKE Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    8. Tip and Tricks(TODO)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            8. Tip and Tricks(TODO)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section99/pod-resource-advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deep dive in k8s Pod resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section99/troubleshooting-runbook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting runbook
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    외부 링크
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            외부 링크
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://medium.com/@cloudacode" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog ⧉
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.youtube.com/channel/UCw46J_QQ3-HrjPsSsuOSDdQ" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Youtube ⧉
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Pod 에 ConfigMap 정보를 전달하기
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pod 에 ConfigMap 정보를 전달하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 환경변수로 정의하기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap-command-line-argument" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 Command-line Argument로 전달하기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_2" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap의 정보를 파일 혹은 디렉토리로 마운트하기
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_3" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap 의 변경 사항 반영
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immutable-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Immutable ConfigMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_4" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigMap 의 제약사항
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    <span class="md-ellipsis">
      Secret
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret_1" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 타입
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret_2" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 사용 예시
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret_3" class="md-nav__link">
    <span class="md-ellipsis">
      Secret 보호
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="26-configmap-secret">2.6 ConfigMap &amp; Secret</h1>
<p>어플리케이션을 개발할 때, 환경별(개발환경, 테스트환경, 운영환경 등)로 설정 정보를 다르게 만들어 다루는 것은 일반적이다. 예를 들어, 테스트 환경의 경우 테스트 환경에서만 사용하는 데이터베이스를 접근하기 위한 endpoint 정보가 있을 것이다. 어플리케이션이 이런 환경 정보를 직접 가지고 있을 수도 있겠지만, 쿠버네티스에서는 ConfigMap 과 Secret 이라는 오브젝트를 활용하여 어플리케이션의 코드와 설정 정보를 분리하여 설정에 대한 결합도를 낮출 수 있다.</p>
<h2 id="configmap">ConfigMap</h2>
<p>ConfigMap은 설정 정보를 하나 혹은 이상의 key/value 쌍으로 저장할 수 있으며, value는 단일 값이 될 수도 있고, 파일의 내용이 될 수도 있다.</p>
<p>ConfigMap manifest의 예시를 보자.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: sample-configs
data:
  # 아래와 같이 간단한 key/value로 정의할 수 있다.
  default_ttl: &quot;30&quot;
  say_hello: &quot;Hi!&quot;

  # 또는, 설정 file 내용을 value로 정의할 수도 있다.
  sample-nginx.conf: |
    server {
      listen            80;
      index             index.html;
      server_name       cloudacode.com;

      location / {
        root  /cloudacode/static/
      }

      location /api {
        proxy_pass  https://api.cloudacode.internal
      }
    }
</code></pre>
<h3 id="pod-configmap">Pod 에 ConfigMap 정보를 전달하기</h3>
<p>이렇게 정의된 ConfigMap은 Pod에 다양한 방법으로 전달될 수 있다.</p>
<ul>
<li>환경 변수로 정의하기</li>
<li>Command-line Argument 로 전달하기</li>
<li>Volume으로 만들어 파일 혹은 디렉토리로 마운트하기</li>
</ul>
<h4 id="configmap_1">ConfigMap의 정보를 환경변수로 정의하기</h4>
<p>이전에 설명한 ConfigMap 예시에 있는 정보의 일부를 Pod를 생성할 때 환경 변수로 읽는 방법이다.</p>
<p><img alt="ConfigMap" src="../assets/pod-configmap-env-var.jpg" /></p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: sample
spec:
  containers:
  - image: busybox
    env:
    - name: DEFAULT_TTL  # 환경변수 이름. 아래 ConfigMap key에 해당하는 value를 가진다.
      valueFrom:
        configMapKeyRef:
          name: sample-configs  # ConfigMap의 이름
          key: default_ttl         # ConfigMap에 정의된 key
</code></pre>
<h4 id="configmap-command-line-argument">ConfigMap의 정보를 Command-line Argument로 전달하기</h4>
<p>이전 환경변수로 읽어온 값을, $(VALUE_NAME) 과 같은 문법을 이용해 Command-line Argument로 전달할 수도 있다.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: sample
spec:
  containers:
  - image: busybox
    command: [ &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo $(WELCOME_MESSAGE)&quot;]
    env:
    - name: WELCOME_MESSAGE
      valueFrom:
        configMapKeyRef:
          name: sample-configs
          key: say_hello
</code></pre>
<h4 id="configmap_2">ConfigMap의 정보를 파일 혹은 디렉토리로 마운트하기</h4>
<p>이 방법은 가장 흔하게 사용할 수 있는 ConfigMap을 전달하는 방법 중 하나로, 웹서버의 설정파일 등을 파일 혹은 디렉토리 형식으로 Pod에 전달할 수 있다.</p>
<p><img alt="ConfigMap" src="../assets/pod-configmap-mount.jpg" /></p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx
    ports:
    - containerPort: 80
    volumeMounts:
      - name: nginx-vhost-config
        mountPath: /etc/nginx/conf.d
        readOnly: true
  volumes:
    - name: nginx-vhost-config
      configMap:
        name: sample-configs
        items:
        - key: &quot;sample-nginx.conf&quot;
          path: &quot;sample-nginx.conf&quot;
</code></pre>
<p>이렇게 선언된 Pod에서는 <code>/etc/nginx/conf.d/</code> 경로에 <code>sample-nginx.conf</code> 파일이 마운트되는 것을 확인할 수 있다.</p>
<h3 id="configmap_3">ConfigMap 의 변경 사항 반영</h3>
<p>생성되어있는 ConfigMap의 내용을 바꾸는 경우, ConfigMap을 Volume으로 마운트해서 사용하는 Pod에도 업데이트된 설정을 읽을 수 있다.</p>
<p>다만 ConfigMap의 변경된 정보를 업데이트 받는데는 아래와 같은 제약사항이 있을 수 있다.</p>
<ul>
<li>업데이트는 kubelet 의 동기화 시간 혹은 캐시 지연 설정등 만큼 걸릴 수 있다.</li>
<li>ConfigMap 정보를 subPath를 사용하여 volume 마운트 시 업데이트를 받지 못 한다.</li>
<li>환경변수로 읽어온 ConfigMap 정보 역시 업데이트를 받지 못 한다.</li>
</ul>
<h3 id="immutable-configmap">Immutable ConfigMap</h3>
<p>경우에 따라 한번 생성된 ConfigMap을 내용 변경없이 생성/관리하는 방식을 선택할 수도 있다.
이 경우, <code>immutable</code> 필드를 <code>true</code> 로 설정하여 내용이 변경될 수 없는 ConfigMap을 만들 수 있다.</p>
<p>이렇게 생성된 ConfigMap은,
* kubelet이 감시하지 않으므로 kube apiserver의 부하를 줄일 수 있다.
* 우발적인 ConfigMap 변경이 모든 어플리케이션에 영향을 주지 않도록 할 수 있다.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Nginx와 같은 웹서버의 설정 파일의 경우, 설정의 내용을 변경한다고 하더라도 웹서버에 직접 명령을 통해 설정을 다시 읽도록 해야 반영이 된다. Pod로 구성된 웹서버라면 ConfigMap으로 생성된 설정 파일이 변경되었을 때, Pod를 재생성하여 설정을 반영하는것이 효율적일 수 있다. 이런 경우라면, ConfigMap의 변경을 감시하지 않는 Immutable ConfigMap 으로 만들어 관리해볼 수 있다.</p>
</div>
<h3 id="configmap_4">ConfigMap 의 제약사항</h3>
<ul>
<li>ConfigMap의 크기는 1MiB 로 제한된다.</li>
</ul>
<h2 id="secret">Secret</h2>
<p>Secret은 패스워드, API token 등과 같은 유출에 민감한 정보를 저장하기 위한 목적으로 설계되어있다.
Application 에서 코드에 직접 민감한 정보를 저장하지 않고, Secret을 사용하여 Pod가 생성되는 시점에 전달할 수 있다.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Secret 리소스의 기본 저장은 etcd에 암호화하지 않은 상태로 저장한다.
Secret 리소스를 암호화하여 저장하려면 저장 시 암호화(Encryption at rest)를 활성화하고, Encryption Provider 를 활용해서 데이터에 대해 암호화를 구성해야 한다.</p>
</div>
<p>Secret은 <code>data</code> 혹은 <code>stringData</code> 필드에 데이터를 저장할 수 있다.
<code>data</code>로 저장하는 경우, key/value 중 value를 <code>base64</code>로 인코딩 해야 한다.</p>
<h3 id="secret_1">Secret 타입</h3>
<table>
<thead>
<tr>
<th>Built-in Type</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Opaque</td>
<td>임의이 사용자 지정 데이터</td>
</tr>
<tr>
<td>kubernetes.io/service-account-token</td>
<td>Service Account 토큰</td>
</tr>
<tr>
<td>kubernetes.io/dockercfg</td>
<td>직렬화된 <code>./dockercfg</code> 파일</td>
</tr>
<tr>
<td>kubernetes.io/dockerconfigjson</td>
<td>직렬화된 <code>./docker/config.json</code> 파일</td>
</tr>
<tr>
<td>kubernetes.io/basic-auth</td>
<td>Basic Authentication 용 credential</td>
</tr>
<tr>
<td>kubernetes.io/ssh-auth</td>
<td>SSH Authentication 용 credential</td>
</tr>
<tr>
<td>kubernetes.io/tls</td>
<td>TLS 인증서 형태의 데이터</td>
</tr>
<tr>
<td>bootstrap.kubernetes.io/token</td>
<td>부트스트랩 토큰 데이터</td>
</tr>
</tbody>
</table>
<h3 id="secret_2">Secret 사용 예시</h3>
<p>Secret 은 아래와 같은 형식으로 정의할 수 있다.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: db-account
type: Opaque
data:
  DB_ACCESS_ID: aGVsbG93b3JsZAo=
  DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQK
</code></pre>
<p>Pod에서 위에 정의된 Secret 을 사용하려면 아래와 같이 사용이 가능하다.
Secret을 <code>envFrom</code> 구절을 이용해 Pod의 생성 시점에 Environment Variable로 저장할 수 있다.</p>
<p><img alt="Secret" src="../assets/pod-secret-env-var.jpg" /></p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: secret-test-pod
spec:
  containers:
    - name: test
      image: k8s.gcr.io/busybox
      command: [ &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;env&quot; ]
      envFrom:
      - secretRef:
          name: db-account
  restartPolicy: Never
</code></pre>
<h3 id="secret_3">Secret 보호</h3>
<ul>
<li>Kubernetes 에서는 Secret을 필요로하는 Pod가 있는 Node에만 Secret 정보가 전달되도록 설계되어있다.</li>
<li>Kubelet은 Secret을 Node의 <code>tmpfs</code>(가상메모리 공간)에 저장하여 disk에 영구적으로 기록되지 않도록 한다.</li>
<li>Pod에 2개 이상의 Container가 있는 경우, 명시적으로 mount 하는 container에서만 secret을 조회할 수 있다.</li>
</ul>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>