{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 by cloudacode","text":""},{"location":"#project","title":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ucfe8 Project \ud83d\ude80","text":"<p>kubernetes\ub97c \uc774\ud574\ud558\uace0 production level\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ud544\uc694\ud55c \uae30\uc220\ub4e4\uc744 \uc5f0\uad6c\ud569\ub2c8\ub2e4.</p>"},{"location":"#team","title":"Team \ud83e\uddd1\u200d\ud83d\ude80\ud83d\ude4d\ud83d\udc68\u200d\ud83c\udf93","text":"<p>A seasoned cloud and site reliability engineers.</p>"},{"location":"hello-kubernetes/section01/what-is-container/","title":"1.1 Container \uc774\ud574","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ucee8\ud14c\uc774\ub108 \uae30\uc220\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"hello-kubernetes/section01/what-is-container/#container","title":"Container \ub780?","text":"<p>\ucee8\ud14c\uc774\ub108\ub294 OS\uc758 \ucee4\ub110 \uc704\uc5d0\uc11c cgroup, namespace, netfilter\ub4f1\uacfc \uac19\uc740 \ucee4\ub110 \uae30\ub2a5\ub4e4\uc744 \ud1b5\ud574 \ud504\ub85c\uc138\uc2a4\ub97c cpu, memory, networking, filesystem\uc758 \ud2b9\uc815 \uc601\uc5ed\uc5d0 \uaca9\ub9ac \uc2dc\ucf1c \ub2e4\ub978 \uacf5\uc720 \uc601\uc5ed\uc758 \uc811\uadfc\uc744 \uc81c\ud55c\ud558\uace0 \ub3c5\ub9bd\uc801\uc778 \uacf5\uac04\uc744 \uc81c\uacf5 \ud558\ub294 \uae30\uc220\uc774\ub2e4. \ub3c5\ub9bd\ub41c \uacf5\uac04\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\ub3d9\uc5d0 \ud544\uc694\ud55c \ubc14\uc774\ub108\ub9ac \ubc0f \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c Docker\ub098 Podman\uc744 \ud1b5\ud574\uc11c OCI(Open Container Initiative) \ud45c\uc900\uc5d0 \ub9de\uac8c \uc774\ubbf8\uc9c0\ud654 \ud560 \uc218 \uc788\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4 \uc704\uc5d0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5\ud558\ub2e4.</p> <p></p> <p>\uc694\uc57d\ud558\uc790\uba74 \ucee8\ud14c\uc774\ub108\ub294</p> <ul> <li>\uaca9\ub9ac\ub418\uc5b4 \uc788\uc73c\uba70 \uc790\uccb4 \uc18c\ud504\ud2b8\uc6e8\uc5b4, \ubc14\uc774\ub108\ub9ac \ubc0f \uad6c\uc131\uc744 \uc2e4\ud589\ud558\ub294 \ud504\ub85c\uc138\uc2a4</li> <li>\ub85c\uceec \ud658\uacbd, \uac00\uc0c1 \uba38\uc2e0, \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uad6d\ud55c\ub418\uc9c0 \uc54a\uace0 \uc790\uc720\ub86d\uac8c \uad6c\uc131 \uac00\ub2a5</li> <li>OS\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\uc73c\uba70 \ucee8\ud14c\uc774\ub108 \uc5d4\uc9c4\ub9cc \uc788\ub2e4\uba74 \uc5b4\ub514\ub4e0 \ubc30\ud3ec, \uad00\ub9ac \uac00\ub2a5</li> </ul>"},{"location":"hello-kubernetes/section01/what-is-container/#_1","title":"\ucd94\ucc9c \uc790\ub8cc","text":"<ul> <li>\ucee8\ud14c\uc774\ub108, Containerd, Containerd-shim, RUNC:<ul> <li>\ub3c4\ucee4\ub294 \ubb34\uc5c7\uc73c\ub85c \uc5b4\ub5bb\uac8c \uad6c\uc131\ub418\uc5b4 \uc788\uc744\uae4c</li> </ul> </li> <li>Introduction to Containers, VMs and Docker:<ul> <li>A Beginner-Friendly Introduction to Containers, VMs and Docker</li> </ul> </li> <li>Docker Overview<ul> <li>Official Docker document: Get Started</li> </ul> </li> </ul>"},{"location":"hello-kubernetes/section01/what-is-helm/","title":"1.3 Helm\uc758 \uc774\ud574","text":"<p>\ud5ec\ub984\uc740 \ubcf5\uc7a1\ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ubc30\ud3ec \ubc0f \uc6b4\uc601\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\uc774\ub2e4.</p>"},{"location":"hello-kubernetes/section01/what-is-helm/#helm","title":"\uc65c Helm\uc774 \ud544\uc694\ud55c\uac00?","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uace0\uc790 \ud560 \ub54c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 yaml \ud615\ud0dc\uc758 manifest \ud30c\uc77c\uc744 \uc791\uc131\ud558\uac8c \ub41c\ub2e4. \ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uad6c\uc131 \uc815\ubcf4 \ud639\uc740 \uc5f0\uad00 \uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ud558\ub098\uc758 manifest \ud30c\uc77c\ub85c \ucda9\ubd84\ud788 \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\uc9c0\ub9cc \uadf8\ub807\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \ud639\uc740 \uc911\ubcf5\ub418\ub294 \uc124\uc815 \uac12\uc774 \ub9ce\uc544 \ubcc0\uc218 \ucc98\ub9ac\ub97c \ud574\uc57c\ud558\ub294 \uacbd\uc6b0\uc5d0\ub294 \ubcc4\ub3c4\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc5ec \uac04\uc18c\ud654 \ud558\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc778 \ubc29\ubc95\uc774\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Helm\uacfc Kustomize\uac00 \uc788\uc73c\uba70 Helm\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uad6c\uc131 \uc815\ubcf4\ub97c \ud15c\ud50c\ub9bf\ud654 \ud558\uace0 \ud328\ud0a4\uc9d5\ud654\ub97c \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c \ubcf4\ub2e4 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc774\ub77c\uace0 \ub9d0\ud560\uc218 \uc788\uc73c\uba70 Kustomize\ub294 \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c\uc744 \uacf5\ud1b5\ub41c \ubd80\ubd84\uacfc \ub2e4\ub978 \ubd80\ubd84\uc744 \ud3f4\ub354 \ub808\ubca8\ub85c \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \uc624\ubc84\ub808\uc774\ud558\uac8c \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. Helm\uc774 3rd party \ub3c4\uad6c\uc774\uae34 \ud558\uc9c0\ub9cc yum, apt, brew\ucc98\ub7fc \ud328\ud0a4\uc9c0 \uc0dd\ud0dc\uacc4\uac00 \uad6c\uc131\ub418\uc5b4 \uc788\uc73c\uba70 \ub300\ubd80\ubd84\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac1c\ubc1c\uc0ac\ub4e4\uc774 Helm Chart\ub97c \uacf5\uc2dd\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Kustomize \ubcf4\ub2e4\ub294 \uc811\uadfc\uc131\uacfc \ud3b8\ub9ac\ud568 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4. \ub610\ud55c Kustomize\uc5d0\uc11c Helm\uc744 \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud15c\ud50c\ub9bf\ud654\ud558\uba74\uc11c \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uac01\uae30 \ub2e4\ub978 \ubcc0\uc218\ub4e4\ub85c \uad6c\uc131\uc744 \ud558\ub294 \uac83\uc744 \ucf54\ub4dc\ud654 \ubc0f \uac04\uc18c\ud654\ud558\uace0 \uc2f6\ub2e4\uace0 \ud558\uba74 \ub450 \ub3c4\uad6c\ub97c \uc0c1\ud638\ubcf4\uc644\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p> <p>Info</p> <p>\ud5ec\ub984 \ubc84\uc804 2.x \uae4c\uc9c0\ub294 tiller\ub77c\ub294 \ud558\ub098\uc758 \uc911\uc559\ud654\ub41c helm \uc791\uc5c5 \uad00\ub9ac\uc790\uac00 \uc874\uc7ac \ud558\uc600\uc73c\ub098 \uad8c\ud55c \uad00\ub9ac\uc5d0 \ub300\ud55c \uc5b4\ub824\uc6c0\uc640 \ubcf4\uc548 \ucde8\uc57d\uc810\uc73c\ub85c \uc778\ud574 \ud5ec\ub984 3.x\uc5d0\uc11c\ub294 tiller\uac00 \uc0ac\ub77c\uc9c0\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 API \uc11c\ubc84\uc5d0\uc11c \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ubc29\uc2dd\uc73c\ub85c \uac1c\uc120\uc774 \ub418\uc5c8\ub2e4 </p> <p> \ucd9c\ucc98: Intro to Helm</p> <p>\uc694\uc57d\ud558\uc790\uba74 \ud5ec\ub984\uc740</p> <ul> <li>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c</li> <li>\ud15c\ud50c\ub9bf\ud654\ub97c \ud1b5\ud574\uc11c \uad6c\uc131 \uc815\ubcf4\ub97c \uac04\uacb0\ud558\uac8c \uad00\ub9ac</li> <li>\ud328\ud0a4\uc9c0 repo\ub97c \ud1b5\ud574 \uc190\uc27d\uace0 \uac04\ub2e8\ud558\uac8c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc124\uce58 \ubc0f \uc5c5\uadf8\ub808\uc774\ub4dc </li> </ul>"},{"location":"hello-kubernetes/section01/what-is-helm/#helm-chart","title":"Helm Chart \ud65c\uc6a9\ubc95","text":"<p>Helm\uc758 \ud328\ud0a4\uc9d5 \ud3ec\ub9f7\uc744 Chart\ub77c\uace0 \ubd88\ub9ac\uba70 Kubernetes \ub9ac\uc18c\uc2a4\uac00 \uc815\uc758\ub41c \ud30c\uc77c\uc758 \ubb36\uc74c \ud328\ud0a4\uc9c0\uc774\ub2e4. \ub2e8\uc77c \ucc28\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e8\uc21c\ud55c HTTP \uc11c\ubc84\ubd80\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4, \uce90\uc2dc \ub4f1\uc774 \ud3ec\ud568\ub41c \uc804\uccb4 \uc6f9\uc571 \uc2a4\ud0dd\uacfc \uac19\uc740 \ubcf5\uc7a1\ud55c \uac83\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4. </p> <p>Chart\ub294 \ud06c\uac8c \uba54\ud0c0\ub370\uc774\ud130\ub97c \uac00\uc9c0\uace0 \uc788\ub294 Chart.yaml, \ubcc0\uc218\uac12 \ubb36\uc74c\uc758 values.yaml \uadf8\ub9ac\uace0 template \ub514\ub809\ud1a0\ub9ac\uc5d0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\uc758 manifest \ud30c\uc77c\uc744 \ub2f4\uace0 \uc788\ub2e4. \uae30\uc874\uc5d0 \ub9cc\ub4e4\uc5b4\uc9c4 Chart\ub97c \ud1b5\ud574 \ubc30\ud3ec\ub97c \ud558\ub294 \uacbd\uc6b0\ub294 \ud0c0\uac9f \ud658\uacbd\uc5d0 \ub9de\uac8c values.yaml\uc758 \uac12\ub4e4\ub9cc \uc218\uc815\uc744 \ud558\uba74 \ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 mysql\uc758 \uc124\uce58 \ubc0f \uad6c\uc131\uc744 helm\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4\uace0 \uac00\uc815\ud558\uba74 \uba3c\uc800 artifact hub \ud639\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uacf5\uc2dd github repo\uc5d0\uc11c helm chart\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 repo\ub97c \ucd94\uac00\ud55c \ud6c4 values.yaml \ud30c\uc77c\uc744 \uac80\ud1a0 \ubc0f \ud544\uc694\uc5d0 \ub530\ub77c \uc218\uc815\uc744 \ud55c \ud6c4 \uc124\uce58\ub97c \uc9c4\ud589\ud558\uba74 \ub41c\ub2e4.</p> <p>Info</p> <p>\uac1c\ubc1c\uc0ac\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c Helm Chart\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uace0 bitnami\uc640 \uac19\uc740 \ubcc4\ub3c4\uc758 3rd party \ubc34\ub354\uac00 Chart\ub97c \uba54\uc778\ud130\ub10c\uc2a4 \ud558\ub294 \uacbd\uc6b0\ub3c4 \ub9ce\ub2e4. \uc774\ub54c GitHub Star \uac1c\uc218\ub098 \uc5bc\ub9c8\ub098 \uc801\uadf9\uc801\uc73c\ub85c \ucee8\ud2b8\ub9ac\ubdf0\uc158\uc774 \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0\ub97c \ubcf4\uace0 \ud310\ub2e8\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. </p>"},{"location":"hello-kubernetes/section01/what-is-helm/#_1","title":"\ucd94\ucc9c \uc790\ub8cc","text":"<ul> <li> <p>Helm Overview</p> <ul> <li>Official Helm Docs</li> </ul> </li> <li> <p>Helm\uc73c\ub85c Wordpress \uad6c\uc131</p> <ul> <li>Digitalocean: How to set up wordpress with mysql on kubernetes using helm</li> </ul> </li> <li> <p>Kustomize\ub85c Workpress \uad6c\uc131</p> <ul> <li>Mirantis: Creating a kubernetes app out of multiple pieces</li> </ul> </li> <li> <p>Kustomize + Helm \ud65c\uc6a9</p> <ul> <li>JFrog: Power up helm charts using kustomize to manage kubernetes deployments</li> </ul> </li> <li> <p>Terraform Helm Provider</p> <ul> <li>Helm Provider</li> </ul> </li> </ul>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/","title":"1.2 Kubernetes \uc774\ud574","text":""},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes","title":"Kubernetes \ub780?","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub780 \ucee8\ud14c\uc774\ub108\ud654\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc790\ub3d9\uc73c\ub85c \ubc30\ud3ec, \ud655\uc7a5, \uad00\ub9ac\ud574\uc8fc\ub294 \uc624\ud508\uc18c\uc2a4 \uc2dc\uc2a4\ud15c\uc774\ub2e4.</p> <p>Info</p> <p>an open-source system for automating deployment, scaling, and management of containerized applications. kuberentes.io</p>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_1","title":"Kubernetes \ub4f1\uc7a5 \ubc30\uacbd","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \uc804 \uc138\uacc4\uc801\uc73c\ub85c \uac00\uc7a5 \ub300\ud45c\uc801\uc778 \ucee8\ud14c\uc774\ub108 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \ub3c4\uad6c\uc774\uba70 \uc624\ub7ab\ub3d9\uc548 \uad6c\uae00 \ub0b4\ubd80\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub358 \ucee8\ud14c\uc774\ub108 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac \uc2dc\uc2a4\ud15c(Borg)\uc73c\ub85c\ubd80\ud130 \ucd9c\ubc1c\ud558\uc5ec 2013\ub144\ub3c4\ubd80\ud130 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 \ud504\ub85c\uc81d\ud2b8\ub85c \uc9c4\ud589\uc774 \ub418\uace0 \uc788\ub2e4. \uc5ec\ub7ec\uac00\uc9c0 \ub4f1\uc7a5 \ubc30\uacbd\uc774 \uc788\uc9c0\ub9cc \uac00\uc7a5 \ud070 \uc774\uc720\ub294 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc9c4\ud654\uc640 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4.   \ud074\ub77c\uc6b0\ub4dc \ucef4\ud4e8\ud305\uacfc \ub3c4\ucee4\ub97c \ud544\ub450\ub85c \ucee8\ud14c\uc774\ub108 \uae30\uc220\uc758 \ube44\uc57d\uc801\uc778 \ubc1c\uc804\uc5d0 \ub530\ub77c \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4\ub41c \ud615\ud0dc\ub85c \uac1c\ubc1c\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\ub4e4\uc744 \uc27d\uac8c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uaca9\ub9ac\ud558\uace0 \ud655\uc7a5\uc131\uc744 \ub192\uc77c \uc218 \uc788\uac8c \ub418\uc5c8\uc73c\uba70 \ub610\ud55c \ube44\uc988\ub2c8\uc2a4 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ucdb0\uc11c \ube60\ub974\uac8c \uae30\ub2a5\ub4e4\uc744 \uac1c\ubc1c\ud558\uace0 \ubc30\ud3ec\ub97c \uc2e0\uc18d\ud558\uace0 \uc720\uc5f0\ud558\uac8c \ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.</p> \uacfc\uac70 \ud604\uc7ac Monolithic Microservices \ub4e4\ub85c \uc791\uac8c \ub098\ub204\uace0 Decoupled(\ub0ae\uc740 \uc751\uc9d1\ub3c4) \ud558\ub098\uc758 Release Cycle \uc11c\ube44\uc2a4 \ucef4\ud3ec\ub10c\ud2b8 \ubcc4\ub85c Release Cycle \uace0\uc815\uc801\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ubc84 \uc9d1\ud569 \ud074\ub7ec\uc2a4\ud130 \ub2e8\uc704\ub85c \ud655\uc7a5\uc131 \uc788\uac8c \uc6b4\uc601 <p>\ud558\uc9c0\ub9cc \ubd84\uc0b0\ub41c \uad6c\uc870\uc758 \ub300\uaddc\ubaa8 \ud655\uc7a5\uc131\uc788\ub294 \ud658\uacbd\uc744 \uc6b4\uc601\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \uc5b4\ub824\uc6b4 \uc77c\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \uc5b4\ub824\uc6c0\uc5d0 \uc9c1\uba74\ud558\uac8c \ub41c\ub2e4.</p> <ul> <li>Microservices \ub4e4\uc774 \ub9ce\uc544\uc9d0\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \uc5b4\ub824\uc6c0</li> <li>\uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \ub514\ubc84\uae45\uc774 \uc5b4\ub824\uc6c0</li> <li>east-west \ud1b5\uc2e0\uc758 tracking\uc774 \uc5b4\ub824\uc6c0</li> <li>\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucee8\ud14c\uc774\ub108\ud654\uc5d0 \ub530\ub77c \uc6b4\uc601\uc758 \ubcf5\uc7a1\uc131\uc774 \ub192\uc544\uc9d0</li> <li>\ube4c\ub4dc, \ubc30\ud3ec \uc790\ub3d9\ud654\uac00 \ud544\uc694</li> <li>\ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac\ud558\ub294 \uc2e0\ub8b0\uc131 \uc788\ub294 \uba38\uc2e0 \ud074\ub7ec\uc2a4\ud130\uac00 \ud544\uc694</li> <li>\uc720\uc5f0\ud558\uace0 \ud655\uc7a5 \uac00\ub2a5\ud55c \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694</li> </ul> <p>\uc774\ub7ec\ud55c \uc5b4\ub824\uc6c0\uc744 \uadf9\ubcf5\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\ub294 \ub3c4\uad6c\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc774\uba70 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98\uc758 \uc9c4\ud654\uc758 \ub2e8\uacc4\uc5d0 \uc911\uc2ec\uc5d0\uc11c \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \uc81c\uacf5\ud558\uace0 \uc11c\ube44\uc2a4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc6b4\uc601 \uad00\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \ub9cc\ub4e4\uc5b4 \uc900\ub2e4.</p>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_2","title":"Kubernetes \ucee8\uc149","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud070 \uc11c\ubc84 \ubcf4\ub2e4\ub294 \uc791\uc9c0\ub9cc \ub9ce\uc740 \uc11c\ubc84\ub97c \ubd84\uc0b0 \ubc30\ud3ec\ud558\uc5ec \uc6b4\uc601\ud558\ub294 \uc811\uadfc \ubc29\uc2dd\uc774\ub2e4. \uc11c\ubc84\uc640 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ub9ce\uc740 \uc5d0\uc774\uc804\ud2b8\ub4e4\ub85c \uc694\uccad\uc5d0 \ub530\ub978 \uc751\ub2f5\uc744 \ud560 \uac83\uc744 \uc608\uc0c1\ud558\ub3c4\ub85d \uc791\uc131 \ub418\uc5b4 \uc788\ub2e4. \ud55c\uac00\uc9c0 \uc911\uc694\ud55c \ubd80\ubd84\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc11c\ubc84 \ud504\ub85c\uc138\uc2a4\uac00 \uc8fd\uac70\ub098, \uad50\uccb4\ub418\uac70\ub098, \uc77c\uc2dc\uc801\uc778 \uc11c\ubc84\uc758 \ubc30\ud3ec\ub85c \uc774\uc5b4\uc9c0\ub294 \uac83\uc744 \uc608\uc0c1 \ud558\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4. \ub610\ud55c, \ucee4\ubba4\ub2c8\ucf00\uc774\uc158\uc740 API \ud638\ucd9c \uae30\ubc18\uc73c\ub85c \uc720\uc5f0\ud558\uac8c \uc774\ub8e8\uc5b4\uc9c4\ub2e4. \uad6c\uc131 \uc815\ubcf4\ub294 JSON \ud615\ud0dc\ub85c ETCD\uc5d0 \uc800\uc7a5\ub418\uc5b4 \uc788\uc73c\uba70 \ucee4\ubba4\ub2c8\ud2f0\uc5d0 \uc758\ud574 \ub300\ubd80\ubd84 YAML\ub85c \uc791\uc131\ub41c\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc5d0\uc774\uc804\ud2b8\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub418\uae30 \uc804\uc5d0 YAML\uc744 JSON\uc73c\ub85c \ubcc0\ud658 \uc2dc\ucf1c \uc800\uc7a5\ud55c\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#control-plane","title":"Control Plane","text":"<ul> <li>kube-apiserver: API \uc11c\ubc84\ub294 REST\ub97c \ud1b5\ud574 \ub2e4\ub978 \ubaa8\ub4e0 \uad6c\uc131 \uc694\uc18c\uac00 \uc0c1\ud638 \uc791\uc6a9\ud560\uc218 \uc788\ub3c4\ub85d \uc81c\uacf5\ud558\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uc601\uc5ed\uc774\uba70 Pod, Service, replicationcontrollers \ub4f1\uc758 API \uac1c\uccb4\uc5d0 \ub300\ud55c \ub370\uc774\ud130\uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc0ac\ud558\uace0 \uc801\uc6a9\ud55c\ub2e4.</li> <li>kube-scheduler: \ud560\ub2f9\ub41c \ub178\ub4dc\uac00 \uc5c6\ub294 \uc0c8\ub85c \uc0dd\uc131\ub41c \ud30c\ub4dc\ub97c \ud655\uc778\ud558\uc5ec \uc2e4\ud589\ud560 \ub178\ub4dc\ub97c \uc120\ud0dd\ud558\ub294 \uad00\ub9ac \uc601\uc5ed\uc774\ub2e4.</li> <li>kube-controller-manager: \ucee8\ud2b8\ub864\ub7ec \ud504\ub85c\uc138\uc2a4\ub97c \uc2e4\ud589\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \ucee8\ud2b8\ub864\ub7ec\ub97c \uad00\ub9ac \ud55c\ub2e4.</li> <li>node controller: \ub178\ub4dc\uac00 \ub2e4\uc6b4\ub418\uc5c8\uc744 \ub54c \ub300\uc751\uacfc notice\uc5d0 \uad00\ud55c \ucc45\uc784\uc744 \uac00\uc9c4\ub2e4.</li> <li>Job controller: Job\uc758 \uac1c\uccb4\ub97c \uac10\uc2dc\ud55c \ub2e4\uc74c\ud574\ub2f9 \uc791\uc5c5\uc774 \uc644\ub8cc \ub420\ub54c \uae4c\uc9c0 \uc2e4\ud589\ub418\ub294 \ud30c\ub4dc\ub97c \uc0dd\uc131 \uad00\ub9ac \ud55c\ub2e4.</li> <li>Endpoints controller: \uc11c\ube44\uc2a4\uc640 \ud30c\ub4dc\ub97c \uc5f0\uacb0\uc2dc\ud0a4\ub294 \uc5ed\ud560\uc744 \ub2f4\ub2f9 \ud55c\ub2e4.</li> <li>Service Account &amp; Token controllers: \uc0c8\ub85c\uc6b4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ub300\ud55c \uae30\ubcf8 \uacc4\uc815\uacfc API \uc811\uadfc \ud1a0\ud070\uc744 \uc0dd\uc131\ud55c\ub2e4.</li> <li>cloud-controller-manager: \ud074\ub77c\uc6b0\ub4dc\ubcc4 \ucee8\ud2b8\ub864 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\ud2b8\ub864 \ud50c\ub808\uc778 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ud074\ub77c\uc6b0\ub4dc \ucee8\ud2b8\ub864\ub7ec \ub9e4\ub2c8\uc800\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130\ub97c \ud074\ub77c\uc6b0\ub4dc \uacf5\uae09\uc790\uc758 API\uc5d0 \uc5f0\uacb0\ub41c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#worker","title":"Worker","text":"<ul> <li>kubelet: \ud074\ub7ec\uc2a4\ud130\uc758 \uac01 \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uc5d0\uc774\uc804\ud2b8. Kubelet\uc740 \ud30c\ub4dc\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uad00\ub9ac \uc6b4\uc601\ud558\ub294 \uc8fc\uccb4 \uc774\ub2e4.</li> <li>kube-proxy: \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc815\uc758\ub41c \uc11c\ube44\uc2a4\uc758 \ub124\ud2b8\uc6cc\ud06c \uc815\ucc45\uc744 \ubc18\uc601\ud558\uace0 \uc11c\ube44\uc2a4\uc758 Pod\uc5d0 \ub300\ud55c \uc694\uccad\uc744 \ud3ec\uc6cc\ub529 \ud558\ub294 \uaddc\uce59\uc744 \uad00\ub9ac \ud55c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#kubernetes_3","title":"Kubernetes \uc7a5\uc810 \ubc0f \uace0\ub824\uc0ac\ud56d","text":""},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_1","title":"\uc7a5\uc810","text":"<p>\ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\ub97c Code\ub85c \uc120\uc5b8 \ubc0f \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 GitOps, CICD\ub4f1\uc744 \ud65c\uc6a9\ud558\uc5ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc790\ub3d9\ud654\ud560 \uc218 \uc788\uc73c\uba70 On-prem \ubc0f Cloud \ud658\uacbd agnostic \ud558\uac8c \ucee8\ud14c\uc774\ub108\ub97c \uad00\ub9ac \uc6b4\uc601 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_2","title":"\uace0\ub824\uc0ac\ud56d","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ucee8\uc149\uc5d0 \ub9de\ucdb0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubcc0\ud654(Scale out \uad6c\uc870, Microservice \ud615\ud0dc)\uac00 \ud544\uc694\ud558\uba70, \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uac1c\ubc1c\uc870\uc9c1\uc744 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub85c on-boarding \ud558\uc5ec \uc0ac\uc804 \uac80\uc99d \ud544\uc694\ud558\ub2e4. \ub610\ud55c \uc778\ud504\ub77c \uad00\uc810\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uace0\ub824\ud574\uc11c \uc124\uacc4\ud558\uace0 \uad6c\ucd95\uc744 \uc9c4\ud589\ud574\uc57c \ud558\uba70 \uad6c\ucd95 \uc644\ub8cc \ud6c4\uc5d0\ub3c4 \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \ub2e4\uc591\ud55c CNCF \uc0dd\ud0dc\uacc4\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\uac8c \uc870\ud569\ud574\uc57c \ud55c\ub2e4. \ud2b9\ud788 \uadf8 \uc0dd\ud0dc\uacc4\uac00 \ub9e4\uc6b0 \ubc29\ub300\ud558\ubbc0\ub85c Learning Curve \uaf64 \ub192\uace0 \ucda9\ubd84\ud55c \uc2dc\uac04\uacfc \ud14c\uc2a4\ud2b8\ub97c \uac70\uce5c \ud6c4\uc5d0 \ud504\ub7ec\ub355\uc158 \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section01/what-is-kubernetes/#_3","title":"\ucd94\ucc9c \uc790\ub8cc","text":"<ul> <li>Kubernetes Tutorials Overview<ul> <li>Official Kubernetes Tutorials</li> </ul> </li> </ul>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(cloud) - AWS EKS","text":"<p>EKS \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5</p> <p>\uc774\ubc88 \uc2e4\uc2b5\uc740 Amazon EKS\ub85c \ub300\uaddc\ubaa8 \ucee8\ud14c\uc774\ub108 \uc6b4\uc601 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc11c\ube44\uc2a4(Container)\ub97c \ubc30\ud3ec \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. AWS\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f1\uc2a4 \uc11c\ube44\uc2a4\uc778 EKS\uc5d0 \ub300\ud574 \ubc30\uc6cc \ubcf4\uace0 \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":""},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#aws-cli","title":"AWS CLI \uc124\uc815","text":"<p>AWS CLI \uc124\uce58: \uad00\ub828 \ub9c1\ud06c</p> <p>AWS CLI \ucd08\uae30 \uc124\uc815: \uad00\ub828 \ub9c1\ud06c</p> <p>Note</p> <p>\uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 IAM User \uad8c\ud55c\uc5d0 <code>AdministratorAccess</code> policy \ubd80\uc5ec</p>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#architecture","title":"Architecture","text":""},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#1-eks","title":"1. EKS \uad6c\uc131 \ud558\uae30","text":""},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#iam-user-for-eks","title":"IAM user for EKS","text":"<p>EKS\ub294 Root User\ub85c \uc0dd\uc131/\uc811\uc18d\ud558\ub294 \uac83\uc744 \ubcf4\uc548\uc0c1 \uad8c\uace0\ud558\uc9c0 \uc54a\uc73c\uba70 EKS\uc744 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \uad8c\ud55c(Kubernetes RBAC authorization)\uc744 EKS\ub97c \uc0dd\uc131\ud55c IAM \uc5d4\ud130\ud2f0(user \ud639\uc740 role)\ub85c \ubd80\ud130 \ud560\ub2f9\uc744 \uc2dc\ud0a4\uae30 \ub54c\ubb38\uc5d0 IAM user \ud639\uc740 role\ub97c \uc0ac\uc6a9\uc911\uc774\uc9c0 \uc54a\ub2e4\uba74 \ud544\uc218\ub85c IAM \uc5d4\ud130\ud2f0\ub97c \uc0dd\uc131\ud558\uace0 EKS \uc0dd\uc131 \uc5ed\ud560\uc744 \ubd80\uc5ec \ud574\uc57c\ud55c\ub2e4. </p> <p>https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html</p> <p>\uc0ac\uc6a9\uc911\uc778 IAM \uc5d4\ud130\ud2f0(\uc720\uc800, Role)\uac00 \uc788\ub2e4\uba74 eksctl \uad8c\ud55c\uc774 \uc788\ub294\uc9c0 \uac80\ud1a0. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 AdministratorAccess policy \ubd80\uc5ec</p> <p>Otherwise, create a IAM user with eksctl minimum policies. https://eksctl.io/usage/minimum-iam-policies/</p> <p>\ud604\uc7ac \uc138\uc158\uc758 IAM \uc5d4\ud130\ud2f0 \ud655\uc778 \ubc29\ubc95</p> <pre><code>$ aws sts get-caller-identity\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#install-eksctl-and-kubectl","title":"Install eksctl and kubectl","text":"<p>EKS \uc0dd\uc131\uc744 \uc704\ud574 eksctl\uc744 \uc124\uce58 \ud558\uace0 \ucd94\ud6c4 kubernetes \uad00\ub9ac\ub97c \uc704\ud574 kubectl\ub3c4 \uc0ac\uc804\uc5d0 \uc124\uce58 \ud544\uc694: kubectl \uc124\uce58(1.18)</p> <p>eksctl \uc124\uce58</p>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#deploy-eks-cluster","title":"Deploy EKS Cluster","text":"<p>EKS \ubc30\ud3ec\ub97c \uc704\ud55c \uad6c\uc131 \uc815\ubcf4 \ud30c\uc77c (eks-cluster-config.yml) \uc791\uc131</p> <p>*\uc2e4\uc2b5 \ube44\uc6a9 \uc808\uac10\uc744 \uc704\ud574 SPOT \uc778\uc2a4\ud134\uc2a4 \uc0ac\uc6a9</p> <pre><code>---\napiVersion: eksctl.io/v1alpha5\nkind: ClusterConfig\n\nmetadata:\n  name: cloud-eks-cluster\n  region: ap-northeast-2\n\navailabilityZones: [\"ap-northeast-2a\", \"ap-northeast-2c\"]\n\niam:\n  withOIDC: true\n\nmanagedNodeGroups:\n- name: cloud-eks-workers\n  desiredCapacity: 1\n  iam:\n    withAddonPolicies:\n      albIngress: true\n  instanceTypes: [\"c4.large\",\"c5.large\"]\n  spot: true\n#  instanceType: t3.small\n#  ssh:\n#    publicKeyName: \"&lt;your key pair name&gt;\"\n#    https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2#KeyPairs:\n\ncloudWatch:\n    clusterLogging:\n        enableTypes: [\"audit\", \"authenticator\", \"controllerManager\"]\n</code></pre> <p>\uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4 \ub300\ub85c cluster \uc0dd\uc131</p> <pre><code>$ eksctl create cluster -f ./eks-cluster-config.yml\n</code></pre> <p>EKS Cluster \uad6c\uc131 \uc644\ub8cc \uae4c\uc9c0 \uc57d 15\ubd84 \uc18c\uc694</p> <p>\uc635\uc158)\ub9cc\uc57d CLI\ub85c \ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\ud589</p> <pre><code>eksctl create cluster \\\n--name cloud-eks-01 \\\n--version 1.18 \\\n--region ap-northeast-2 \\\n--zones=ap-northeast-2a,ap-northeast-2c \\\n--nodegroup-name cloud-eks-workers \\\n--nodes 1 \\\n--nodes-min 1 \\\n--nodes-max 3 \\\n--with-oidc \\\n--managed \\\n--alb-ingress-access \\\n--spot \\\n--instance-types=c4.large,c5.large\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#eks-cluster","title":"EKS Cluster \uc811\uc18d \ud655\uc778","text":"<p>\uc815\uc0c1\uc801\uc778 output</p> <pre><code>[\u2714]  all EKS cluster resources for \"cloud-eks-01\" have been created\n[\u2139]  nodegroup \"cloud-eks-workers\" has 1 node(s)\n[\u2139]  node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready\n[\u2139]  waiting for at least 1 node(s) to become ready in \"cloud-eks-workers\"\n[\u2139]  nodegroup \"cloud-eks-workers\" has 1 node(s)\n[\u2139]  node \"ip-192-168-27-236.ap-northeast-2.compute.internal\" is ready\n[\u2139]  kubectl command should work with \"/Users/kcchang/.kube/config\", try 'kubectl get nodes'\n[\u2714]  EKS cluster \"cloud-eks-01\" in \"ap-northeast-2\" region is ready\n</code></pre> <p>kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778</p> <pre><code>\u279c  \u2717 kubectl get nodes\nNAME                                                STATUS   ROLES    AGE   VERSION\nip-192-168-27-236.ap-northeast-2.compute.internal   Ready    &lt;none&gt;   19m   v1.18.9-eks-d1db3c\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#2-application","title":"2. Application \ubc30\ud3ec","text":""},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#database","title":"Database \ubc30\ud3ec","text":"<p>\uc608\uc81c todo \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ub85c\uceec sqlight DB \ub300\uc2e0\uc5d0 \uc678\ubd80 RDBMS(mariadb, mysql\ub4f1) \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9 \ud55c \uacbd\uc6b0\uc5d0\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc704\uc5d0 DB app\uc744 \ubc30\ud3ec \ud574\uc57c\ud558\ubbc0\ub85c \uad00\ub828\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131</p> <p>Deployment \ud30c\uc77c \uad6c\uc131 \ud558\uae30 kuberentes deployment</p> <p>mysql-deployment.yaml</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mysql\nspec:\n  selector:\n    matchLabels:\n      app: mysql\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      containers:\n      - image: cloudacode/mariadb-todo:v1.0.1\n        name: mysql\n        ports:\n        - containerPort: 3306\n          name: mysql\n</code></pre> <p>Deploy the contents of the deployment file:</p> <pre><code>kubectl apply -f mysql-deployment.yaml\n</code></pre> <p>Display information about the Deployment:</p> <pre><code>kubectl describe deployment mysql\n</code></pre> <p>\uc815\uc0c1\uc801\uc73c\ub85c mysql\uc774 Deploy\uac00 \ub418\uc5c8\ub2e4\uba74 flask app\uc5d0\uc11c mysql\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551</p> <p>mysql-service.yaml</p> <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: mysql\nspec:\n  ports:\n  - port: 3306\n  selector:\n    app: mysql\n  clusterIP: None\n</code></pre> <p>Deploy the contents of the service file:</p> <pre><code>kubectl apply -f mysql-service.yaml\n</code></pre> <p>\ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4</p> <pre><code>kubectl get pods -l app=mysql\n</code></pre> <p>Output</p> <pre><code>NAME                     READY   STATUS    RESTARTS   AGE\nmysql-6fd94cc949-d8lj7   1/1     Running   0          23s\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#flask-app","title":"Flask APP \ubc30\ud3ec","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0 Flask app\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 Deployment manifast \ud30c\uc77c \uc791\uc131</p> <p>flask-deployment.yaml</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cloud-flask\n  labels:\n    app: cloud-flask\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: cloud-flask\n  strategy:\n    rollingUpdate:\n      maxSurge: 20%\n      maxUnavailable: 20%\n    type: RollingUpdate\n  template:\n    metadata:\n      labels:\n        app: cloud-flask\n    spec:\n      containers:\n      - image: cloudacode/python-todo:v1.1.0\n        imagePullPolicy: Always\n        name: cloud-flask\n        ports:\n        - containerPort: 5000\n          protocol: TCP\n        env:\n        - name: DB_USER\n          value: root\n        - name: DB_PASSWORD\n          value: mysecret\n        - name: DB_NAME\n          value: todo\n        - name: DB_HOST\n          value: mysql\n</code></pre> <p>Deploy the contents of the deployment file:</p> <pre><code>kubectl apply -f flask-deployment.yaml\n</code></pre> <p>Display information about the Deployment:</p> <pre><code>kubectl describe deployment cloud-flask\n</code></pre> <p>\uc815\uc0c1\uc801\uc73c\ub85c Flask app\uc774 \ubc30\ud3ec \ub418\uc5c8\ub2e4\uba74 \uc678\ubd80\uc5d0\uc11c flask app\uc73c\ub85c \uc811\uc18d\uc744 \uc704\ud574 service\ub97c deployment\uc5d0 \ub9e4\ud551</p> <p>flask-service.yaml</p> <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: cloud-flask-svc\nspec:\n  selector:\n    app: cloud-flask\n  ports:\n   -  protocol: TCP\n      port: 80\n      targetPort: 5000\n  type: LoadBalancer\n</code></pre> <p>Deploy the contents of the service file:</p> <pre><code>kubectl apply -f flask-service.yaml\n</code></pre> <p>\ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4</p> <pre><code>kubectl get pods -l app=cloud-flask\n</code></pre> <p>flask app\uc758 \uacbd\uc6b0\ub294 Service \ud0c0\uc785\uc744 LB\ub85c \uc678\ubd80 \ub178\ucd9c\uc744 \uc2dc\ucf30\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 LB Endpoint\ub97c \ud655\uc778 \uac00\ub2a5</p> <pre><code>kubectl get svc cloud-flask-svc\n</code></pre> <p>Output</p> <pre><code>NAME              TYPE           CLUSTER-IP       EXTERNAL-IP                                                                   PORT(S)        AGE\ncloud-flask-svc   LoadBalancer   10.100.211.215   acd2f9103b9564eb3ada544282a1dee3-566651492.ap-northeast-2.elb.amazonaws.com   80:31126/TCP   101s \n</code></pre> <p>\ud574\ub2f9 LB endpoint\ub85c \uc811\uadfc \ud558\uc5ec \ud655\uc778 \ub3d9\uc791 \ud655\uc778</p>"},{"location":"hello-kubernetes/section01/handson/setup-cloud-k8s-eks/#clean-up","title":"Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 \ube44\uc6a9 \uc808\uc57d\uc744 \uc704\ud574 \uc2e4\uc2b5\ud55c EKS \ub9ac\uc18c\uc2a4\ub97c \uc815\ub9ac</p> <pre><code>eksctl delete cluster --region=ap-northeast-2 --name=&lt;your eks cluster name&gt;\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/","title":"\ud578\uc988\uc628. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd \uad6c\uc131(local) - Kind","text":"<p>Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5</p> <p>\uc774\ubc88 \uc2e4\uc2b5\uc740 Local \ud658\uacbd\uc5d0\uc11c Kind\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2e4\uc2b5 \ud658\uacbd\uc744 \ub9cc\ub4e4\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc785\ub2c8\ub2e4. \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ucee8\ud14c\uc774\ub108 \uc11c\ube44\uc2a4 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":""},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#kuberctl","title":"Kuberctl \uc124\uce58","text":"<p>kuberctl \uc124\uce58: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#docker-desktop","title":"Docker Desktop \uc124\uce58","text":"<p>Docker Desktop \uc124\uce58: \uad00\ub828 \ub9c1\ud06c</p> <p>Tip</p> <p>\uc708\ub3c4\uc6b0\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 <code>WSL</code> \uae30\ub2a5\uc744 \ud65c\uc131\ud654 \ud558\uc5ec \ub9ac\ub205\uc2a4 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \ub3c4\ucee4\ub97c \uc0ac\uc6a9 \ud558\ub294 \uac83\uc744 \ucd94\ucc9c \ud55c\ub2e4.</p> <p>WSL \uc124\uce58 \uac00\uc774\ub4dc </p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#architecture","title":"Architecture","text":"<p> Kind(<code>K</code>ubernetes <code>IN</code> <code>D</code>ocker)\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc758 \uae30\ub2a5\ub4e4\uc744 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\ub3c4\ub85d \ucee8\ud2b8\ub864\ub7ec, \uc6cc\ucee4 \ub178\ub4dc\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ud328\ud0a4\uc9d5 \ubc0f Image\ud654 \ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\uc774\ub2e4.</p> <p>\ucc38\uace0: Kind Document - Initial design, Deep Dive: Kind - CNCF19</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#1-kind","title":"1. Kind \uad6c\uc131 \ud558\uae30","text":""},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_2","title":"\uc124\uce58","text":"<p>Kind Document - Installation</p> <p>OS \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800 \ud639\uc740 \ubc14\uc774\ub108\ub9ac\ub97c \ud1b5\ud574\uc11c \uc124\uce58\ub97c \uc9c4\ud589</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#cluster","title":"Cluster \uc124\uc815","text":"<p>Kind Cluster\uc758 \uad6c\uc131 \uc815\ubcf4\ub97c \ucf54\ub4dc\ud654\ud558\uc5ec \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 \uc5ec\ub7ec \uac00\uc9c0 \uae30\ub2a5\ub4e4\uc744 \ud65c\uc131\ud654\ud560 \uc218 \uc788\ub2e4. \uc6d0\ud65c\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 local cluster\ub97c \uc544\ub798\uc640 \uac19\uc774 \ucee8\ud2b8\ub864\ub7ec 1\uac1c, \uc6cc\ucee4\ub178\ub4dc 3\uac1c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud558\uba70 \uc678\ubd80\uc5d0\uc11c ingress\ub85c \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d port mapping\uae4c\uc9c0 \uae30\ub2a5\uc744 \ud65c\uc131\ud654\ud55c\ub2e4.</p> <p>Info</p> <p>Worker node\uc5d0\ub3c4 ingress\ub97c \uc704\ud55c HostPort Mapping\uc744 \ud560 \uc218 \uc788\uc9c0\ub9cc \uc2e4\uc2b5\uc5d0\uc11c \ub2e4\ub978 \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \uc758\ud574 80, 443\uc774 \uc810\uc720\ub418\uace0 \uc788\uc744 \uc218 \uc788\uae30 \ub584\ubb38\uc5d0 \uc544\ub798\uc640 \uac19\uc774 <code>control node</code>\ub9cc \ud65c\uc131\ud654\ud55c\ub2e4</p> <p>kind-cluster-config.yaml</p> <pre><code>kind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\n# 1 control plane node and 3 workers with v1.30\nnodes:\n- role: control-plane\n  image: kindest/node:v1.30.2\n  kubeadmConfigPatches:\n  - |\n    kind: InitConfiguration\n    nodeRegistration:\n      kubeletExtraArgs:\n        node-labels: \"ingress-ready=true\"\n  extraPortMappings:\n  - containerPort: 80\n    hostPort: 80\n    protocol: TCP\n  - containerPort: 443\n    hostPort: 443\n    protocol: TCP\n- role: worker\n  image: kindest/node:v1.30.2\n- role: worker\n  image: kindest/node:v1.30.2\n- role: worker\n  image: kindest/node:v1.30.2\n</code></pre> <p>\ucc38\uace0: configuring your kind cluster, kind example config file</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#cluster_1","title":"Cluster \uc0dd\uc131","text":"<p>\uc815\uc758\ud55c \uad6c\uc131 \uc815\ubcf4(kind-cluster-config.yaml) \ub300\ub85c cluster \uc0dd\uc131</p> <pre><code>$ kind create cluster --config kind-cluster-config.yaml\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#kind-cluster","title":"Kind Cluster \uc811\uc18d \ud655\uc778","text":"<p>\uc815\uc0c1\uc801\uc778 output</p> <pre><code>Creating cluster \"kind\" ...\n \u2713 Ensuring node image (kindest/node:v1.30.2) \ud83d\uddbc\n \u2713 Preparing nodes \ud83d\udce6 \ud83d\udce6 \ud83d\udce6 \ud83d\udce6\n \u2713 Writing configuration \ud83d\udcdc\n \u2713 Starting control-plane \ud83d\udd79\ufe0f\n \u2713 Installing CNI \ud83d\udd0c\n \u2713 Installing StorageClass \ud83d\udcbe\n \u2713 Joining worker nodes \ud83d\ude9c\nSet kubectl context to \"kind-kind\"\nYou can now use your cluster with:\n\nkubectl cluster-info --context kind-kind\n...\n</code></pre> <p>kubectl\uc744 \ud1b5\ud574 \ucd94\uac00\ub41c node \ud655\uc778</p> <pre><code>$ kubectl get nodes\nNAME                 STATUS   ROLES           AGE     VERSION\nkind-control-plane   Ready    control-plane   10m     v1.24.0\nkind-worker          Ready    &lt;none&gt;          10m     v1.24.0\nkind-worker2         Ready    &lt;none&gt;          10m     v1.24.0\nkind-worker3         Ready    &lt;none&gt;          10m     v1.24.0\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#2","title":"2. \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec","text":""},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#nginx","title":"Nginx \uc6cc\ud06c\ub85c\ub4dc \ubc30\ud3ec","text":"<p>\ub300\ud45c\uc801\uc778 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Nginx\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4.</p> <p>Info</p> <p>Service, Ingress\ub294 \uae30\ucd08\uc801\uc778 \uc124\uc815\uc73c\ub85c \uc9c4\ud589, \ucd94\ud6c4 \ubcc4\ub3c4 \uc2e4\uc2b5\uc5d0\uc11c \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815</p> <p>frontend-nginx.yaml</p> <pre><code>kind: Pod\napiVersion: v1\nmetadata:\n  name: frontend\n  labels:\n    app: nginx\nspec:\n  containers:\n  - image: nginx\n    name: nginx\n    ports:\n    - containerPort: 80\n---\nkind: Service\napiVersion: v1\nmetadata:\n  name: frontend-service\nspec:\n  selector:\n    app: nginx\n  ports:\n  - port: 80\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: frontend-ingress\nspec:\n  rules:\n  - http:\n      paths:\n      - pathType: Prefix\n        path: /\n        backend:\n          service:\n            name: frontend-service\n            port:\n              number: 80\n---\n</code></pre> <p>\uc815\uc758\ub41c \uad6c\uc131\ub300\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec:</p> <pre><code>kubectl apply -f frontend-nginx.yaml\n</code></pre> <p>\ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744\uc218 \uc788\ub2e4</p> <pre><code>kubectl get pods -l app=nginx\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#_3","title":"\uc811\uadfc \ud655\uc778","text":"<p>\uc544\uc9c1 Load Balancer\ub098 Ingress Controller\ub97c \uad6c\uc131\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 Port-Forwarding\uc744 \ud1b5\ud574\uc11c \uc9c1\uc811 \ud3ec\ud2b8\ub97c \uc5f4\uc5b4\uc11c \uc811\uadfc\ud558\uc5ec \uc811\uc18d\uc774 \uc798 \ub418\ub294\uc9c0\ub97c \ud655\uc778\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#port-forwarding","title":"Port-Forwarding\uc744 \ud1b5\ud55c \uc811\uadfc \ud655\uc778","text":"<p>frontend-service \uc11c\ube44\uc2a4\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uc84c\ub294\uc9c0 \ud655\uc778 \ud6c4</p> <pre><code>kubectl get service/frontend-service\n\nNAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\nfrontend-service   ClusterIP   10.96.1.81   &lt;none&gt;        80/TCP    10m\n</code></pre> <p>Port-Forwarding \uc124\uc815\uc744 \ud1b5\ud574\uc11c local \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc11c\ube44\uc2a4 \ud3ec\ud2b8\ub85c \uc9c1\uc811 \uc5f0\uacb0\uc744 \uc2dc\ub3c4</p> <pre><code>kubectl port-forward service/frontend-service 8080:80\n\nForwarding from 127.0.0.1:8080 -&gt; 80\nForwarding from [::1]:8080 -&gt; 80\n</code></pre> <p>Tip</p> <p>\ub85c\uceec\ud658\uacbd\uc5d0\uc11c 80\ud3ec\ud2b8\uac00 \ub2e4\ub978 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc77c \uc218 \uc788\uc73c\uba70 \ud3ec\ud2b8 \uc624\ud508 \uad8c\ud55c\uc774 \ud544\uc694\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 8080\ud3ec\ud2b8\ub85c \uc9c4\ud589</p> <p>Endpoint localhost:8080 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#ingress-nginx","title":"(\uc635\uc158) Ingress-nginx\ub97c \uad6c\uc131 \ubc0f \uc811\uadfc \ud655\uc778","text":"<p>\ub9e4\ubc88 \ud3ec\ud2b8\ud3ec\uc6cc\ub529\uc73c\ub85c \uc811\uadfc \ud655\uc778\uc744 \ud558\ub294 \uac83\uc774 \ub9e4\uc6b0 \ubc88\uac70\ub86d\uae30 \ub54c\ubb38\uc5d0 \uc678\ubd80\uc758 \ud2b8\ub808\ud53d\uc744 \uc11c\ube44\uc2a4\ub85c \ud3ec\uc6cc\ub529 \uc2dc\ud0a4\uae30 \uc704\ud574 Ingress-Nginx\ub97c \uad6c\uc131\ud55c\ub2e4. (2. Fundamentals \ud578\uc988\uc628\uc5d0\uc11c ingress-nginx\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \ub2e4\ub8f0 \uc608\uc815)</p> <p>ingress-nginx \uc124\uce58 \uc9c4\ud589</p> <pre><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml\n</code></pre> <p>ingress-nginx controller\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl get pods -n ingress-nginx -l app.kubernetes.io/component=controller\n\nNAME                                        READY   STATUS    RESTARTS   AGE\ningress-nginx-controller-5458c46d7d-qjscg   1/1     Running   0          2m\n</code></pre> <p>\uc704 frontend-nginx.yaml\uc5d0\uc11c service \ud0c0\uc785\uc744 \uae30\ubcf8 ClusterIP\ub85c \ub450\uace0 \uc678\ubd80 \ub178\ucd9c\uc744 Ingress\ub97c \ud1b5\ud574 \ud558\uc600\uc73c\ubbc0\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 Endpoint\ub97c Ingress \ub808\ubca8\uc5d0\uc11c \ud655\uc778 \uac00\ub2a5</p> <pre><code>kubectl get ingress\n\nNAME               CLASS    HOSTS   ADDRESS     PORTS   AGE\nfrontend-ingress   &lt;none&gt;   *       localhost   80      68s\n</code></pre> <p>Endpoint localhost:80 \uc811\uadfc \ud655\uc778 \ubc0f \ube0c\ub77c\uc6b0\uc838\ub85c \uae30\ubcf8 nginx \ud398\uc774\uc9c0\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubcf4\uc774\ub294\uc9c0 \ud655\uc778</p>"},{"location":"hello-kubernetes/section01/handson/setup-local-k8s-kind/#clean-up","title":"Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/","title":"\ud578\uc988\uc628. Helm\uc73c\ub85c Redis master-replica cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec","text":"<p>Kind \ud658\uacbd \uad6c\uc131 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc2e4\uc2b5</p> <p>\uc774\ubc88 \uc2e4\uc2b5\uc740 redis \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 Helm\uc744 \ud1b5\ud574 master-replica cluster \uad6c\uc131\uc73c\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5 \uc774\ub2e4. Helm\uc73c\ub85c \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec\ub97c \uc704\ud55c \uae30\ubcf8 \uc791\uc5c5\ub4e4\uc744 \uc774\ud574 \ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":""},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#kind","title":"Kind \ud658\uacbd","text":"<p>\ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#architecture","title":"Architecture","text":""},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#1-helm-redis-m-s-cluster","title":"1. Helm\uc73c\ub85c Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ubc0f \ubc30\ud3ec","text":"<p>\ub300\ud45c\uc801\uc778 cache \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc778 Redis\ub97c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0 helm\uc73c\ub85c \uc190\uc27d\uac8c Master-Replica \uad6c\uc131 \ubc30\ud3ec\ub97c \ud574 \ubcf8\ub2e4. Redis \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub294 Redis\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 Standalone \ud658\uacbd \uad6c\uc131\uc740 \uac04\ub2e8\ud788 \ubc30\ud3ec\ud560 \uc218 \uc788\uc73c\ub098 Cluster \uad6c\uc131\uc744 \ud574\uc57c \ud560 \uacbd\uc6b0 \ub9ac\uc18c\uc2a4\uc758 \uc5f0\uad00\uad00\uacc4\uc640 \ud074\ub7ec\uc2a4\ud130\uc758 \uc124\uc815\uac12\ub4e4\uc744 \ub9de\ud600\uc11c \ucd94\uac00\ud574 \uc8fc\uc5b4\uc57c \ud55c\ub2e4. Bitnami\uc5d0\uc11c \uc774\ub7ec\ud55c \uad6c\uc131 \uc815\ubcf4\ub97c helm\uc73c\ub85c \ud15c\ud50c\ub9bf \ubc0f \ud328\ud0a4\uc9d5\ud654 \ud574 \ub193\uc558\uc73c\uba70 \uc0ac\uc6a9\uc790\ub294 \uc6d0\ud558\ub294 \uad6c\uc131 \ubcc0\uc22b\uac12\ub9cc \uc218\uc815\ud558\uba74 Master Replica \uad6c\uc131\ubd80\ud130 Sentinel \uad6c\uc131\uae4c\uc9c0 \uc190\uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#11-helm-repo","title":"1.1 Helm Repo \ucd94\uac00","text":"<p>Bitnami helm repo\ub97c \ucd94\uac00</p> <pre><code>helm repo add bitnami https://charts.bitnami.com/bitnami\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#12-redis","title":"1.2 Redis \uad6c\uc131 \ud658\uacbd \uc124\uc815","text":"<p>\ub450 \ubc88\uc9f8\ub85c helm vaules \uac12 \uc6d0\ud558\ub294 \uad6c\uc131(Master\uc640 Replica Cluster)\uc5d0 \ub9de\uac8c \ubcc0\uc22b\uac12\uc744 \uc5c5\ub370\uc774\ud2b8</p> <p>\ud604\uc7ac \uae30\ubcf8 \uc124\uc815 \uac12\uc774 Replication \uc774\ubbc0\ub85c architecture\uc5d0 \ub300\ud574\uc11c\ub294 \uc218\uc815 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\uba70 \uc2e4\uc2b5 \ud658\uacbd\uc5d0 \ub9de\uac8c Storage Class \uc774\ub984\uacfc \ud06c\uae30\ub9cc \uc870\uc808 \ud558\ub3c4\ub85d \ud55c\ub2e4.</p> <p>Tip</p> <p>\ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\uc778 \uacbd\uc6b0\ub294 <code>standard</code>\uac00 \uae30\ubcf8 storageClass \uc774\ubbc0\ub85c \ucd94\uac00\ud560 \ud544\uc694 \uc5c6\ub2e4. \uc790\uc138\ud55c \uc815\ubcf4\uc5d0 \ub300\ud574 \uc54c\uace0 \uc2f6\ub2e4\uba74 <code>kubectl get storageclasses.storage.k8s.io</code> \uc744 \ud1b5\ud574\uc11c \ud655\uc778 \uac00\ub2a5\ud558\ub2e4.</p> <p>redis-values.yaml</p> <pre><code>global:\n  storageClass: \"standard\"\nmaster:\n  persistence:\n    size: 50Mi\nreplica:\n  persistence:\n    size: 50Mi\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#13","title":"1.3 \uc124\uce58","text":"<p>\ud574\ub2f9 \uad6c\uc131 \uc815\ubcf4\uc5d0 \ub9de\ucdb0\uc11c redis cluster \ubc30\ud3ec</p> <pre><code>helm install redis-cluster bitnami/redis --namespace redis \\\n  --create-namespace -f redis-values.yaml\n</code></pre> <p>\ub9cc\uc57d values \uac12\uc744 \uc5c5\ub370\uc774\ud2b8\ud55c \ud6c4 \ub2e4\uc2dc \ub9b4\ub9ac\uc988\ud574\uc57c \ud558\ub294 \uacbd\uc6b0\ub294 upgrade \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4</p> <pre><code>helm upgrade --install redis-cluster bitnami/redis \\\n  --namespace redis --create-namespace -f redis-values.yaml\n</code></pre> <p>\ub2e4\uc74c\uacfc \uac19\uc774 revision\uc774 \uc62c\ub77c\uac04 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4.</p> <pre><code>NAMESPACE: redis\nSTATUS: deployed\nREVISION: 2\nTEST SUITE: None\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#2-redis-m-s-cluster","title":"2. Redis M-S Cluster \ud658\uacbd \uad6c\uc131 \ud655\uc778","text":""},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#21","title":"2.1 \uad6c\uc131 \ud655\uc778","text":"<p>\ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\uac00 \ub418\uba74 Pod \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc788\uc73c\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \uc784\uc2dc redis client pod\ub97c \ud1b5\ud574 redis\uc5d0 \uc811\uadfc \ubc0f \uc124\uc815\uac12\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code># Redis Password \ud655\uc778\nexport REDIS_PASSWORD=$(kubectl get secret --namespace redis redis-cluster -o jsonpath=\"{.data.redis-password}\" | base64 -d)\n\n# \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod \uc0dd\uc131\nkubectl run --namespace redis redis-client --restart='Never'  --env REDIS_PASSWORD=$REDIS_PASSWORD  --image docker.io/bitnami/redis:7.0.3-debian-11-r0 --command -- sleep infinity\n\n# \ud14c\uc2a4\ud2b8\uc6a9 redis-client pod\uc5d0 \uc811\uadfc\nkubectl exec --tty -i redis-client \\\n--namespace redis -- bash\n</code></pre> <p>\ubc30\ud3ec\ub41c Redis \uc11c\ubc84\uc5d0 \uc811\uc18d</p> <pre><code># Redis \uc11c\ubc84(master \ud639\uc740 replicas)\uc5d0 \uc811\uc18d\nREDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master\nREDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas\n\n# \uc608\uc0c1 output\nredis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-master\nredis-cluster-master:6379&gt;\nredis-cluster-master:6379&gt;\nredis-cluster-master:6379&gt; INFO\n## Server\nredis_version:7.0.3\nredis_git_sha1:00000000\n...\n## Replication\nrole:master\nconnected_slaves:3\nslave0:ip=redis-cluster-replicas-1.,port=6379,state=online,offset=574,lag=1\nslave1:ip=redis-cluster-replicas-2.,port=6379,state=online,offset=574,lag=1\nslave2:ip=redis-cluster-replicas-0.,port=6379,state=online,offset=574,lag=0\nmaster_failover_state:no-failover\n...\n</code></pre> <p>\uc704\uc758 output\uc5d0 \ud604\uc7ac \uc811\uadfc\ud55c \uc11c\ubc84\ub294 master\uc774\uace0 slave\uac00 3\ub300\uac00 \uad6c\uc131\ub41c \uac83\uc73c\ub85c \ub098\uc624\uba70 \uc2e4\uc81c\ub85c pod \uc774\ub984\uacfc \ub3d9\uc77c\ud558\uac8c \ub9e4\uce6d\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>kubectl get pods -n redis -l app.kubernetes.io/component=replica\nNAME                       READY   STATUS    RESTARTS   AGE\nredis-cluster-replicas-0   1/1     Running   0          13m\nredis-cluster-replicas-1   1/1     Running   0          14m\nredis-cluster-replicas-2   1/1     Running   0          15m\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#21-keyvalue","title":"2.1 Key/Value \ucd94\uac00 \ubc0f \uc870\ud68c \ud655\uc778","text":"<p>\uac04\ub2e8\ud788 key/value\ub97c \ucd94\uac00(master\uc5d0\uc11c\ub9cc \uac00\ub2a5)\ud558\uace0 \uc870\ud68c(master/replica \ub458 \ub2e4 \uac00\ub2a5) \ud560 \uc218 \uc788\ub2e4</p> <pre><code>redis-cluster-master:6379&gt; SET mykey test\nOK\nredis-cluster-master:6379&gt;\nredis-cluster-master:6379&gt; KEYS *\n1) \"mykey\"\nredis-cluster-master:6379&gt;\nredis-cluster-master:6379&gt; GET mykey\n\"test\"\nredis-cluster-master:6379&gt;\n</code></pre> <p>\uc815\uc0c1\uc801\uc73c\ub85c data\uac00 replication \ub418\uace0 \uc788\ub294\uc9c0 \ubcf4\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 Replica \uc11c\ubc84\uc5d0 \ub4e4\uc5b4\uac00\uc11c <code>GET mykey</code>\ub97c \ud1b5\ud574 \ub611\uac19\uc740 \uac12\uc774 \ub098\uc624\ub294\uc9c0 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4.</p> <pre><code>redis-client:/$ REDISCLI_AUTH=\"$REDIS_PASSWORD\" redis-cli -h redis-cluster-replicas\nredis-cluster-replicas:6379&gt;\nredis-cluster-replicas:6379&gt; KEYS *\n1) \"mykey\"\nredis-cluster-replicas:6379&gt; GET mykey\n\"test\"\nredis-cluster-replicas:6379&gt;\n</code></pre>"},{"location":"hello-kubernetes/section01/handson/setup-redis-via-helm/#clean-up","title":"Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 Redis Helm Release \uc81c\uac70</p> <pre><code>helm uninstall redis-cluster -n redis\n</code></pre> <p>kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section02/configmap-secret/","title":"2.6 ConfigMap &amp; Secret","text":"<p>\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uac1c\ubc1c\ud560 \ub54c, \ud658\uacbd\ubcc4(\uac1c\ubc1c\ud658\uacbd, \ud14c\uc2a4\ud2b8\ud658\uacbd, \uc6b4\uc601\ud658\uacbd \ub4f1)\ub85c \uc124\uc815 \uc815\ubcf4\ub97c \ub2e4\ub974\uac8c \ub9cc\ub4e4\uc5b4 \ub2e4\ub8e8\ub294 \uac83\uc740 \uc77c\ubc18\uc801\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc758 \uacbd\uc6b0 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc811\uadfc\ud558\uae30 \uc704\ud55c endpoint \uc815\ubcf4\uac00 \uc788\uc744 \uac83\uc774\ub2e4. \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc774\ub7f0 \ud658\uacbd \uc815\ubcf4\ub97c \uc9c1\uc811 \uac00\uc9c0\uace0 \uc788\uc744 \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc, \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 ConfigMap \uacfc Secret \uc774\ub77c\ub294 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud558\uc5ec \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucf54\ub4dc\uc640 \uc124\uc815 \uc815\ubcf4\ub97c \ubd84\ub9ac\ud558\uc5ec \uc124\uc815\uc5d0 \ub300\ud55c \uacb0\ud569\ub3c4\ub97c \ub0ae\ucd9c \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap","title":"ConfigMap","text":"<p>ConfigMap\uc740 \uc124\uc815 \uc815\ubcf4\ub97c \ud558\ub098 \ud639\uc740 \uc774\uc0c1\uc758 key/value \uc30d\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\uc73c\uba70, value\ub294 \ub2e8\uc77c \uac12\uc774 \ub420 \uc218\ub3c4 \uc788\uace0, \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc774 \ub420 \uc218\ub3c4 \uc788\ub2e4.</p> <p>ConfigMap manifest\uc758 \uc608\uc2dc\ub97c \ubcf4\uc790.</p> <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: sample-configs\ndata:\n  # \uc544\ub798\uc640 \uac19\uc774 \uac04\ub2e8\ud55c key/value\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4.\n  default_ttl: \"30\"\n  say_hello: \"Hi!\"\n\n  # \ub610\ub294, \uc124\uc815 file \ub0b4\uc6a9\uc744 value\ub85c \uc815\uc758\ud560 \uc218\ub3c4 \uc788\ub2e4.\n  sample-nginx.conf: |\n    server {\n      listen            80;\n      index             index.html;\n      server_name       cloudacode.com;\n\n      location / {\n        root  /cloudacode/static/\n      }\n\n      location /api {\n        proxy_pass  https://api.cloudacode.internal\n      }\n    }\n</code></pre>"},{"location":"hello-kubernetes/section02/configmap-secret/#pod-configmap","title":"Pod \uc5d0 ConfigMap \uc815\ubcf4\ub97c \uc804\ub2ec\ud558\uae30","text":"<p>\uc774\ub807\uac8c \uc815\uc758\ub41c ConfigMap\uc740 Pod\uc5d0 \ub2e4\uc591\ud55c \ubc29\ubc95\uc73c\ub85c \uc804\ub2ec\ub420 \uc218 \uc788\ub2e4.</p> <ul> <li>\ud658\uacbd \ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30</li> <li>Command-line Argument \ub85c \uc804\ub2ec\ud558\uae30</li> <li>Volume\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30</li> </ul>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_1","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c \ud658\uacbd\ubcc0\uc218\ub85c \uc815\uc758\ud558\uae30","text":"<p>\uc774\uc804\uc5d0 \uc124\uba85\ud55c ConfigMap \uc608\uc2dc\uc5d0 \uc788\ub294 \uc815\ubcf4\uc758 \uc77c\ubd80\ub97c Pod\ub97c \uc0dd\uc131\ud560 \ub54c \ud658\uacbd \ubcc0\uc218\ub85c \uc77d\ub294 \ubc29\ubc95\uc774\ub2e4.</p> <p></p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: sample\nspec:\n  containers:\n  - image: busybox\n    env:\n    - name: DEFAULT_TTL  # \ud658\uacbd\ubcc0\uc218 \uc774\ub984. \uc544\ub798 ConfigMap key\uc5d0 \ud574\ub2f9\ud558\ub294 value\ub97c \uac00\uc9c4\ub2e4.\n      valueFrom:\n        configMapKeyRef:\n          name: sample-configs  # ConfigMap\uc758 \uc774\ub984\n          key: default_ttl         # ConfigMap\uc5d0 \uc815\uc758\ub41c key\n</code></pre>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap-command-line-argument","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c Command-line Argument\ub85c \uc804\ub2ec\ud558\uae30","text":"<p>\uc774\uc804 \ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 \uac12\uc744, $(VALUE_NAME) \uacfc \uac19\uc740 \ubb38\ubc95\uc744 \uc774\uc6a9\ud574 Command-line Argument\ub85c \uc804\ub2ec\ud560 \uc218\ub3c4 \uc788\ub2e4.</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: sample\nspec:\n  containers:\n  - image: busybox\n    command: [ \"/bin/sh\", \"-c\", \"echo $(WELCOME_MESSAGE)\"]\n    env:\n    - name: WELCOME_MESSAGE\n      valueFrom:\n        configMapKeyRef:\n          name: sample-configs\n          key: say_hello\n</code></pre>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_2","title":"ConfigMap\uc758 \uc815\ubcf4\ub97c \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac\ub85c \ub9c8\uc6b4\ud2b8\ud558\uae30","text":"<p>\uc774 \ubc29\ubc95\uc740 \uac00\uc7a5 \ud754\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 ConfigMap\uc744 \uc804\ub2ec\ud558\ub294 \ubc29\ubc95 \uc911 \ud558\ub098\ub85c, \uc6f9\uc11c\ubc84\uc758 \uc124\uc815\ud30c\uc77c \ub4f1\uc744 \ud30c\uc77c \ud639\uc740 \ub514\ub809\ud1a0\ub9ac \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.</p> <p></p> <pre><code>apiVersion: apps/v1\nkind: Pod\nmetadata:\n  name: nginx\nspec:\n  containers:\n  - name: nginx\n    image: nginx\n    ports:\n    - containerPort: 80\n    volumeMounts:\n      - name: nginx-vhost-config\n        mountPath: /etc/nginx/conf.d\n        readOnly: true\n  volumes:\n    - name: nginx-vhost-config\n      configMap:\n        name: sample-configs\n        items:\n        - key: \"sample-nginx.conf\"\n          path: \"sample-nginx.conf\"\n</code></pre> <p>\uc774\ub807\uac8c \uc120\uc5b8\ub41c Pod\uc5d0\uc11c\ub294 <code>/etc/nginx/conf.d/</code> \uacbd\ub85c\uc5d0 <code>sample-nginx.conf</code> \ud30c\uc77c\uc774 \ub9c8\uc6b4\ud2b8\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_3","title":"ConfigMap \uc758 \ubcc0\uacbd \uc0ac\ud56d \ubc18\uc601","text":"<p>\uc0dd\uc131\ub418\uc5b4\uc788\ub294 ConfigMap\uc758 \ub0b4\uc6a9\uc744 \ubc14\uafb8\ub294 \uacbd\uc6b0, ConfigMap\uc744 Volume\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 Pod\uc5d0\ub3c4 \uc5c5\ub370\uc774\ud2b8\ub41c \uc124\uc815\uc744 \uc77d\uc744 \uc218 \uc788\ub2e4.</p> <p>\ub2e4\ub9cc ConfigMap\uc758 \ubcc0\uacbd\ub41c \uc815\ubcf4\ub97c \uc5c5\ub370\uc774\ud2b8 \ubc1b\ub294\ub370\ub294 \uc544\ub798\uc640 \uac19\uc740 \uc81c\uc57d\uc0ac\ud56d\uc774 \uc788\uc744 \uc218 \uc788\ub2e4.</p> <ul> <li>\uc5c5\ub370\uc774\ud2b8\ub294 kubelet \uc758 \ub3d9\uae30\ud654 \uc2dc\uac04 \ud639\uc740 \uce90\uc2dc \uc9c0\uc5f0 \uc124\uc815\ub4f1 \ub9cc\ud07c \uac78\ub9b4 \uc218 \uc788\ub2e4.</li> <li>ConfigMap \uc815\ubcf4\ub97c subPath\ub97c \uc0ac\uc6a9\ud558\uc5ec volume \ub9c8\uc6b4\ud2b8 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4.</li> <li>\ud658\uacbd\ubcc0\uc218\ub85c \uc77d\uc5b4\uc628 ConfigMap \uc815\ubcf4 \uc5ed\uc2dc \uc5c5\ub370\uc774\ud2b8\ub97c \ubc1b\uc9c0 \ubabb \ud55c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/configmap-secret/#immutable-configmap","title":"Immutable ConfigMap","text":"<p>\uacbd\uc6b0\uc5d0 \ub530\ub77c \ud55c\ubc88 \uc0dd\uc131\ub41c ConfigMap\uc744 \ub0b4\uc6a9 \ubcc0\uacbd\uc5c6\uc774 \uc0dd\uc131/\uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc774 \uacbd\uc6b0, <code>immutable</code> \ud544\ub4dc\ub97c <code>true</code> \ub85c \uc124\uc815\ud558\uc5ec \ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub420 \uc218 \uc5c6\ub294 ConfigMap\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.</p> <p>\uc774\ub807\uac8c \uc0dd\uc131\ub41c ConfigMap\uc740, * kubelet\uc774 \uac10\uc2dc\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c kube apiserver\uc758 \ubd80\ud558\ub97c \uc904\uc77c \uc218 \uc788\ub2e4. * \uc6b0\ubc1c\uc801\uc778 ConfigMap \ubcc0\uacbd\uc774 \ubaa8\ub4e0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\ub3c4\ub85d \ud560 \uc218 \uc788\ub2e4.</p> <p>Info</p> <p>Nginx\uc640 \uac19\uc740 \uc6f9\uc11c\ubc84\uc758 \uc124\uc815 \ud30c\uc77c\uc758 \uacbd\uc6b0, \uc124\uc815\uc758 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud55c\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \uc6f9\uc11c\ubc84\uc5d0 \uc9c1\uc811 \uba85\ub839\uc744 \ud1b5\ud574 \uc124\uc815\uc744 \ub2e4\uc2dc \uc77d\ub3c4\ub85d \ud574\uc57c \ubc18\uc601\uc774 \ub41c\ub2e4. Pod\ub85c \uad6c\uc131\ub41c \uc6f9\uc11c\ubc84\ub77c\uba74 ConfigMap\uc73c\ub85c \uc0dd\uc131\ub41c \uc124\uc815 \ud30c\uc77c\uc774 \ubcc0\uacbd\ub418\uc5c8\uc744 \ub54c, Pod\ub97c \uc7ac\uc0dd\uc131\ud558\uc5ec \uc124\uc815\uc744 \ubc18\uc601\ud558\ub294\uac83\uc774 \ud6a8\uc728\uc801\uc77c \uc218 \uc788\ub2e4. \uc774\ub7f0 \uacbd\uc6b0\ub77c\uba74, ConfigMap\uc758 \ubcc0\uacbd\uc744 \uac10\uc2dc\ud558\uc9c0 \uc54a\ub294 Immutable ConfigMap \uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uad00\ub9ac\ud574\ubcfc \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section02/configmap-secret/#configmap_4","title":"ConfigMap \uc758 \uc81c\uc57d\uc0ac\ud56d","text":"<ul> <li>ConfigMap\uc758 \ud06c\uae30\ub294 1MiB \ub85c \uc81c\ud55c\ub41c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/configmap-secret/#secret","title":"Secret","text":"<p>Secret\uc740 \ud328\uc2a4\uc6cc\ub4dc, API token \ub4f1\uacfc \uac19\uc740 \uc720\ucd9c\uc5d0 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud55c \ubaa9\uc801\uc73c\ub85c \uc124\uacc4\ub418\uc5b4\uc788\ub2e4. Application \uc5d0\uc11c \ucf54\ub4dc\uc5d0 \uc9c1\uc811 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uace0, Secret\uc744 \uc0ac\uc6a9\ud558\uc5ec Pod\uac00 \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.</p> <p>Warning</p> <p>Secret \ub9ac\uc18c\uc2a4\uc758 \uae30\ubcf8 \uc800\uc7a5\uc740 etcd\uc5d0 \uc554\ud638\ud654\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\ub85c \uc800\uc7a5\ud55c\ub2e4. Secret \ub9ac\uc18c\uc2a4\ub97c \uc554\ud638\ud654\ud558\uc5ec \uc800\uc7a5\ud558\ub824\uba74 \uc800\uc7a5 \uc2dc \uc554\ud638\ud654(Encryption at rest)\ub97c \ud65c\uc131\ud654\ud558\uace0, Encryption Provider \ub97c \ud65c\uc6a9\ud574\uc11c \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uc554\ud638\ud654\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4.</p> <p>Secret\uc740 <code>data</code> \ud639\uc740 <code>stringData</code> \ud544\ub4dc\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. <code>data</code>\ub85c \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0, key/value \uc911 value\ub97c <code>base64</code>\ub85c \uc778\ucf54\ub529 \ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_1","title":"Secret \ud0c0\uc785","text":"Built-in Type Usage Opaque \uc784\uc758\uc774 \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ub370\uc774\ud130 kubernetes.io/service-account-token Service Account \ud1a0\ud070 kubernetes.io/dockercfg \uc9c1\ub82c\ud654\ub41c <code>./dockercfg</code> \ud30c\uc77c kubernetes.io/dockerconfigjson \uc9c1\ub82c\ud654\ub41c <code>./docker/config.json</code> \ud30c\uc77c kubernetes.io/basic-auth Basic Authentication \uc6a9 credential kubernetes.io/ssh-auth SSH Authentication \uc6a9 credential kubernetes.io/tls TLS \uc778\uc99d\uc11c \ud615\ud0dc\uc758 \ub370\uc774\ud130 bootstrap.kubernetes.io/token \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 \ud1a0\ud070 \ub370\uc774\ud130"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_2","title":"Secret \uc0ac\uc6a9 \uc608\uc2dc","text":"<p>Secret \uc740 \uc544\ub798\uc640 \uac19\uc740 \ud615\uc2dd\uc73c\ub85c \uc815\uc758\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: db-account\ntype: Opaque\ndata:\n  DB_ACCESS_ID: aGVsbG93b3JsZAo=\n  DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQK\n</code></pre> <p>Pod\uc5d0\uc11c \uc704\uc5d0 \uc815\uc758\ub41c Secret \uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud558\ub2e4. Secret\uc744 <code>envFrom</code> \uad6c\uc808\uc744 \uc774\uc6a9\ud574 Pod\uc758 \uc0dd\uc131 \uc2dc\uc810\uc5d0 Environment Variable\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <p></p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: secret-test-pod\nspec:\n  containers:\n    - name: test\n      image: k8s.gcr.io/busybox\n      command: [ \"/bin/sh\", \"-c\", \"env\" ]\n      envFrom:\n      - secretRef:\n          name: db-account\n  restartPolicy: Never\n</code></pre>"},{"location":"hello-kubernetes/section02/configmap-secret/#secret_3","title":"Secret \ubcf4\ud638","text":"<ul> <li>Kubernetes \uc5d0\uc11c\ub294 Secret\uc744 \ud544\uc694\ub85c\ud558\ub294 Pod\uac00 \uc788\ub294 Node\uc5d0\ub9cc Secret \uc815\ubcf4\uac00 \uc804\ub2ec\ub418\ub3c4\ub85d \uc124\uacc4\ub418\uc5b4\uc788\ub2e4.</li> <li>Kubelet\uc740 Secret\uc744 Node\uc758 <code>tmpfs</code>(\uac00\uc0c1\uba54\ubaa8\ub9ac \uacf5\uac04)\uc5d0 \uc800\uc7a5\ud558\uc5ec disk\uc5d0 \uc601\uad6c\uc801\uc73c\ub85c \uae30\ub85d\ub418\uc9c0 \uc54a\ub3c4\ub85d \ud55c\ub2e4.</li> <li>Pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 Container\uac00 \uc788\ub294 \uacbd\uc6b0, \uba85\uc2dc\uc801\uc73c\ub85c mount \ud558\ub294 container\uc5d0\uc11c\ub9cc secret\uc744 \uc870\ud68c\ud560 \uc218 \uc788\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/deployment-replicaset/","title":"2.4 Deployment &amp; ReplicaSet","text":"<p>Pod \ub9ac\uc18c\uc2a4\ub97c \uc9c1\uc811 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \ubc30\ud3ec\ub3c4 \uac00\ub2a5\ud558\uc9c0\ub9cc \ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec, \uad00\ub9ac\ub97c \ud558\uae30 \uc704\ud574\uc11c\ub294 Deployment, StatefulSet\uc640 \uac19\uc740 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc624\ube0c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud574\uc57c \ud55c\ub2e4. Deployments\uc5d0\ub294 container image, replica \uac1c\uc218, spec \ub4f1\ub4f1\uc774 desired state \uc791\uc131\ub418\uba70 controller\uac00 \ub9ac\uc18c\uc2a4\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \ubc30\ud3ec, \uc2a4\ucf00\uc974\ub9c1 \ud558\uba74\uc11c \uc2e4\uc81c \uc0c1\ud0dc\ub97c \uc120\uc5b8\ub41c \uc0c1\ud0dc\uc640 \ub3d9\uc77c\ud558\uac8c \ub9de\ucd98\ub2e4. \uc2e4\uc81c Pod\ub4e4\uc758 spec\uacfc \uc0c1\ud0dc\ub97c \ubaa8\ub2c8\ud130\ub9c1 \ud558\uace0 \uad00\ub9ac \ud558\ub294 \uc5ed\ud560\uc740 ReplicaSet\uc774 \ud558\uba70 \uc0ac\uc6a9\uc790\ub294 \uc9c1\uc811 ReplicaSet\uc744 \uad00\ub9ac \uc6b4\uc601 \ud560\uc77c\uc774 \uc5c6\uc73c\uba70 Deployment\ub97c \ud1b5\ud574 \uc81c\uc5b4\uac00 \ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/deployment-replicaset/#deployment","title":"Deployment","text":"<p>Deployment\ub97c \uc0dd\uc131\uc744 \ud558\uac70\ub098 \uc5c5\ub370\uc774\ud2b8\ub97c \ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\ub294 \ud574\ub2f9\ub418\ub294 \ub9ac\uc18c\uc2a4\uac00 \ud604\uc7ac \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778 \ud6c4 \uc9c0\uc815\ub41c \ubcf5\uc81c\ubcf8(replicas)\uacfc \uc2e4\uc81c \ubcf5\uc81c\ubcf8\uc744 \uc77c\uce58 \uc2dc\ud0a4\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud55c\ub2e4. Deployment\ub294 \uc9c1\uc811 \ubcf5\uc81c\ubcf8\uc744 \uad00\ub9ac\ud558\uc9c0 \uc54a\uc73c\uba70 \ub300\uc2e0 ReplicaSet\uc774 \ubcf5\uc81c\ubcf8\uc5d0 \ub300\ud55c \uad00\ub9ac\ub97c \uc218\ud589 \ud55c\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section02/deployment-replicaset/#replicaset","title":"ReplicaSet","text":"<p>ReplicaSet\uc740 \uc9c0\uc815\ub41c \uc218\uc758 Pod \uc5ec\ub7ec \uac1c\ub97c \ud56d\uc0c1 \uac00\uc6a9\ud558\uac8c \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc5ed\ud560\uc744 \ud558\uba70 Label\uc744 \ud1b5\ud574\uc11c \uad00\ub9ac\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 role=web\uc758 label\uc744 \uac00\uc9c0\uace0 \uc788\ub294 ReplicaSet\uc744 \uc0dd\uc131/\uc218\uc815/\uc0ad\uc81c\ud558\uba74 \ucee8\ud2b8\ub864\ub7ec\uac00 \uba3c\uc800 label\uc774 role=web\uc778 \ubaa8\ub4e0 Pod\ub97c \uac80\uc0c9\ud558\uace0 \ud574\ub2f9 Pod\uc758 ownerReference\uc758 \uc885\uc18d\uad00\uacc4\ub97c \ud655\uc778 \ud6c4 Pod\ub97c \uc81c\uc5b4\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/deployment-replicaset/#deployment-strategies","title":"Deployment Strategies","text":"<p>\uc0c8\ub85c\uc6b4 \ubc84\uc804\uc758 \ucee8\ud14c\uc774\ub108\uac00 \ubc30\ud3ec \ub420\ub54c Rolling\uc73c\ub85c \uc2e0\uaddc Pod\ub97c \ubc30\ud3ec, \uae30\uc874 Pod\ub97c \uc0ad\uc81c \ud558\ub294 \uc804\ub7b5 \uc774\ub2e4. <code>.spec.strategy.type</code> \uac12\uc73c\ub85c Recreate \ud639\uc740 RollingUpdate \ubc30\ud3ec \uc804\ub7b5\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc73c\uba70 \uae30\ubcf8\uc740 RollingUpdate\uc774\ub2e4.</p> <p>Recreate\ub294 \uc0c8 Pod\uac00 \uc0dd\uc131\ub418\uae30 \uc804 \uc774\uc804 \ubc84\uc804\uc758 \ubaa8\ub4e0 Pod\ub97c \uc0ad\uc81c\ud558\ub294 \ubc29\uc2dd\uc774\uba70 RollingUpdate\ub294 \uc21c\ucc28\uc801\uc73c\ub85c \uc624\ub798\ub41c Pod\ub97c \uc0ad\uc81c\ud558\uace0 \uc0c8 Pod\ub294 \uc0dd\uc131\uc744 \ubc18\ubcf5\ud558\uc5ec \ubc30\ud3ec\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. RollingUpdate\uc758 \uacbd\uc6b0\ub294 Max Unavailable\uacfc MaxSurge \uac12\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.</p> <ul> <li>maxSurge: ReplicaSet\uc758 Desired \uac12\ubcf4\ub2e4 N\uac1c \ud639\uc740 N%\ub9cc\ud07c \ub354 \uc0dd\uc131\ud558\uc5ec Rollout \uac00\ub2a5\ud55c \ubc94\uc704\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%)</li> <li>maxUnavailable: \uc774\uc804 \ubc84\uc804 Pod \uc0ad\uc81c \uc2dc \ucd5c\uc18c \uc720\uc9c0\ud574\uc57c \ud560 \uac1c\uc218 \ud639\uc740 \ube44\uc728\uc758 \uc124\uc815\uac12 (\uae30\ubcf8\uac12 25%)</li> </ul> <p>\uc608\uc2dc1. desired=3 maxSurge=1 maxUnavailable=0 \uc778 \uacbd\uc6b0  \uc608\uc2dc2. desired=3 maxSurge=1 maxUnavailable=1 \uc778 \uacbd\uc6b0 </p>"},{"location":"hello-kubernetes/section02/pod-namespce/","title":"2.1 Pod &amp; Namespace","text":""},{"location":"hello-kubernetes/section02/pod-namespce/#pod","title":"Pod","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub294 \ub3c5\ub9bd\uc801\uc73c\ub85c \uad00\ub9ac \ub418\uc9c0 \uc54a\uc73c\uba70 Pod\ub77c\ub294 \ud558\ub098\uc758 \ub9ac\uc18c\uc2a4\ub85c \uad00\ub9ac \ub41c\ub2e4. Pod\ub294 \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc73c\uba70 IP \uc8fc\uc18c, \uc2a4\ud1a0\ub9ac\uc9c0 \uadf8\ub9ac\uace0 \ub9ac\ub205\uc2a4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uacf5\uc720\ud55c\ub2e4. \ucee8\ud14c\uc774\ub108\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2cc Pod\uac00 \ud544\uc694\ud55c \uc774\uc720\ub294 \ucee8\ud14c\uc774\ub108\uac00 \ud558\ub098\uc758 main process\ub9cc \ub744\uc6b0\ub3c4\ub85d \uc124\uacc4\uac00 \ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 multi processes\ub85c \uc6b4\uc601\ud574\uc57c \ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac19\uc740 \uacbd\uc6b0\ub294 \uac01\uac01 \ud504\ub85c\uc138\uc2a4\ubcc4\ub85c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uace0 \uadf8 \ucee8\ud14c\uc774\ub108\ub4e4\uc758 \ubb36\uc74c \uc790\uccb4\ub97c \ud558\ub098\uc758 \uadf8\ub8f9\uc73c\ub85c \uad00\ub9ac\ud574\uc57c \ud55c\ub2e4. \ub610\ud55c \uc704\uc5d0\uc11c \uc5b8\uae09\ud55c \uac83\ucc98\ub7fc \ub124\ud2b8\uc6cc\ud06c, \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uacfc \uac19\uc740 \ub0b4\ubd80 \ub9ac\uc18c\uc2a4\ub4e4\uc774 \uacf5\uc720\ub418\uae30 \ub584\ubb38\uc5d0 \ubcf4\uc548\uacfc \uc131\ub2a5\uc5d0 \ub300\ud55c \uc774\ub4dd\ub3c4 \uac16\ub294\ub2e4.</p> <p></p> <p>Info</p> <p>\uae30\ubcf8\uc73c\ub85c\ub294 \ucee8\ud14c\uc774\ub108\ub4e4\ub07c\ub9ac\ub294 PID \uc811\uadfc\uc774 \uc548 \ub418\uc9c0\ub9cc \ucd94\uac00\ub85c Pod \uc2a4\ud399\uc5d0 <code>shareProcessNamespace</code> \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e4\ub978 \ucee8\ud14c\uc774\ub108\uc758 PID\ub3c4 \uc811\uadfc\ud560 \uc218 \uc788\ub2e4. https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/</p> <p>\ud30c\ub4dc\uc758 lifecycle\uc740 Pending, Running, Succeed, Failed, Unknown, CrashLoopBackOff\ub85c \ubd84\ub958 \ub41c\ub2e4.</p> Lifecycle Description Pending \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c Pod\uc758 \uc0dd\uc131\uc774 \ud5c8\ub77d\ub418\uc5c8\uc9c0\ub9cc \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uc9c0 \uc54a\uc558\ub2e4\ub294 \uc0c1\ud0dc\uc774\uba70 Schedule \ub418\ub294 \uc2dc\uac04\uacfc \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \uc2dc\uac04 \uc911\uc5d0\ub3c4 Pending Running Pod\uac00 \uc6cc\ucee4\ub178\ub4dc\uc5d0 \ubc14\uc778\ub529\ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc0dd\uc131\ub41c \uc0c1\ud0dc Succeed Pod\uc758 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc\uc640 Job\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc885\ub8cc\ub41c \uc0c1\ud0dc Failed \ud558\ub098 \uc774\uc0c1\uc758 \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud328\ud558\uc5ec \uc885\ub8cc \ub418\uc5c8\uc73c\uba70 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c \uc0c1\ud0dc Unknown \uc5b4\ub5a4 \uc774\uc720\ub85c \ucee8\ud14c\uc774\ub108 \uc0c1\ud0dc\uac00 \ud655\uc778\ub418\uc9c0 \uc54a\uace0 \ub178\ub4dc\uc5d0\uc11c Pod\uc758 \uc0c1\ud0dc \ud655\uc778\uc744 \uc704\ud55c \uc811\uc18d\uc774 \ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc CrashLoopBackOff \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \uc9c0\uc18d\ud574\uc11c \uc2e4\ud328\ud558\uace0 \uc788\uc73c\uba70 \uc77c\ubc18\uc801\uc73c\ub85c \uc774\ubbf8\uc9c0\uc758 \ubb38\uc81c\uac00 \uc788\uac70\ub098 \ud658\uacbd \ubcc0\uc218 \uc124\uc815 \ub4f1\uc758 \uc774\uc288\ub85c \ucee8\ud14c\uc774\ub108\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc2dc\uc791\ub418\uc9c0 \uc54a\ub294 \uc0c1\ud0dc <pre><code>$ kubectl run tmp-nginx --image nginx --port=80\n\n$ kubectl port-forward pod/tmp-nginx 8000:80\n\n$ curl 127.0.0.1:8000 \n</code></pre>"},{"location":"hello-kubernetes/section02/pod-namespce/#namespace","title":"Namespace","text":"<p>\ud558\ub098\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc5d0 \ud558\ub098\uc758 \uc11c\ube44\uc2a4 \ud639\uc740 \ud558\ub098\uc758 \ud300\uc774 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ubcf4\ub2e4\ub294 \uba40\ud2f0 \ud14c\ub10c\ud2b8 \ud558\uac8c(\uc5ec\ub7ec \uc11c\ube44\uc2a4\uac00 \ud63c\uc7ac\ub418\uc5b4) \ub2e4\uc591\ud55c \ud300 \ud639\uc740 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ub9ac\uc18c\uc2a4\ub97c \uacf5\uc720\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\ub840\uac00 \ub9e4\uc6b0 \uc77c\ubc18\uc801\uc774\ub2e4. \uc11c\ube44\uc2a4 \ud639\uc740 \ud300 \uac04\uc5d0 \ub3c5\ub9bd\ub41c \uacf5\uac04\uc744 \ud560\ub2f9\ud560 \ud544\uc694\uac00 \uc788\uc73c\uba70 \uc774\ub54c Namespace\ub97c \ud1b5\ud574\uc11c \uc11c\ube44\uc2a4\ubcc4 \ub9ac\uc18c\uc2a4\ub97c \ub17c\ub9ac\uc801\uc73c\ub85c \ub098\ub204\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \uc2e4\uc81c Pod\uac00 \uc0dd\uc131\ub418\ub294 Worker node\ub294 \uacf5\uc720\uac00 \ub418\ub294 \uc601\uc5ed\uc774\uae30 \ub54c\ubb38\uc5d0 self-service \ub41c \ud615\ud0dc\ub85c \ub9ac\uc18c\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ub97c \ud55c\ub2e4\uace0 \ud558\uba74 \uac01 namespace \ubcc4\ub85c quota\ub97c \ubd80\uc5ec\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \ub9ac\uc18c\uc2a4\ub97c soft/hard limit\uc73c\ub85c \uad00\ub9ac \ud558\uace0 \uc0ac\uc6a9\uc790 \uc811\uadfc\uc5d0 \ub300\ud574 RBAC(Role Based Access Controller)\ub85c \uad00\ub9ac\ud558\ub294 \uac83\uc774 \ucd94\ud6c4 \ub9ac\uc18c\uc2a4 \uad00\ub9ac\uc758 \uce21\uba74\uc5d0\uc11c\ubcf4\ub2e4 \ud6a8\uacfc\uc801\uc774\ub2e4. \ub610\ud55c namespace\uc5d0\ub3c4 label\uc774 \uac00\ub2a5\ud558\ubbc0\ub85c label\uc744 \ud1b5\ud574 \uadf8\ub8f9\ud654 \uac00\ub2a5\ud558\ub2e4.</p> <p></p> <pre><code>$ kubectl create namespace demo\nnamespace/demo created\n\n$ cat &lt;&lt;EOF &gt; compute-resources.yaml\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: compute-resources\nspec:\n  hard:\n    requests.cpu: \"1\"\n    requests.memory: 1Gi\n    limits.cpu: \"2\"\n    limits.memory: 2Gi\nEOF\n\n$ kubectl create -f ./compute-resources.yaml --namespace=demo\n\n$ kubectl get quota --namespace=demo\nNAME                AGE   REQUEST                                     LIMIT\ncompute-resources   35s   requests.cpu: 0/1, requests.memory: 0/1Gi   limits.cpu: 0/2, limits.memory: 0/2Gi\n\n$  kubectl label namespace demo env=dev\nnamespace/test labeled\n\n$ kubectl get namespace -l env=dev\nNAME   STATUS   AGE\ndemo   Active   12m\n</code></pre>"},{"location":"hello-kubernetes/section02/pod-requests-limits/","title":"2.2 Resources &amp; QoS","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\uc790 application\uc758 Pod\uc744 \uc815\uc758\ud560\ub54c, container\uac00 \uc0ac\uc6a9\ud558\ub294 resource \uc591\uc744 \uc9c0\uc815\ud560\uc218 \uc788\ub2e4. \ub300\ud45c\uc801\uc778 \uc0ac\uc804 \uc815\uc758\ub41c resource\ub294 cpu, memory\uac00 \uc788\ub2e4. \uadf8\ub9ac\uace0 \uc774 resource\ub294 pod(\ud639\uc740 container)\uc5d0 \uc758\ud574 \uc694\uccad/\ud560\ub2f9/\uc18c\ube44\uac00 \uac00\ub2a5\ud558\ub2e4.</p> <p>\uc9c0\uc815\ud560\uc218 \uc788\ub294 resource\ub294 type\uc744 \uac00\uc9c0\uace0 type name(e.g cpu, memory)\uc744 \uac00\uc9c0\uace0 \uad6c\ubd84\ud560\uc218 \uc788\ub2e4. \uc5ec\uae30\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc0ac\uc804\uc5d0 \uc815\uc758\ub41c compute resource\uc778 cpu, memory\ub97c \ub2e4\ub8ec\ub2e4. resource type\uc5d0\ub294 \uce21\uc815 \uac00\ub2a5\ud55c \uc218\ub7c9 \ubc0f \ub2e8\uc704\uac00 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#resources-specifications","title":"Resources specifications","text":""},{"location":"hello-kubernetes/section02/pod-requests-limits/#kubernetes-resources","title":"kubernetes\uc5d0\uc11c \uc0ac\uc804 \uc815\uc758\ub41c resources","text":"<pre><code>spec.containers[].resources.limits.cpu\nspec.containers[].resources.limits.memory\nspec.containers[].resources.requests.cpu\nspec.containers[].resources.requests.memory\n</code></pre> <p>Info</p> <p>\uc774 \uc678\uc5d0\ub3c4 \uc0ac\uc804 \uc815\uc758\ub41c resources\ub294 ephemeral-storage , hugepages-<code>&lt;hugepagesize</code>&gt; \uc774 \uc788\ub2e4.</p> <p>pod\uc5d0\uc11c container\uac00 \ud544\uc694\ud55c resource\ub97c requests\uc5d0 \uba85\uc2dc\ud558\uba74 \uc9c0\uc815\ub41c \ub9ac\uc18c\uc2a4\ub97c \uac00\uc9c0\uace0 kube-scheduler\uac00 pod\uac00 \uc2e4\ud589\ub420 \ub178\ub4dc\ub97c \uc120\ud0dd\ud55c\ub2e4. \uadf8\ub9ac\uace0 container\uac00 \ud544\uc694\ud55c resource\ub97c limits\uc5d0 \uba85\uc2dc\ud558\uba74 kubelet\uc740 \uc2e4\ud589\uc911\uc778 container\uac00 \uba85\uc2dc\ud55c resource\ub97c \ub118\uc5b4\uc124\uc218 \uc5c6\ub3c4\ub85d \uc81c\ud55c\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-container-resource","title":"Pod\ub294 \uac01 container\uc5d0 \uc704 resource\ub97c \ud558\ub098 \uc774\uc0c1 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.","text":"<pre><code>apiVersion: v1\nkind: Pod\nmeatadata:\n  name: hello-world\nspec:\n  containers:\n  - name: my-container\n    image: busybox\n    resources:\n      requests:\n        cpu: \"500m\"\n        memory: \"500Mi\"\n      limits:\n        cpu: \"1\"\n        memory: \"1Gi\"\n</code></pre>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#requests","title":"Requests","text":"<ul> <li>Pod\uc758 container\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ucd5c\uc18c resource\uc758 \uc591 - \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900\uc774 \ub41c\ub2e4.</li> <li>Pod\uc774 \uc694\uccad\ud55c resource\uc758 \ucd5c\uc18c \uc218\ub7c9 \ub610\ub294 \uc694\uccad\ub418\uc5b4 \ud560\ub2f9\ud560 \ub9ac\uc18c\uc2a4\uc758 \uc218\ub7c9.</li> <li>scheduler \uc54c\uace0\ub9ac\uc998\uc774 \uc774 \uc218\ub7c9\uc744 \uc0ac\uc6a9\ud558\uc5ec \u201cfeasibility\u201d \ub97c \ud655\uc778\ud568(pod\uc774 \ub178\ub4dc\uc5d0 \uc801\ud569\ud55c\uc9c0 \uc544\ub2cc\uc9c0-\uc2a4\ucf00\uc904\ub9c1\uc758 \uae30\uc900)</li> <li>\ub9cc\uc57d \ucee8\ud14c\uc774\ub108\uac00 \uc694\uccad\ud55c resource\ubcf4\ub2e4 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud55c\ub2e4\uba74, \uadf8 \ud504\ub85c\uadf8\ub7a8\uc758 \uc2e4\ud589\uc740 compressble resource type\uc774\uba74 throttling\ub418\uace0, incompressble\uc774\uba74 \ud560\ub2f9 \uc2dc\ub3c4\ub294 \uac70\ubd80\ub420 \uac83\uc774\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#limits","title":"Limits","text":"<ul> <li>Pod\uc758 container\uc5d0\uc11c \uc0ac\uc6a9\uac00\ub2a5\ud55c \ucd5c\ub300 resource\uc758 \ub7c9</li> <li>\uc774 \uac12\ubcf4\ub2e4 \ub354 \ub9ce\uc740 resource\ub97c \uc0ac\uc6a9\ud558\uac8c \ub418\uba74 \uc885\ub8cc(\ud639\uc740 \uba48\ucd98\ub2e4)\ub41c\ub2e4.</li> <li>\uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4.</li> <li>limit\uc758 \uae30\ubcf8\uc740 unbounded\uc774\ub2e4. \uc774\uac83\uc740 \ud3ec\ud568\ub41c container, pod, node\uc758 \uc6a9\ub7c9\uc744 \uc758\ubbf8\ud55c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-qos","title":"Pod QoS","text":"<p>Pod\uc740 \uc0dd\uc131\ud560\ub54c resource\uc758 \uba85\uc138\uc5d0 \ub530\ub77c 3\uac00\uc9c0 QoS(Quality of Service) class\ub97c \uac00\uc9c4\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#best-effort","title":"Best-Effort","text":"<ul> <li>Lowest priority</li> <li>resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0.</li> <li>\ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud55c \uacbd\uc6b0 \uc81c\uc77c \uba3c\uc800 \uc8fd\uc74c lowest priority, \uc774 container\ub294 \ub178\ub4dc\uc758 \uc5ec\uc720\uba54\ubaa8\ub9ac \ub9cc \uc0ac\uc6a9\ud560\uc218 \uc788\uc74c</li> </ul>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#burstable","title":"Burstable","text":"<ul> <li>Middle priority</li> <li>resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc740\uacbd\uc6b0.</li> <li>limit\ub97c \uc9c0\uc815\uc548\ud558\uba74 node capacity\uac00 \uc9c0\uc815\ub428.</li> </ul>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#guaranteed","title":"Guaranteed","text":"<ul> <li>Highest priority</li> <li>resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0.</li> <li>\ub178\ub4dc\uc758 resource\uac00 \ubd80\uc871\ud560 \uacbd\uc6b0, guaranteed pod\uc774 \uc790\uc2e0\uc758 resource limits\ub97c \ub118\uc9c0 \uc54a\uc744\uacbd\uc6b0, \ub2e4\ub978 priority\ub97c \uac00\uc9c4 qos\uc758 pod\uc744 \uba3c\uc800 \uc885\ub8cc\ud558\uc5ec pod qos\ub97c \ubcf4\uc7a5\ud55c\ub2e4.</li> </ul> <p>Pod\uc5d0 cpu limits\uac00 \uc815\uc758\ub418\uc5b4 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74 throttle\ub41c\ub2e4. Pod\uc5d0 memory limits\uac00 \uc788\uace0 \uc774\ub97c \ucd08\uacfc\ud558\ub824\uace0 \ud558\uba74, \ub2e4\ub978 Pod\uc5d0 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 OOMkilled\ub420 \uc218 \uc788\ub2e4. \uc804\uccb4 Pod\uc774 \uc544\ub2c8\ub77c \uac00\uc7a5 \ub9ce\uc740 memory\ub97c \uc0ac\uc6a9\ud558\ub294 container\uac00 \uc885\ub8cc\ub41c\ub2e4.(Linux \uc2dc\uc2a4\ud15c\uc758 OOM killer\uac00 \ub3d9\uc791\ud558\uace0, \ud6c4\ubcf4\uc758 \uc21c\uc11c\ub97c \uacb0\uc815\ud558\ub294 OOM score \uacc4\uc0b0\uc744 \ud55c\ub2e4.) \uc21c\uc11c\ub294 Best-effort\uc778 pod\uc744 \uba3c\uc800 \uc8fd\uc778 \ub2e4\uc74c Burstable, Guaranteed \uc21c\uc73c\ub85c \uc8fd\uc778\ub2e4. \uc774\ub7f0 \ucf00\uc774\uc2a4\ub294 memory limits\ub97c \ucd08\uacfc\ud558\uac70\ub098 \ub178\ub4dc\uac00 \uacfc\ub3c4\ud55c \uba54\ubaa8\ub9ac \uc555\ub825\uc744 \ubc1b\uace0 \uc788\ub294 \uacbd\uc6b0\uc5d0 \ub3d9\uc791\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/pod-requests-limits/#pod-qos_1","title":"Pod \uc0dd\uc131\ud558\uace0 QoS \ud655\uc778\ud558\uae30","text":"<ul> <li>pod yaml</li> </ul> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: qos-demo\n  namespace: qos-example\nspec:\n  containers:\n  - name: qos-demo-ctr\n    image: nginx\n    resources:\n      limits:\n        memory: \"200Mi\"\n        cpu: \"700m\"\n      requests:\n        memory: \"200Mi\"\n        cpu: \"700m\"\n</code></pre> <ul> <li>pod status \ud655\uc778</li> </ul> <pre><code>kubectl get pod qos-demo --namespace=qos-example --output=yaml\n...\nspec:\n  containers:\n    ...\n    resources:\n      limits:\n        cpu: 700m\n        memory: 200Mi\n      requests:\n        cpu: 700m\n        memory: 200Mi\n    ...\nstatus:\n  qosClass: Guaranteed\n</code></pre> <p>Info</p> <p>\uc704\uc758 yaml\uc744 \uac00\uc9c0\uace0 limits\ub97c \uc81c\uac70\ud558\uac70\ub098, requests\ub97c limits\ubcf4\ub2e4 \uc791\uac8c \uc218\uc815\ud558\uba74 status.qosClass: Bustable\uc774 \ub41c\ub2e4. \uadf8\ub9ac\uace0 limits\uc640 requests\ub97c \ubaa8\ub450 \uc81c\uac70\ud558\uba74  status.qosClass: BestEffort\uac00 \ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/","title":"Liveness, Readiness and Startup Probes","text":""},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#liveness","title":"Liveness","text":"<p>kubelet\uc740 liveness probes\ub97c \ucee8\ud14c\uc774\ub108\uc758 \uc7ac\uc2dc\uc791\ud560 \uc2dc\uc810(application\uc758 deadlock\ub4f1)\uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4. application\uc774 \uc2e4\ud589\uc911\uc774\uc9c0\ub9cc \uc9c4\ud589 \ubd88\uac00\ub2a5 \ud560\ub54c, \ucee8\ud14c\uc774\ub108\ub97c \uc7ac\uc2dc\uc791 \ud558\ub294\uac83\uc73c\ub85c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uac00\uc6a9\uc131\uc744 \ub192\ud790\uc218 \uc788\ub2e4. kubelet\uc740 liveness probe handler\ub97c \uc774\uc6a9\ud558\uc5ec \uc8fc\uae30\uc801\uc73c\ub85c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uba70, \uc2e4\ud328\ud560 \uacbd\uc6b0 pod\ub97c \uc885\ub8cc\ud55c\ub2e4(SIGTERM). liveness probe\ub294 application\uc774 \uc798\ubabb\ub41c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uace0 \ubcf5\uc6d0\ud55c\ub2e4. </p> <p>liveness example</p> <pre><code># ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\napiVersion: v1\nkind: Pod\nmetadata:\n  labels:\n    test: liveness\n  name: liveness-http\nspec:\n  containers:\n  - name: liveness\n    image: k8s.gcr.io/liveness\n    args:\n    - /server\n    livenessProbe:\n      httpGet:\n        path: /healthz\n        port: 8080\n        httpHeaders:\n        - name: Custom-Header\n          value: Awesome\n      initialDelaySeconds: 3\n      periodSeconds: 3\n</code></pre> <p>Info</p> <p>\uc704 yaml\uc740 \ub2e8\ub3c5 \ucee8\ud14c\uc774\ub108\ub97c \uac16\ub294 pod\uc5d0\uc11c livenessProbe\ub97c \uc124\uc815\ud55c \ub0b4\uc6a9 periodSeconds\ub294 kubelet\uc774 \ub9e4 3\ucd08\ub9c8\ub2e4 liveness probe\uac00 \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc815\uc758\ud55c\ub2e4. initialDelaySeconds\ub294 kubelet\uc774 \uccab probe \uc2e4\ud589\uc804\uc5d0 \ub300\uae30\ud558\uae30 \uc704\ud55c \uc2dc\uac04(\ub2e8\uc704: sec)\uc744 \uba85\uc2dc\ud55c\ub2e4. kubelet\uc774 probe\ub97c \uc2e4\ud589\ud558\uba74, kubelet\uc740 http handler\ub97c \uc0ac\uc6a9\ud558\uc5ec GET request\ub97c \uc11c\ubc84\ub85c \ubcf4\ub0b4\uace0, \uc9c0\uc815\ud55c path\ub97c \ud1b5\ud574 success\uac00 \ub3cc\uc544\uc624\uba74 healthy. failure\uac00 \ub3cc\uc544\uc624\uba74 \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud558\uace0 \uc7ac\uc2dc\uc791\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#readiness","title":"Readiness","text":"<p>kubelet\uc740 readiness probe\uc73c\ub85c \ucee8\ud14c\uc774\ub108\uac00 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744\uc218 \uc788\ub294 \uc900\ube44\uac00 \ub41c \uc2dc\uc810\uc744 \ud655\uc778\ud55c\ub2e4. pod\uc740 \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \uc900\ube44\ub418\uba74 \ud2b8\ub798\ud53d\uc744 \ubc1b\uc744 \uc900\ube44\uac00 \ub41c\uac83\uc73c\ub85c \uc0dd\uac01\ud55c\ub2e4. \uc774 \uc2e0\ud638\uc758 \uc6a9\ub3c4\ub294 \uc5b4\ub5a4 pod\uc774 \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc\ub85c \uc0ac\uc6a9\ub420\uc9c0 \uc81c\uc5b4\ud558\ub294\uac83\uc774\ub2e4. pod\uc774 \uc900\ube44\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc73c\uba74 service loadbalancer\uc5d0\uc11c \uc81c\uac70\ud55c\ub2e4.(endpoint \uc81c\uac70) readiness probe\ub294 pod\uc758 \uc804\uccb4 life cycle\ub3d9\uc548 \uc2e4\ud589\ub41c\ub2e4. \uc774\uac83\uc740 readiness probe\uac00 pod\uac00 \uc2e4\ud589\ub418\ub294 \ub3d9\uc548 \ubc18\ubcf5\uc801\uc73c\ub85c \uc2e4\ud589\ub418\ub294\uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774 \ud2b9\uc9d5\uc73c\ub85c application\uc774 \uc77c\uc2dc\uc801\uc73c\ub85c \ud2b8\ub798\ud53d\uc744 \ubc1b\uc9c0 \ubabb\ud558\ub294 \uc0c1\ud669\uc758 \ucc98\ub9ac\ub3c4 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. \uc774\ub7ec\ud55c \uacbd\uc6b0 application\uc744 \uc885\ub8cc\ud558\ub294\uac83\uc774 \uc544\ub2c8\uace0, \ubcf5\uad6c(\uc870\uac74\uc774 \ub9cc\uc871\ub420\ub54c)\ub420\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0\ub2e4. </p> <p>readiness example</p> <pre><code># ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\napiVersion: v1\nkind: Pod\nmetadata:\n  name: goproxy\n  labels:\n    app: goproxy\nspec:\n  containers:\n  - name: goproxy\n    image: k8s.gcr.io/goproxy:0.1\n    ports:\n    - containerPort: 8080\n    readinessProbe:\n      tcpSocket:\n        port: 8080\n      initialDelaySeconds: 5\n      periodSeconds: 10\n    livenessProbe:\n      tcpSocket:\n        port: 8080\n      initialDelaySeconds: 15\n      periodSeconds: 20\n</code></pre> <p>Info</p> <p>kubelet\uc740 readinessProbe.initialDelaySeconds\uc5d0 \uba85\uc2dc\ub41c 5\ucd08 \ub4a4\uc5d0 \uccab\ubc88\uc9f8 readiness\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4. probe\uac00 \uc131\uacf5\ud558\uba74 pod\uc774 ready\ub41c \uac83\uc73c\ub85c status\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4. kubelet\uc740 periodSeconds\uc5d0 \uba85\uc2dc\ub41c 10\ucd08 \ub9c8\ub2e4 \uac80\uc0ac\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4. livenessProbe\ub3c4 \uba85\uc2dc\ub41c \ub0b4\uc6a9\ub300\ub85c \uc9c4\ud589\ub429\ub2c8\ub2e4.</p>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#startup","title":"Startup","text":"<p>kubelet\uc740 startup probe\ub97c \ucee8\ud14c\uc774\ub108 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2dc\uc791\ub41c \uc2dc\uc810\uc744 \uc54c\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4. \ub9cc\uc57d \uc774 probe\uac00 \uc124\uc815\ub418\uc5b4\uc788\uace0, \uadf8\uac83\uc758 liveness, readiness \uac00 startup probe\uac00 \uc131\uacf5\ud560\ub54c\uae4c\uc9c0 disable \uc774\ub77c\uba74, \uc774 \ub450 probe\uac00 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791\uc2dc \uac04\uc12d\ud558\uc9c0 \uc54a\ub294\uac83\uc744 \ud655\uc778\ud55c\ub2e4. \uc774\uac83\uc740 \ucee8\ud14c\uc774\ub108 \uc2dc\uc791\uc774 \ub290\ub824\uc11c kubelet\uc5d0 \uc758\ud574 \uc62c\ub77c\uc624\uace0 \uc2e4\ud589\ub418\uae30\uc804\uc5d0 \uc8fd\ub294\uac83\uc744 \ud53c\ud558\uae30 \uc704\ud574  liveness check \uc801\uc6a9\uc2dc \uc0ac\uc6a9\ub41c\ub2e4. startup probe\ub294 \uc2dc\uc791\uc774 \ub290\ub9b0 \ucee8\ud14c\uc774\ub108 \ub610\ub294 \uc608\uce21\ud560\uc218 \uc5c6\ub294 \ucd08\uae30\ud654 \ud504\ub85c\uc138\uc2a4\uac00 \uc788\ub294 application\uc5d0 \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\ub2e4. <code>failureThreshold * periodSeconds</code> \ub9cc\ud07c liveness/readiness probe\ub97c \uae30\ub2e4\ub838\ub2e4\uac00 startup probe\uac00 \uc131\uacf5\ud558\uba74 \uc774\ud6c4\uc5d0 \uc2e4\ud589\ub41c\ub2e4. </p> <p>startup example</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  labels:\n    test: startup\n  name: startup-probe-test\nspec:\n  containers:\n  - name: liveness\n    image: k8s.gcr.io/liveness\n    args:\n    - /server\n    startupProbe:\n      httpGet:\n        path: /healthz\n        port: liveness-port\n      failureThreshold: 30\n      periodSeconds: 10\n    livenessProbe:\n      httpGet:\n        path: /healthz\n        port: liveness-port\n      failureThreshold: 1\n      periodSeconds: 10\n</code></pre> <p>Info</p> <p>startupProbe\uc5d0 \uba85\uc2dc\ub418\uc5b4 \uc788\ub294 failureThreshold * periodSeconds(300\ucd08) \ucd5c\ub300 \uc2dc\uac04\uae4c\uc9c0 application\uc774 \uc2dc\uc791\ub420 \uc2dc\uac04\uc744 \ud655\ubcf4\ud560\uc218 \uc788\ub2e4. startupProbe\uac00 \uc131\uacf5\ud558\uba74, livenessProbe\uac00 \ubc14\ub85c \ub3d9\uc791\ud558\uc5ec deadlock\uc0c1\ud0dc\ub97c \ud655\uc778\ud55c\ub2e4. startupProbe\uac00 \uc8fc\uc5b4\uc9c4 \ucd5c\ub300 \uc2dc\uac04\ub3d9\uc548 \uc131\uacf5\ud558\uc9c0 \ubabb\ud558\uba74 \ucee8\ud14c\uc774\ub108\ub294 \uc885\ub8cc\ub418\uace0, restartPolicy\uc5d0 \ub9de\uac8c \ub3d9\uc791\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#podspec-probe","title":"PodSpec\uc5d0 \ud3ec\ud568\ub418\uc5b4 \uc788\ub294 Probe","text":"<pre><code>spec.containers[].livenessProbe\nspec.containers[].readinessProbe\nspec.containers[].startupProbe\n</code></pre>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#probe-handler-type","title":"Probe handler type","text":"<ul> <li>api document reference</li> </ul> <p>\uc704\uc5d0\uc11c \uc774\uc57c\uae30\ud55c probe\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c kubelet\uc5d0 \uc758\ud574 \uc8fc\uae30\uc801\uc73c\ub85c \uc218\ud589\ub418\ub294 \uc9c4\ub2e8\uc774\ub2e4. \uc774 \uc9c4\ub2e8\uc744 \uc218\ud589\ud558\uae30 \uc704\ud574\uc11c \uac01 \uc0c1\ud669\uc5d0 \ub9de\ucdb0 \uc544\ub798\uc758 handler\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc544\ub798\uc758 \uac01 \ud578\ub4e4\ub7ec\uc5d0\uc11c \ud544\uc694\ud55c \uc124\uc815\uc740 \uc704 api doc\uc5d0\uc11c \ucc38\uace0 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#exec-execaction","title":"exec - ExecAction","text":"<ul> <li>\uc9c0\uc815\ud55c \ucee4\ub9e8\ub4dc\ub97c \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c \uc2e4\ud589\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568. \ucee8\ud14c\uc774\ub108 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc758 root(\u201c/\u201d)\uc5d0\uc11c \uc2e4\ud589\ud568</li> <li>exit 0\uc774\uba74 healthy no-zero\uba74 unhealthy</li> </ul>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#tcp-tcpsocketaction","title":"tcp - TCPSocketAction","text":"<ul> <li>\uc9c0\uc815\ud55c tcp socket \ud3ec\ud2b8\ub97c \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc5f4\ub824\uace0 \uc2dc\ub3c4\ud558\uc5ec \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568.</li> <li>\ucee4\ub125\uc158\uc774 \uc0dd\uc131\ub418\uba74 healty, \uc2e4\ud328\ud558\uba74 unhealthy</li> </ul>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#httpget-httpgetaction","title":"httpget - HTTPGetAction","text":"<ul> <li>\uc9c0\uc815\ud55c \ud3ec\ud2b8, \ud638\uc2a4\ud2b8\uc640 path\ub97c \uac00\uc9c0\uace0 http get \uc2e4\ud589\uc744 \ud1b5\ud574 \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568.</li> <li>\uc751\ub2f5\uc758 status code\uac00 200\ud06c\uace0 400\ubbf8\ub9cc\uc774\uba74 healthy, \uadf8\uc678\ub294 unhealthy</li> </ul>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#grpc-grpcaction","title":"grpc - GRPCAction","text":"<ul> <li>alpha feature on v1.23 - feature gate\uc5d0\uc11c GRPC\ucee8\ud14c\uc774\ub108Probe enable\ud574\uc57c \ud568</li> <li>\uc9c0\uc815\ud55c \ud3ec\ud2b8, \uc11c\ube44\uc2a4 \uc774\ub984\uc744 \uac00\uc9c0\uace0 rpc check \uc694\uccad\uc744 \ubcf4\ub0b4\uc11c \uc0c1\ud0dc\ub97c \ud310\ub2e8\ud568</li> <li>\uc751\ub2f5\uc774 SERVING(OK)\uc774\uba74 healthy, \uadf8 \uc678\ub294 unhealthy</li> </ul>"},{"location":"hello-kubernetes/section02/readiness-liveness-probe/#configure-probes","title":"Configure Probes","text":"<p>probe\ub294 liveness/readiness\uc758 \ud655\uc778 \ub3d9\uc791\uc744 \ubcf4\ub2e4 \uc815\ud655\ud558\uac8c \uc81c\uc5b4\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud560\uc218 \uc788\ub294 \uc5ec\ub7ec \ud544\ub4dc\uac00 \uc788\ub2e4.</p> <ul> <li>initialDelaySeconds: probe\ub97c \uc2dc\uc791\ud558\uae30 \uc804\uc5d0 \ucee8\ud14c\uc774\ub108\uac00 \uc2dc\uc791\ud560\ub54c \ud544\uc694\ud55c \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 0</li> <li>periodSeconds: probe\ub97c \uc2e4\ud589\ud558\ub294 \ube48\ub3c4\uc758 \uae30\uac04 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 10\ucd08, min 1\ucd08</li> <li>timeoutSeconds: probe\ub97c \uc2e4\ud589\ud55c \ud6c4\uc5d0 timeout \ub418\ub294 \uc2dc\uac04(\ucd08)\uc774\ub2e4. default 1\ucd08, min 1\ucd08</li> <li>successThreshold: probe\uac00 \uc2e4\ud328\ud55c \ud6c4\uc5d0 \uc131\uacf5\ud55c\uac83\uc73c\ub85c \uac04\uc8fc\ud558\ub294 \ucd5c\uc18c\uc758 \uc5f0\uc18d\ub41c \uc131\uacf5\uc758 \uc218. default 1, min 1</li> <li>failureThreshold: probe\uac00 \uc2e4\ud328\ud558\uba74 kubernete\uac00 \uc774 \ud68c\uc218\ub9cc\ud07c \uc2dc\ub3c4\ud55c \ud6c4\uc5d0 \ud3ec\uae30\ud568. livenessprobe\uc758 \uacbd\uc6b0, conatiner\ub97c \uc7ac\uc2dc\uc791\ud558\ub294\uac83\uc744 \uc758\ubbf8\ud558\uace0, readiness probe\uc758 \uacbd\uc6b0 Unready\ub85c \ud45c\uae30\ud568. default 3, min 1</li> </ul> <p>\uc704 probe \ub294 \uc544\ub798\uc758 status\ub97c \uac00\uc9c4\ub2e4.</p> <ul> <li>Success: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \ud1b5\uacfc\ud568</li> <li>Failure: \ucee8\ud14c\uc774\ub108\uac00 probe \ub97c \uc2e4\ud328\ud568</li> <li>Unknown: probe\uac00 \uc2e4\ud328\ud558\uc600\ub2e4. (\uc5b4\ub5a4 \uc561\uc158\ub3c4 \ud574\uc11c\ub294 \uc548\ub41c\ub2e4. \uadf8\ub9ac\uace0 kubelet\uc774 \ucd94\uac00 \ud655\uc778\uc744 \ud560\uac83\uc774\ub2e4.)</li> </ul>"},{"location":"hello-kubernetes/section02/service-ingress/","title":"2.3 Service &amp; Ingress","text":""},{"location":"hello-kubernetes/section02/service-ingress/#service","title":"Service\ub780","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc11c\ube44\uc2a4\ub294 \uc5ec\ub7ec \uac1c\uc758 \ubd84\uc0b0\ub41c \ud615\ud0dc\ub85c \ubc30\ud3ec\ub41c Pod \ub4e4\uc744 \ud558\ub098\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ud55c \ub9ac\uc18c\uc2a4\uc774\ub2e4. \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 pod\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\uc758 \uc885\ub958\ub294 ClusterIP, NodePort, LoadBalancer, \uadf8\ub9ac\uace0 Headless \ud0c0\uc785\uc774 \uc874\uc7ac\ud55c\ub2e4. \uc11c\ube44\uc2a4 \ud0c0\uc785\uc5d0 \ub530\uc11c \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \ud639\uc740 \uc678\ubd80 IP \uc8fc\uc18c\uac00 \ud560\ub2f9\ub418\uba70 \uc11c\ube44\uc2a4\uc5d0 \uc5f0\ub3d9\ub41c(label\uc774 \ub9e4\uce6d\ub41c) \ud30c\ub4dc \uc911 \ud558\ub098\ub85c \ub77c\uc6b0\ud305\uc774 \ub41c\ub2e4. \ud0c0\uc785\uc774 headless\uc778 \uacbd\uc6b0\ub294 \ubcc4\ub3c4\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc758 \uc8fc\uc18c\uac00 \ub098\uc624\ub294 \uac83\uc774 \uc544\ub2cc \uc11c\ube44\uc2a4\uc5d0 \uc5f0\uacb0\ub41c \uc804\uccb4 Pod\uc758 IP \ubaa9\ub85d\uc774 \ud638\ucd9c\ub41c\ub2e4.  \uc11c\ube44\uc2a4\ub294 \uae30\ubcf8\uc73c\ub85c \ub178\ub4dc\uc5d0 \uc788\ub294 iptables \ud504\ub85d\uc2dc \ubaa8\ub4dc\ub85c \ub3d9\uc791\ud558\uba70 iptables \uc124\uc815\uac12\uc73c\ub85c \uad00\ub9ac\uac00 \ub418\uba70 \uc815\uc0c1\uc801\uc73c\ub85c \uc218\ud589\ub418\uace0 \uc788\ub294 \ubc31\uc5d4\ub4dc \ud30c\ub4dc\ub85c\ub9cc \uc5f0\uacb0\ub41c\ub2e4. \ub610\ud55c \uc11c\ube44\uc2a4\ub294 namespace\uc5d0 \uadc0\uc18d\uc774 \ub418\ubbc0\ub85c \ub2e4\ub978 namespace\uc5d0 \uc788\ub294 \uc571\uc774 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 <code>&lt;service&gt;.&lt;namespace&gt;.svc</code>\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70 \uc11c\ube44\uc2a4\ub97c \uc678\ubd80\ub85c \ub178\ucd9c\ud558\uace0\uc790 \ud560 \ub54c\ub294 NodePort, LoadBalancer, \uadf8\ub9ac\uace0 \uc544\ub798\uc11c \ub530\ub85c \uc124\uba85\ud558\ub294 Ingress\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section02/service-ingress/#service-type","title":"Service Type","text":"Type Description ClusterIP \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4 NodePort Node\uc758 Port \ubc94\uc704(30000-32767)\uc911 \ud558\ub098\uac00 \ud560\ub2f9\uc774 \ub418\uba70 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ud574\ub2f9 \ub178\ub4dc\uc758 IP \uc8fc\uc18c\uc640 \ud560\ub2f9\ub41c Port\ub85c \uc11c\ube44\uc2a4 LoadBalancer \ud074\ub7ec\uc2a4\ud130\uc5d0 \uad6c\uc131\ub41c \ub124\ud2b8\uc6cc\ud06c \ubd80\ud558 \ubd84\uc0b0\uae30\uc758 IP \ud639\uc740 \ud074\ub77c\uc6b0\ub4dc\uc758 \uacbd\uc6b0 \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc5f0\ub3d9\ub41c Cloud-Native LB\uc758 IP \uc8fc\uc18c\ub85c \uc11c\ube44\uc2a4 Headless \ud558\ub098\uc758 \ub300\ud45c IP \uc8fc\uc18c\uac00 \uc544\ub2cc \ubaa8\ub4e0 Pod\uc758 IP\uc744 \ub9ac\uc2a4\ud2b8\ub85c \uc81c\uacf5, Zookeeper\ucc98\ub7fc \uc11c\ubc84\uc758 \ubaa8\ub4e0 IP\ub97c \uc54c\uc544\uc57c\ud560 \uacbd\uc6b0 \uc801\ud569"},{"location":"hello-kubernetes/section02/service-ingress/#clusterip","title":"ClusterIP","text":"<p>type\uc758 \uae30\ubcf8\uac12\uc774\uba70 \ub0b4\ubd80 \ud074\ub7ec\uc2a4\ud130 IP \uc8fc\uc18c\ub97c \ud560\ub2f9 \ubc1b\uc544 \uc11c\ube44\uc2a4\uac00 \ub41c\ub2e4. \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc758 \ub2e4\ub978 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c ClusterIP\ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\uba70 \uc790\ub3d9\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc5d0 \uc0dd\uc131\ub41c CNAME <code>&lt;service&gt;.&lt;namespace&gt;.svc.&lt;cluster_domain&gt;</code> DNS Records \ub85c\ub3c4 \uc811\uadfc \uac00\ub2a5\ud558\ub2e4.</p> <p></p> <pre><code>kubectl run http --image=busybox --port=80\n\n</code></pre>"},{"location":"hello-kubernetes/section02/service-ingress/#nodeport","title":"NodePort","text":""},{"location":"hello-kubernetes/section02/service-ingress/#load-balancer","title":"Load Balancer","text":"<p>\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 LoadBalancer\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 LB class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS EKS\ud658\uacbd\uc5d0\uc11c External NLB\uac00 \uc544\ub2cc Internal NLB\ub85c \uc0ac\uc6a9 \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 \uac00\ub2a5\ud558\ub2e4</p> <pre><code>service:\n  type: LoadBalancer\n  nodePort:\n  port: 3100\n  annotations: \n    service.beta.kubernetes.io/aws-load-balancer-internal: \"true\"\n    service.beta.kubernetes.io/aws-load-balancer-scheme: internal\n    service.beta.kubernetes.io/aws-load-balancer-type: nlb\n</code></pre>"},{"location":"hello-kubernetes/section02/service-ingress/#headless","title":"Headless","text":""},{"location":"hello-kubernetes/section02/service-ingress/#ingress","title":"Ingress\ub780","text":"<p>Ingress\ub294 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\uba70 Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. </p> <p>\ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70, GCP\ub294 \uae30\ubcf8\uc73c\ub85c GCP HTTP(S) LoadBalancer\ub85c \uc5f0\ub3d9\uc774 \ub41c\ub2e4. \uc774\uac83\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \ub2e4\ub978 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4.  \uc624\ud508\uc18c\uc2a4\ub85c\ub294 Kubernetes\uc5d0\uc11c \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx\uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4.</p> <p>\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\uac00 \uc874\uc7ac \ud55c\ub2e4\uba74 \ud574\ub2f9 ingress class \uc774\ub984\uc744 Annotation\uc5d0 \uc785\ub825\ud558\uc5ec \ud574\ub2f9 \uc778\uadf8\ub798\uc2a4\uc5d0 \uc5f0\ub3d9 \ud560 \uc218 \uc788\uc73c\uba70 Target Group Rule, Sticky session\uacfc \uac19\uc740 ALB \uc124\uc815\ub3c4 annotation\uc5d0\uc11c \ucc98\ub9ac \uac00\ub2a5\ud558\ub2e4. ALB Ingress Annotation</p> <pre><code>metadata:\n  namespace: default\n  name: ingress\n  annotations:\n    kubernetes.io/ingress.class: alb\n    alb.ingress.kubernetes.io/scheme: internet-facing\n    alb.ingress.kubernetes.io/target-group-attributes: stickiness.enabled=true,stickiness.lb_cookie.duration_seconds=60\n    alb.ingress.kubernetes.io/actions.forward-multiple-tg: &gt;\n      {\"type\":\"forward\",\"forwardConfig\":{\"targetGroups\":[{\"serviceName\":\"service-1\",\"servicePort\":\"http\",\"weight\":20},{\"serviceName\":\"service-2\",\"servicePort\":80,\"weight\":20},{\"targetGroupARN\":\"arn-of-your-non-k8s-target-group\",\"weight\":60}],\"targetGroupStickinessConfig\":{\"enabled\":true,\"durationSeconds\":200}}}\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/","title":"\ud578\uc988\uc628 2.6 Configmap &amp; Secret","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc124\uc815 \ud30c\uc77c\uc744 Configmap\ub85c \uad00\ub9ac \ubc0f \uc911\uc694\ud55c \ub370\uc774\ud130\ub97c Secrets\uc73c\ub85c \uc778\ucf54\ub529\ud558\uc5ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap\uc73c\ub85c \uad00\ub9ac\ud558\uace0 DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Configmap \uacfc Secret\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#architecture","title":"Architecture","text":"<p>Nginx \uc124\uc815 \ud30c\uc77c\uc744 Configmap, DB Password\ub97c Secret\ub97c \ud1b5\ud574 \uc124\uc815 \uad00\ub9ac</p>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#1-configmap","title":"1 ConfigMap","text":""},{"location":"hello-kubernetes/section02/handson/configmap-secret/#11-configmap","title":"1.1 ConfigMap \uc791\uc131\ud558\uae30","text":"<p>\uc544\ub798\uc640 \uac19\uc774 nginx\uc758 \uc124\uc815\ud30c\uc77c \ud558\ub098\uc640, key-value \uc30d\uc73c\ub85c \uc774\ub8e8\ub294 \ubcc0\uc218 2\uac1c\ub97c \ud3ec\ud568\ud55c ConfigMap\uc744 \ub9cc\ub4e4\uc5b4\ubcf8\ub2e4.</p> <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: sample-configs\ndata:\n  default_ttl: \"30\"\n  say_hello: \"Hi!\"\n\n  sample-nginx.conf: |\n    server {\n      listen            80;\n      index             index.html;\n      server_name       cloudacode.com;\n\n      location / {\n        root  /cloudacode/static/\n      }\n\n      location /api {\n        proxy_pass  https://api.cloudacode.internal\n      }\n    }\n</code></pre> <p>\uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 <code>sample-cm.yaml</code> \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 ConfigMap \uc624\ube0c\uc81d\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>$ kubectl apply -f sample-cm.yaml\nconfigmap/sample-configs created\n\n$ kubectl get cm\nNAME             DATA   AGE\nsample-configs   3      27s\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#12-pod-environment-variable-configmap","title":"1.2 Pod\uc5d0 \ud658\uacbd\ubcc0\uc218(Environment Variable)\ub85c ConfigMap\uc758 \ub370\uc774\ud130\ub97c \uc77d\uc5b4\ubcf4\uae30","text":"<pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: sample-pod\nspec:\n  containers:\n  - name: demo\n    image: busybox\n    command: [\"tail\", \"-f\", \"/dev/null\"]\n    env:\n    - name: DEFAULT_TTL\n      valueFrom:\n        configMapKeyRef:\n          name: sample-configs\n          key: default_ttl\n</code></pre> <p>\uc704\uc5d0\uc11c \uc791\uc131\ud55c \ud30c\uc77c\uc744 <code>sample-pod.yaml</code> \uc774\ub77c\uace0 \uc800\uc7a5\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>$ kubectl apply -f sample-pod.yaml\npod/sample-pod created\n\n$ kubectl get po --watch\nNAME                   READY   STATUS              RESTARTS   AGE\nsample-pod   0/1     ContainerCreating   0          4s\nsample-pod   1/1     Running             0          6s\n</code></pre> <p><code>sample-pod</code> \uc0dd\uc131\uc774 \uc131\uacf5\ud558\uc600\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 pod \ub0b4\ubd80\uc758 \ud658\uacbd\ubcc0\uc218 \uc815\ubcf4\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4.</p> <pre><code>$ k exec sample-pod -- env\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nHOSTNAME=sample-pod\n# \uc544\ub798\uc640 \uac19\uc774 ConfigMap\uc5d0\uc11c \uc0dd\uc131\ud55c \uac12\uc774 \ud658\uacbd\ubcc0\uc218\ub85c \uc8fc\uc785\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\nDEFAULT_TTL=30\n...\n... # ConfigMap\uc5d0\uc11c \uc124\uc815\ud55c \uac12 \uc774\uc678\uc5d0\ub3c4 \ub2e4\uc591\ud55c \ud658\uacbd\ubcc0\uc218\uac00 \ucd9c\ub825\ub420 \uc218 \uc788\ub2e4.\n...\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#13-pod-configmap-volume-mount","title":"1.3 Pod\uc5d0 ConfigMap\uc758 \ub370\uc774\ud130\ub97c Volume\uc73c\ub85c Mount\ud558\uc5ec \uc77d\uc5b4\ubcf4\uae30","text":"<p>2.6.1 \ub2e8\uacc4\uc5d0\uc11c \uc0dd\uc131\ud55c, <code>sample-configs</code>\uc758 \ub0b4\uc6a9 \uc911, <code>sample-nginx.conf</code> \ud30c\uc77c\uc744 Volume \ud615\uc2dd\uc73c\ub85c Pod\uc5d0 Mount \ud55c \ub4a4 \uc77d\ub3c4\ub85d \ud55c\ub2e4.</p> <p>\uc544\ub798\uc640 \uac19\uc774 Pod\ub97c \uc0dd\uc131\ud574 \ubcf8\ub2e4.</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\nspec:\n  containers:\n  - name: nginx\n    image: nginx\n    ports:\n    - containerPort: 80\n    volumeMounts:\n      - name: nginx-vhost-config\n        mountPath: /etc/nginx/vhosts.d\n        readOnly: true\n  volumes:\n    - name: nginx-vhost-config\n      configMap:\n        name: sample-configs\n        items:\n        - key: \"sample-nginx.conf\"\n          path: \"sample-nginx.conf\"\n</code></pre> <p>nginx Pod \uc758 container \ub0b4\ubd80\uc5d0 <code>sample-nginx.conf</code> \uac00 \uc5b4\ub5bb\uac8c mount \ub418\uc5c8\ub294\uc9c0 \uccb4\ud06c\ud574 \ubcf4\ub3c4\ub85d \ud55c\ub2e4.</p> <pre><code>$ k exec nginx -- ls -al /etc/nginx/vhosts.d\ntotal 16\ndrwxrwxrwx 3 root root 4096 Jul  5 12:56 .\ndrwxr-xr-x 1 root root 4096 Jul  5 12:56 ..\ndrwxr-xr-x 2 root root 4096 Jul  5 12:56 ..2022_07_05_12_56_37.2444435617\nlrwxrwxrwx 1 root root   32 Jul  5 12:56 ..data -&gt; ..2022_07_05_12_56_37.2444435617\nlrwxrwxrwx 1 root root   24 Jul  5 12:56 sample-nginx.conf -&gt; ..data/sample-nginx.conf\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#2-secret","title":"2 Secret","text":""},{"location":"hello-kubernetes/section02/handson/configmap-secret/#21-secret","title":"2.1 Secret \uc791\uc131\ud558\uae30","text":"<p>Database\uc5d0 \uc811\uadfc\ud560 \ub54c \uc0ac\uc6a9\ud560 ID/PW\ub97c Secret\uc73c\ub85c \ub9cc\ub4e4\uc5b4\ubcf4\ub3c4\ub85d \ud55c\ub2e4.</p> <p>ID\ub294 <code>helloworld</code>, Password\ub294 <code>thisispassword</code>\ub85c \uac00\uc815\ud558\uc5ec \ub9cc\ub4dc\ub294 \uacfc\uc815\uc774\ub2e4.</p> <p>\uc6b0\uc120 plantext \uac12\uc744 base64 encoding \ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4.</p> <pre><code>$ echo -n \"helloworld\" | base64 -w0\naGVsbG93b3JsZA==\n\n$ echo -n \"thisispassword\" | base64 -w0\ndGhpc2lzcGFzc3dvcmQ=\n</code></pre> <p>Info</p> <p>base64 \uc778\ucf54\ub529 \uc2dc newline\uc744 \ud3ec\ud568\ud558\uc9c0 \uc54a\uace0 \uc778\ucf54\ub529 \ud558\ub3c4\ub85d <code>base64 -w0</code> \uc640 \uac19\uc774 \ud30c\ub77c\ubbf8\ud130\ub97c \ucd94\uac00\ud55c\ub2e4. (\ub2e8, MacOS \ud658\uacbd\uc5d0\uc11c\ub294 <code>base64 -b 0</code> \uc640 \uac19\uc774 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4.)    \ub9cc\uc57d \uc704\uc640 \uac19\uc774 \uc0dd\uc131\ud558\uc9c0 \uc54a\uace0 COLS \ubb38\uc790\uc5f4\uae4c\uc9c0 \ud3ec\ud568\ud55c\ub2e4\uba74, \ucd94\ud6c4\uc5d0 \uc774 \uac12\uc740 \ud658\uacbd\ubcc0\uc218 \ub4f1\uc5d0\ub3c4 \ub611\uac19\uc774 \ud3ec\ud568\ub418\uc5b4 \uc77d\ud600\uc9c8 \uc218 \uc788\ub2e4.</p> <p>\uc774\ub807\uac8c \uc5bb\uc5b4\ub0b8 \uac12\uc744 Secret \uc758 data \ud544\ub4dc\uc5d0 <code>DB_ACCESS_ID</code> \uc640 <code>DB_ACCESS_PW</code> \ub85c \uc791\uc131\ud55c\ub2e4.</p> <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: db-account\ntype: Opaque\ndata:\n  DB_ACCESS_ID: aGVsbG93b3JsZA==\n  DB_ACCESS_PW: dGhpc2lzcGFzc3dvcmQ=\n</code></pre> <p>\uc704\uc5d0\uc11c \uc791\uc131\ud55c \ub0b4\uc6a9\uc744 <code>sample-secret.yaml</code> \ud30c\uc77c\uba85\uc73c\ub85c \uc800\uc7a5\ud55c\ub2e4. \uadf8\ub9ac\uace0 kubectl \uba85\ub839\uc5b4\ub85c secret\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>$ kubectl apply -f sample-secret.yaml\nsecret/db-account created\n</code></pre> <p>\uc774\ub807\uac8c \uc0dd\uc131\ud55c secret \uc744 kubectl describe \uba85\ub839\uc73c\ub85c \uc870\ud68c\ud558\ub354\ub77c\ub3c4 \uc2e4\uc81c value \ubd80\ubd84\uc740 \ubc14\ub85c \ub178\ucd9c\ub418\uc9c0 \uc54a\ub294\ub2e4.</p> <pre><code>$ kubectl describe secret db-account\nName:         db-account\nNamespace:    default\nLabels:       &lt;none&gt;\nAnnotations:  &lt;none&gt;\n\nType:  Opaque\n\nData\n====\nDB_ACCESS_ID:  11 bytes\nDB_ACCESS_PW:  15 bytes\n</code></pre> <p>\uc774\ubbf8 \uc0dd\uc131\ub41c secret \uc758 base64 decoded \ub41c \uac12\uc744 \ubcf4\uace0 \uc2f6\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 \uc2dc\ub3c4\ud574\ubcfc \uc218 \uc788\ub2e4.</p> <pre><code>$ kubectl get secret db-account -o json | jq '.data | map_values(@base64d)'\n{\n  \"DB_ACCESS_ID\": \"helloworld\",\n  \"DB_ACCESS_PW\": \"thisispassword\"\n}\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#21-secret-pod-mount","title":"2.1 Secret \uc744 Pod\uc758 \ud658\uacbd\ubcc0\uc218\ub85c Mount \ud558\uae30","text":"<p>2.6.2 \uc5d0\uc11c \uc0dd\uc131\ud55c <code>sample-pod.yaml</code>\ub97c \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud574\ubcf8\ub2e4.</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: sample-pod\nspec:\n  containers:\n  - name: demo\n    image: busybox\n    command: [\"tail\", \"-f\", \"/dev/null\"]\n    env:\n    - name: DEFAULT_TTL\n      valueFrom:\n        configMapKeyRef:\n          name: sample-configs\n          key: default_ttl\n    envFrom:\n      - secretRef:\n          name: db-account\n</code></pre> <p>\uc0dd\uc131\ud55c Pod\uc5d0 <code>env</code> \uba85\ub839\uc744 \uc218\ud589\ud574 \ud658\uacbd\ubcc0\uc218\ub97c \uc870\ud68c\ud574\ubcf8\ub2e4.</p> <pre><code>k exec sample-pod -- env\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nHOSTNAME=sample-pod\nDB_ACCESS_ID=helloworld\nDB_ACCESS_PW=thisispassword\nDEFAULT_TTL=30\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/configmap-secret/#3-clean-up","title":"3 Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/deployment/","title":"\ud578\uc988\uc628 2.4 Deployment","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c Deployment\ub97c \ud1b5\ud574 \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Deployment \uad6c\uc131 \ud6c4 Pod\ub97c \ubc30\ud3ec\ud574 \ubcf4\uace0 Replica \uac1c\uc218\ub97c \uc870\uc815\ud574 \ubcf4\uba74\uc11c Pod \ub9ac\uc18c\uc2a4\ub97c \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section02/handson/deployment/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Deployment\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section02/handson/deployment/#architecture","title":"Architecture","text":"<p>Deployment\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac</p>"},{"location":"hello-kubernetes/section02/handson/deployment/#1-deployment","title":"1 Deployment","text":""},{"location":"hello-kubernetes/section02/handson/deployment/#2-replicaset","title":"2 Replicaset \uc870\uc815","text":""},{"location":"hello-kubernetes/section02/handson/deployment/#3-clean-up","title":"3 Clean Up","text":""},{"location":"hello-kubernetes/section02/handson/pod/","title":"\ud578\uc988\uc628 2.1 Pod","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uac00\uc7a5 \uae30\ubcf8\uc774 \ub418\ub294 Pod \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud574 \ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Pod \ub9ac\uc18c\uc2a4\ub85c \uc120\uc5b8\ud615(declarative)\uc73c\ub85c \ubc30\ud3ec \uad00\ub9ac\ud574 \ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section02/handson/pod/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Pod\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section02/handson/pod/#architecture","title":"Architecture","text":"<p>Pod\ub97c \ud1b5\ud574 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c \ubc30\ud3ec \ubc0f \uad00\ub9ac</p>"},{"location":"hello-kubernetes/section02/handson/pod/#1-pod","title":"1 Pod","text":""},{"location":"hello-kubernetes/section02/handson/pod/#2-resource","title":"2 Resource \uc870\uc815","text":""},{"location":"hello-kubernetes/section02/handson/pod/#3-clean-up","title":"3 Clean Up","text":""},{"location":"hello-kubernetes/section02/handson/resource-qos/","title":"\ud578\uc988\uc628 2.2 Resources &amp; QoS","text":"<p>Pod\uc758 resource(cpu, mem)\ub97c \uc9c0\uc815\ud558\uc5ec QoS\uc124\uc815\ud558\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p> <p>Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#1pod-spec-requests-limits-qos-pod","title":"1.Pod spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131","text":""},{"location":"hello-kubernetes/section02/handson/resource-qos/#11-best-effort-pod","title":"1.1 Best-Effort Pod \uc0dd\uc131\ud558\uae30","text":"<ul> <li> <p>resource requests/limits\uac00 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0\uc5d0 Best-Effort\ub85c \uc0dd\uc131\ub418\uae30 \ub54c\ubb38\uc5d0 \uc9c0\uc815\ud558\uae30 \uc54a\uace0 \uc0dd\uc131\ud55c\ub2e4.</p> </li> <li> <p>Pod specification yaml \uc791\uc131</p> </li> </ul> <pre><code># namespace \uc0dd\uc131\nkubectl create ns qos-example\n\n# yaml \uc0dd\uc131\ncat &lt;&lt;EOF &gt; qos-demo-besteffort.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: qos-demo-besteffort\n  namespace: qos-example\nspec:\n  containers:\n  - name: qos-demo-ctr\n    image: nginx\n    resources:\n      limits: {}\n      requests: {}\nEOF\n</code></pre> <ul> <li>pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778</li> </ul> <pre><code>kubectl apply -f qos-demo-besteffort.yaml\npod/qos-demo-besteffort created\n\nkubectl get po -n qos-example\nNAME       READY   STATUS    RESTARTS   AGE\nqos-demo-besteffort   1/1     Running   0          26s\n\n# QoS \ud655\uc778\nkubectl get po -n qos-example qos-demo-besteffort -o yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  ...\nspec:\n  containers:\n    ...\n    resources: {}\n  # BestEffort \ud655\uc778\nstatus:\n  qosClass: BestEffort\n</code></pre> <p>Info</p> <p>\ud14c\uc2a4\ud2b8 \ud560\ub54c, \ud639\uc740 \uc11c\ube44\uc2a4\ub97c \ubc30\ud3ec\ud560\ub54c, application\uc774 \uc0ac\uc6a9\ud558\ub294 namespace\ub97c \uad6c\ubd84\ud558\uba74 \ubc30\ud3ec\uc2dc \ubc1c\uc0dd\ud558\ub294 human error\ub97c \ud53c\ud560\uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#12-burstable-pod","title":"1.2 Burstable Pod \uc0dd\uc131\ud558\uae30","text":"<ul> <li> <p>resource requests\ub294 \uc9c0\uc815\ub418\uc5b4 \uc788\uc73c\ub098(not equal to 0) limit\uac00 \uc5c6\ub294\uacbd\uc6b0, \ud639\uc740 \uac19\uc9c0\uac00 \uc54a\uc744\uacbd\uc6b0 Burstable QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4.</p> </li> <li> <p>Pod specification yaml \uc791\uc131</p> </li> </ul> <pre><code># yaml \uc0dd\uc131\ncat &lt;&lt;EOF &gt; qos-demo-bustable.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: qos-demo-bustable\n  namespace: qos-example\nspec:\n  containers:\n  - name: qos-demo-ctr\n    image: nginx\n    resources:\n      limits:\n        memory: \"200Mi\"\n        cpu: \"700m\"\n      requests:\n        memory: \"100Mi\"\n        cpu: \"350m\"\nEOF\n</code></pre> <ul> <li>pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778</li> </ul> <pre><code>kubectl apply -f qos-demo-bustable.yaml\npod/qos-demo-bustable created\n\nkubectl get po -n qos-example\nNAME                   READY   STATUS    RESTARTS   AGE\nqos-demo-bestefforts   1/1     Running   0          89s\nqos-demo-bustable      1/1     Running   0          39s\n\n# QoS \ud655\uc778\nkubectl get po -n qos-example qos-demo-bustable -o yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  ...\nspec:\n  containers:\n    ...\n    resources:\n      limits:\n        cpu: 700m\n        memory: 200Mi\n      requests:\n        cpu: 350m\n        memory: 100Mi\n  ...\nstatus:\n  # Burstable \ud655\uc778\n  qosClass: Burstable\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#13-guaranteed-pod","title":"1.3 Guaranteed Pod \uc0dd\uc131\ud558\uae30","text":"<ul> <li> <p>resource requests/limits\ub97c \ubaa8\ub450 \uc9c0\uc815(no equalt to 0)\ud558\uace0, \uadf8\uac83\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0 Guaranteed QoS Pod\uc774 \uc0dd\uc131\ub41c\ub2e4.</p> </li> <li> <p>Pod specification yaml \uc791\uc131</p> </li> </ul> <pre><code># yaml \uc0dd\uc131\ncat &lt;&lt;EOF &gt; qos-demo-guaranteed.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: qos-demo-guaranteed\n  namespace: qos-example\nspec:\n  containers:\n  - name: qos-demo-ctr\n    image: nginx\n    resources:\n      limits:\n        memory: \"200Mi\"\n        cpu: \"700m\"\n      requests:\n        memory: \"200Mi\"\n        cpu: \"700m\"\nEOF\n</code></pre> <ul> <li>pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778</li> </ul> <pre><code>kubectl apply -f qos-demo-guaranteed.yaml\npod/qos-demo-guaranteed created\n\nkubectl get po -n qos-example\nNAME                   READY   STATUS    RESTARTS   AGE\nqos-demo-bestefforts   1/1     Running   0          5m28s\nqos-demo-bustable      1/1     Running   0          4m38s\nqos-demo-guaranteed    1/1     Running   0          11s\n\n# QoS \ud655\uc778\nkubectl get po -n qos-example qos-demo-guaranteed -o yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  ...\nspec:\n  containers:\n    ...\n    resources:\n      limits:\n        cpu: 700m\n        memory: 200Mi\n      requests:\n        cpu: 700m\n        memory: 200Mi\n  ...\nstatus:\n  # Guaranteed \ud655\uc778\n  qosClass: Guaranteed\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#14-cleanup","title":"1.4 cleanup","text":"<pre><code>kubectl delete -f qos-demo-besteffort.yaml\nkubectl delete -f qos-demo-bustable.yaml\nkubectl delete -f qos-demo-guaranteed.yaml\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#2deployment-spec-requests-limits-qos-pod","title":"2.Deployment spec\uc5d0 Requests\uc640 Limits \uc9c0\uc815\ud558\uc5ec QoS\ubcc4 Pod\uc744 \uc0dd\uc131","text":"<ul> <li>deployment spec\uc5d0 request\ub97c \uc9c0\uc815\ud558\ub294 \ubd80\ubd84\uc740 \uc704\uc640 \ub3d9\uc77c\ud568</li> <li>deployment spec\uc5d0 2\uac1c\uc758 nginx container\ub97c \uc774\uc6a9\ud55c request\uc640 limits\ub97c \uc9c0\uc815\ud558\uc5ec qos\ub97c \uc9c0\uc815\ud55c\ub2e4.</li> </ul>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#21-qos-deployment","title":"2.1 QoS\uac00 \uc9c0\uc815\ub41c Deployment \uc0dd\uc131\ud558\uae30","text":"<ul> <li>deployment specification yaml \uc791\uc131</li> </ul> <pre><code>cat &lt;&lt;EOF &gt; qos-demo-deploy.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: qos-demo-deploy\n  namespace: qos-example\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: qos-demo\n  template:\n    metadata:\n      labels:\n        app: qos-demo\n    spec:\n      containers:\n      - name: qos-demo-ctr-one\n        image: nginx\n        ports:\n        - containerPort: 80\n        resources:\n          limits:\n            memory: \"200Mi\"\n            cpu: \"700m\"\n          requests:\n            memory: \"200Mi\"\n            cpu: \"700m\"\n      - name: qos-demo-ctr-sidecar\n        image: nginx\n        # \ud558\ub098\uc758 pod\uc5d0 \ub3d9\uc77c \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uae30 \uc704\ud574 port \ubcc0\uacbd\n        command: [\"/bin/sh\",\"-c\"]\n        args: [\"sed -i 's/listen  .*/listen 8000;/g' /etc/nginx/conf.d/default.conf &amp;&amp; exec nginx -g 'daemon off;'\"]\n        ports:\n        - containerPort: 8000\n        resources:\n          limits:\n            memory: \"300Mi\"\n            cpu: \"500m\"\n          requests:\n            memory: \"300Mi\"\n            cpu: \"500m\"\nEOF\n</code></pre> <ul> <li>pod \uc0dd\uc131 \ubc0f QoS \ud655\uc778</li> </ul> <pre><code>kubectl apply -f qos-demo-deploy.yaml\ndeployment.apps/qos-demo-deploy created\n\nkubectl get po -n qos-example\nNAME                               READY   STATUS    RESTARTS   AGE\nqos-demo-deploy-8476d469b7-7mw5b   2/2     Running   0          61s\nqos-demo-deploy-8476d469b7-fjxp8   2/2     Running   0          50s\nqos-demo-deploy-8476d469b7-l4nc6   2/2     Running   0          55s\n\n$ kubectl get po -n qos-example qos-demo-deploy-8476d469b7-7mw5b -o yaml\napiVersion: v1\nkind: Pod\n...\nspec:\n  containers:\n    ...\n    name: qos-demo-ctr-one\n    ...\n    resources:\n      limits:\n        cpu: 700m\n        memory: 200Mi\n      requests:\n        cpu: 700m\n        memory: 200Mi\n    ...\n    name: qos-demo-ctr-sidecar\n    ...\n    resources:\n      limits:\n        cpu: 500m\n        memory: 300Mi\n      requests:\n        cpu: 500m\n        memory: 300Mi\nstatus:\n  ...\n  qosClass: Guaranteed\n</code></pre> <p>Info</p> <p>\ud558\ub098\uc758 pod\uc5d0 2\uac1c \uc774\uc0c1\uc758 container\ub97c \uc2e4\ud589\ud560\ub54c(sidecar pattern) Pod\uc758 QoS\ub97c Guaranteed\ub97c \ud558\ub824\uba74 \ubaa8\ub4e0 container\uc758 resources\ub97c Guaranteed\uc758 \uc870\uac74\uc774 \ub9cc\uc871\ud574\uc57c \ud55c\ub2e4. \uc608\ub97c\ub4e4\uba74 \ud558\ub098\uc758 Pod\uc758 \ucee8\ud14c\uc774\ub108 2\uac1c\uc911 \ud558\ub098\ub294 Guranteed \uc870\uac74\uc744 \ub9cc\uc871\ud558\uc9c0\ub9cc \ub2e4\ub978 \ud558\ub098\uc758 container\uac00 Bustable\uc774\uba74 \ud574\ub2f9 Pod\uc758 QoS\ub294 Bustable\uc774 \ub41c\ub2e4. \uc774\uc640 \ub3d9\uc77c\ud558\uac8c 2\uac1c \uc774\uc0c1\uc758 container Pod\uc744 Besteffort\ub85c \uc9c0\uc815\ud558\uace0 \uc2f6\ub2e4\uba74 \ubaa8\ub4e0 container\uc758 resource\ub97c Besteffort \uc870\uac74\uc5d0 \ub9de\uac8c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/handson/resource-qos/#22-cleanup","title":"2.2 Cleanup","text":"<pre><code>kubectl delete -f qos-demo-deploy.yaml\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/service-ingress/","title":"\ud578\uc988\uc628 2.3 Service &amp; Ingress","text":"<p>Ingress-nginx \uad6c\uc131 \ubc0f Ingress\ub97c \ud1b5\ud574 Service \uc811\uadfc \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c ingress-nginx controller\ub97c \uad6c\uc131\ud558\uace0 Ingress\ub97c \ud1b5\ud574 \uc5ec\ub7ec \uac1c\uc758 \uc11c\ube44\uc2a4\uc5d0 \uc5b4\ub5bb\uac8c \uc811\uadfc\uc744 \ud560 \uc218 \uc788\ub294\uc9c0 \uc54c\uc544\ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Helm\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p> <p>Helm \uc124\uce58 \ubc0f \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \ubc29\ubc95: \uc2e4\uc2b5 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#architecture","title":"Architecture","text":"<p>\ud558\ub098\uc758 Ingress\uc5d0 \uc5ec\ub7ec \ubc84\uc804\uc758 Backends\ub97c \uad6c\uc131\ud558\uace0 URL Path\ub97c \uae30\uc900\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ub77c\uc6b0\ud305</p> <p></p> <p>/v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path(<code>/*</code>)\ub294 \uccab \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec, <code>/v2</code>\ub9cc \ub450 \ubc88\uc9f8 \ubc84\uc804\uc758 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#1-ingress-nginx","title":"1 Ingress Nginx \uad6c\uc131","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1\ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\uc73c\uba70 \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx\uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0\uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#11-helm-value","title":"1.1 Helm Value \uc124\uc815","text":"<p>Helm\uc744 \ud1b5\ud574\uc11c \uc124\uce58\ud558\uae30 \uc704\ud574 \uae30\uc874 ingress nginx\uc758 helm value \uac12\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815</p> <p>ingress-nginx-values.md</p> <pre><code>controller:\n  replicaCount: 1\n  nodeSelector:\n    ingress-ready: \"true\"\n  tolerations:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n    operator: Equal\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/control-plane\n    operator: Equal\n  watchIngressWithoutClass: true\n  hostPort:\n    enabled: true\n  service:\n    type: NodePort\n</code></pre> <p>Info</p> <p>\ub85c\uceec Kind \ud074\ub7ec\uc2a4\ud130\ub294 extraPortMappings\uc774 kind \ucee8\ud14c\uc774\ub108\uc758 hostport 80, 443\uc73c\ub85c \ub9e4\ud551\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 hostPort\ub85c Ingress Controller\ub97c \ud65c\uc131\ud654\ud574\uc8fc\uc5b4\uc57c \ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#12-ingress-nginx","title":"1.2 Ingress-Nginx \ucef4\ud3ec\ub10c\ud2b8 \uc124\uce58","text":"<pre><code>helm upgrade --install ingress-nginx ingress-nginx \\\n  --repo https://kubernetes.github.io/ingress-nginx \\\n  --namespace ingress-nginx --create-namespace -f ingress-nginx-values.yaml\n</code></pre> <p>\uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\uac00 \uc644\ub8cc \ub418\uc5c8\ub2e4\uba74 IngressClass\ub294 <code>nginx</code>\ub85c \uad6c\uc131\uc774 \ub418\uba70 \ub2e4\uc74c\uacfc \uac19\uc774 \ud655\uc778 \uac00\ub2a5\ud558\ub2e4</p> <pre><code>kubectl get ingressclasses.networking.k8s.io\n\nNAME    CONTROLLER             PARAMETERS   AGE\nnginx   k8s.io/ingress-nginx   &lt;none&gt;       5m\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#2","title":"2 \ub370\ubaa8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec","text":"<p>\ub370\ubaa8 Stateless \uc560\ud50c\ub9ac\ucf00\uc774\uc158 v1\uacfc v2\ub97c demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \ubc30\ud3ec\ud558\uace0 \uc11c\ube44\uc2a4 \ubc0f \uc778\uadf8\ub808\uc2a4\uae4c\uc9c0 \uc5f0\ub3d9\ud558\uc5ec \uc811\uadfc \ud655\uc778\uc744 \ud574 \ubcf8\ub2e4</p> <p>\ub370\ubaa8\uc6a9 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131</p> <pre><code>kubectl create ns demo\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#21-v1","title":"2.1 \ub370\ubaa8\uc571 v1 \ubc30\ud3ec","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158 <code>v1</code> \ubc30\ud3ec \ubc0f \ubaa8\ub4e0 URL Path\uac00 v1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815</p> <pre><code>kubectl create deployment demo01 \\\n  --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo\n\nkubectl expose deployment demo01 --port=80 --target-port=8080 -n demo\n\nkubectl create ingress demo01 --class=nginx --rule=\"/*=demo01:80\" -n demo\n</code></pre> <p>\ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml</p> <p>Info</p> <p>\uc704\uc758 helm value \uac12\uc5d0\uc11c <code>watchIngressWithoutClass: true</code> \uc635\uc158\uc744 \uc8fc\uc5c8\uae30 \ub54c\ubb38\uc5d0 \ub530\ub85c class \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc544\ub3c4 \uc790\ub3d9\uc73c\ub85c nginx ingress\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c\ub2e4.</p> <pre><code>$ kubectl get ing\nNAME     CLASS   HOSTS   ADDRESS         PORTS   AGE\ndemo01   nginx   *       10.96.119.252   80      112s\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#22-v2","title":"2.2 \ub370\ubaa8\uc571 v2 \ubc30\ud3ec","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158 <code>v2</code> \ubc30\ud3ec \ubc0f <code>/v2</code> URL Path\uac00 v2 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ud3ec\uc6cc\ub529 \ub418\ub3c4\ub85d Ingress \uc124\uc815</p> <pre><code>kubectl create deployment demo02 \\\n  --image=cloudacode/hello-go-app:v2.0.0 --port=8080 -n demo\n\nkubectl expose deployment demo02 --port=80 --target-port=8080 -n demo\n\nkubectl create ingress demo02 --class=nginx --rule=\"/v2=demo02:80\" -n demo\n</code></pre> <p>\ud639\uc740 \uc120\uc5b8\ud615(Declarative) \uc608\uc2dc ingress-service-demo-app.yaml</p> <p>Tip</p> <p>\ub9cc\uc57d \uc560\ud50c\ub9ac\ucf00\uc774\uc158 url\uc774 <code>/</code>\ub85c \ub3d9\uc791\ud558\ub294 \uacbd\uc6b0\ub294 <code>--annotation=\"nginx.ingress.kubernetes.io/rewrite-target=/</code> \uc744 \ucd94\uac00 \ud574\uc900\ub2e4</p>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#3","title":"3. \uc811\uadfc \ud655\uc778","text":"<p>\uac00\uc7a5 \uba3c\uc800 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc6cc\ud06c\ub85c\ub4dc\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uae30\ub3d9 \uc911\uc778\uc9c0 \ud655\uc778</p> <pre><code>kubectl get pods -n demo\nNAME                      READY   STATUS    RESTARTS   AGE\ndemo01-5dff6fb4d4-b4rch   1/1     Running   0          2m\ndemo02-d57799f78-phs4r    1/1     Running   0          1m\n\nkubectl get svc -n demo\nNAME     TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE\ndemo01   ClusterIP   10.96.144.58   &lt;none&gt;        80/TCP    7m\ndemo02   ClusterIP   10.96.69.13    &lt;none&gt;        80/TCP    5m\n</code></pre> <p>\uc704\uc5d0\uc11c \uad6c\uc131\ud55c Ingress \uc124\uc815 \ub3d9\uc791 \ud655\uc778: /v2\ub97c \uc81c\uc678\ud55c \ubaa8\ub4e0 path\ub294 \uccab \ubc88\uc9f8 demo01 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec\ub418\uba70 /v2\ub9cc demo02 \uc6cc\ud06c\ub85c\ub4dc\ub85c \uc804\ub2ec</p> <pre><code>curl 127.0.0.1\nHello, world!\nVersion: 1.0.0\nHostname: demo01-5dff6fb4d4-b4rch\n</code></pre> <pre><code>curl 127.0.0.1/v2\nHello, world!\nVersion: 2.0.0\nHostname: demo02-d57799f78-phs4r\n</code></pre>"},{"location":"hello-kubernetes/section02/handson/service-ingress/#4-clean-up","title":"4 Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/","title":"3.1 HPA","text":""},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#horizontal-pod-autoscaling","title":"Horizontal Pod Autoscaling","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc790\ub3d9 \ud655\uc7a5\ud558\ub294 \ub370 \uc77c\ubc18\uc801\uc73c\ub85c HPA(Horizontal Pod Autoscaling)\uac00 \uae30\ubcf8\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\uba70 \ub300\ud45c\uc801\uc73c\ub85c CPU, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \uba54\ud2b8\ub9ad \uae30\ubc18\uc73c\ub85c \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc815\ud574\uc9c4 \uc218\uce58\uc5d0 \ub9de\ub3c4\ub85d Deployment, StatefulSet\uc640 \uac19\uc740 \uc6cc\ud06c\ub85c\ub4dc \ub9ac\uc18c\uc2a4\uc758 \uaddc\ubaa8\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \uc870\uc815\ud55c\ub2e4. HPA controller\ub77c\ub294 \ucee8\ud2b8\ub864\ub7ec \ucef4\ud3ec\ub10c\ud2b8\uac00 Metric Server\uc5d0 \uc218\uc9d1\ub41c \uba54\ud2b8\ub9ad\uc744 \uae30\uc900\uc73c\ub85c HorizontalPodAutoscaler \ucfe0\ubc84\ub124\ud2f0\uc2a4 api \ub9ac\uc18c\uc2a4\ub97c \ud1b5\ud574 \uc2a4\ucf00\uc77c\ub9c1 \uc870\uc815\uc774 \uc774\ub8e8\uc5b4 \uc9c0\uba70 \ud574\ub2f9 HorizontalPodAutoscaler\ub294 Deployments \ubc0f ReplicaSet\uc758 \ud06c\uae30\ub97c \uc81c\uc5b4\ud55c\ub2e4.</p> <p></p> <p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 v1.23 \ubd80\ud130 \uc801\uc6a9\ub418\ub294 HPA v2\uc5d0\uc11c\ub294 CPU, Memory \uc678\uc5d0\ub3c4 custom metric\uc744 \uc9c0\uc6d0\ud55c\ub2e4. \ub9cc\uc57d \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc601\uc5ed \ubc16\uc5d0 \uc788\ub294 \ub9ac\uc18c\uc2a4\uc758 metric\uc744 \uac00\uc9c0\uace0 auto scaling\uc744 \ud574\uc57c \ud55c\ub2e4\uba74 KEDA\ub97c \ud1b5\ud574\uc11c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4.</p> <p>Tip</p> <p>KEDA\ub97c \ud1b5\ud574 Prometheus\uc758 \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad(\ud2b9\uc815 URL Path)\uc744 \ubc14\ud0d5\uc73c\ub85c AutoScaling \uc124\uc815\ud558\ub294 \ubc29\ubc95: Autoscale Kubernetes pods based on ingress request \u2014 Prometheus, KEDA, and K6</p> <p>HPA\ub294 DaemonSet\uacfc \uac19\uc740 \ud06c\uae30 \uc870\uc808\uc774 \ubd88\uac00\ub2a5\ud55c \uc624\ube0c\uc81d\ud2b8\uc5d0\ub294 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc73c\uba70 \uc218\ud3c9\uc801 \ud655\uc7a5\uc774\ubbc0\ub85c \ud560\ub2f9\ub41c CPU \ud639\uc740 Memory \ud06c\uae30\ub97c \ub298\ub824\uc57c \ud558\ub294 \uc218\uc9c1\uc801 \ud655\uc7a5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\ub294 Vertical Pod Autoscaler CRD(custom resource definition)\ub97c \ud074\ub7ec\uc2a4\ud130\uc5d0 \ucd94\uac00\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#_1","title":"\uc54c\uace0\ub9ac\uc998","text":"<p>HPA \ucee8\ud2b8\ub864\ub7ec\ub294 \uc6d0\ud558\ub294 \uba54\ud2b8\ub9ad \uac12(desired)\uacfc \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12(current) \uac04\uc758 \ube44\uc728\uc744 \uacc4\uc0b0\ud558\uc5ec \ub3d9\uc791 \ud558\uac8c \ub41c\ub2e4.</p> <pre><code>desired replicas\n= ceil ( current replicas * ( current metric / desired metric ) )\n</code></pre> <p>Info</p> <p>ceil() \ud568\uc218\ub294 \uc62c\ub9bc\ud558\uc5ec \uc8fc\uc5b4\uc9c4 \uc22b\uc790\ubcf4\ub2e4 \ud06c\uac70\ub098 \uac19\uc740 \uc815\uc218\ub97c \ubc18\ud658 \ud55c\ub2e4</p> <p>podautoscaler/replica_calculator.go</p> <pre><code>newReplicas := int32(math.Ceil(newUsageRatio * float64(len(metrics))))\nif (newUsageRatio &lt; 1.0 &amp;&amp; newReplicas &gt; currentReplicas) || (newUsageRatio &gt; 1.0 &amp;&amp; newReplicas &lt; currentReplicas) {\n    // return the current replicas if the change of metrics length would cause a change in scale direction\n    return currentReplicas, utilization, rawUtilization, timestamp, nil\n}\n</code></pre> <p>\uc608\ub97c \ub4e4\uc5b4 \ud604\uc7ac \uba54\ud2b8\ub9ad \uac12\uc774 200m\uc774\uace0 \uc6d0\ud558\ub294 \uac12\uc774 100m\uc774\uba74 \ubcf5\uc81c\ubcf8 \uc218\ub294 200.0 / 100.0 == 2.0\uc774\ubbc0\ub85c \ub450 \ubc30\uac00 \ud655\uc7a5\uc774 \ub418\uba70 \ud604\uc7ac \uac12\uc774 \ub300\uc2e0 50m\uc774\uba74 50.0 / 100.0 == 0.5\uac00 \ub418\ubbc0\ub85c \ubcf5\uc81c\ubcf8 \uc218\ub97c \uc808\ubc18\uc73c\ub85c \uc904\uc774\uace0 \ube44\uc728\uc774 1.0\uc5d0 \uac00\uae5d\uac8c \ub418\uba74 \ubaa8\ub4e0 \uc2a4\ucf00\uc77c\ub9c1\uc774 \ub354 \uc774\uc0c1 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uac8c \ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#scaling","title":"Scaling","text":"<p>\ud2b8\ub798\ud53d\uc774 \uc99d\uac00\ud558\uc5ec Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 50%\uc5d0 \ub3c4\ub2ec\ud558\uac8c \ub418\uba74 \ucd5c\ub300 10\uac1c \uae4c\uc9c0 \ud655\uc7a5\ud558\uace0 \ud2b8\ub798\ud53d\uc774 \uac10\uc18c\ud558\uba74 \ub9ac\uc18c\uc2a4\ub97c \ucd95\uc18c\ud560 \uc218 \uc788\ub3c4\ub85d HPA\ub97c \uad6c\uc131\ud55c\ub2e4.</p> <pre><code>apiVersion: autoscaling/v1\nkind: HorizontalPodAutoscaler\n...\nspec:\n scaleTargetRef:\n   apiVersion: apps/v1\n   kind: Deployment\n   name: nginx\n minReplicas: 1\n maxReplicas: 10\n targetCPUUtilizationPercentage: 50\n</code></pre>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#scale-down","title":"Scale Down \uc548\uc815\ud654 \ud558\uae30","text":"<p>Scale Down\uc774 \uc774\ub8e8\uc5b4\uc9c8 \ub54c \ubd80\ud558\uac00 \uac11\uc790\uae30 \ub2e4\uc2dc \uc77c\uc5b4\ub098\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc548\uc815\ud654\ub97c \uace0\ub824\ud558\uc5ec \ucfe8\ub2e4\uc6b4(\uc810\uc9c4\uc801\uc73c\ub85c \ucd95\uc18c)\ub97c \ud560 \ud544\uc694\uac00 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#periodseconds","title":"periodSeconds","text":"<p>\uc2a4\ucf00\uc77c \ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc544\uc11c pod\ub97c \ucd95\uc18c \ud560\ub54c \ud2b9\uc815 \uc2dc\uac04(\ucd08, second) \uac04\uaca9\uc73c\ub85c \ucfe8\ub2e4\uc6b4 \ud560\uc218 \uc788\ub2e4.</p> <pre><code>behavior:\n  scaleDown:\n    policies:\n    - type: Pods\n      value: 4\n      periodSeconds: 60\n    - type: Percent\n      value: 10\n      periodSeconds: 60\n</code></pre> <p>\ud55c\ubc88 \uc904\uc5b4\ub4e4\uba74 60\ucd08 \ub3d9\uc548\uc740 \uc720\uc9c0\ub418\uba70 \ub9cc\uc57d \uc704 \uc124\uc815 \ucc98\ub7fc \ub3d9\uc2dc\uc5d0 2\uac1c\uc758 \uc815\ucc45\uc774 \uc788\ub2e4\uba74 \ub9ce\uc740 \ubcc0\uacbd\uc744 \ud5c8\uc6a9\ud558\ub294 \ucabd\uc774 \uba3c\uc800 \uc801\uc6a9\ub41c\ub2e4. \uc608\ub97c \ub4e4\uc5b4, pod\uac00 20\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(2\uac1c) &lt; 4\uac1c =&gt; 4\uac1c\uac00 \uc904\uc5b4\ub4e4\uba70 50\uac1c \ub77c\uace0 \uac00\uc815 \ud558\uba74 10%(5\uac1c) &gt; 4\uac1c    =&gt; 5\uac1c \uc904\uc5b4\ub4e4\uac8c \ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section03/horizontal-pod-autoscaling/#stabilizationwindowseconds","title":"stabilizationWindowSeconds","text":"<p>\ub610\ud55c \uc548\uc815\ud654 \uc708\ub3c4\uc6b0 \uc2dc\uac04\uc744 \uc124\uc815\ud558\uc5ec \uc2a4\ucf00\uc77c \ub2e4\uc6b4\uc774 \uc870\uac74\uc774 \ub9cc\uc871 \ub418\uc5c8\ub354\ub77c\ub3c4 \ud2b9\uc815 \uc8fc\uae30 \ub3d9\uc548 \uba54\ud2b8\ub9ad\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uc5ec \ud574\ub2f9 \uc2dc\uac04 \uad6c\uac04\uc5d0\uc11c \uac00\uc7a5 \ub192\uc740 \uac12\uc774 \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \uc870\uac74\uc5d0 \ub9de\uc558\uc744 \ub54c \ucd95\uc18c\ub97c \uc9c4\ud589\ud560 \uc218\ub3c4 \uc788\ub2e4. \uc544\ub798\uc758 \uc608\uc2dc\uc5d0\uc11c \ucd5c\uadfc 5\ubd84 \ub3d9\uc548\uc758 \ubaa8\ub4e0 \uc0c1\ud0dc\uac00 \uace0\ub824 \ub300\uc0c1\uc774 \ub41c\ub2e4.</p> <pre><code>behavior:\n  scaleDown:\n    stabilizationWindowSeconds: 300\n</code></pre>"},{"location":"hello-kubernetes/section03/s3-c4/","title":"3.4 Taints &amp; Tolerations","text":""},{"location":"hello-kubernetes/section03/s3-c4/#taints","title":"Taints","text":""},{"location":"hello-kubernetes/section03/s3-c4/#tolerations","title":"Tolerations","text":""},{"location":"hello-kubernetes/section03/s3-c5/","title":"3.5 Affinity","text":""},{"location":"hello-kubernetes/section03/s3-c5/#pod-affinity","title":"Pod Affinity","text":""},{"location":"hello-kubernetes/section03/s3-c5/#node-affinity","title":"Node Affinity","text":""},{"location":"hello-kubernetes/section03/statefulset/","title":"3.3 StatefulSet","text":""},{"location":"hello-kubernetes/section03/statefulset/#statefulset","title":"StatefulSet","text":"<p>\uc0c1\ud0dc\uac00 \uc788\ub294(stateful) \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud2b9\uc815 \uc21c\uc11c\uc5d0 \ub9de\uac8c \ubc30\ud3ec\ud558\uace0 \ub3d9\uc77c\ud558\uac8c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c StatefulSet\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4. StatefulSet\uc744 \ud65c\uc6a9\ud558\uba74 Pod \uc774\ub984\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \ubd80\uc5ec \ud560 \uc218 \uc788\uc73c\uba70 PV\ub97c Pod\uc5d0 \uc9c0\uc18d\uc801\uc73c\ub85c \ub9e4\ud551\ud560 \uc218 \uc788\ub2e4. \ub2e4\uc218 Pod\uc758 \ud615\uc0c1\uc744 \ub3d9\uc77c\ud558\uac8c \uad00\ub9ac \ud55c\ub2e4\ub294 \uce21\uba74\uc5d0\uc11c\ub294 Deployment/ReplicaSet\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc, StatefulSet\uc740 network\ub098 storage\uc758 \ub9ac\uc18c\uc2a4\uac00 \uace0\uc815\ub418\uc5b4 \uc788\uace0 \uc21c\uc11c\uc5d0 \uc758\ud574\uc11c Pod\uac00 \uc2dc\uc791 \ud639\uc740 \uc911\uc9c0\uac00 \ub41c\ub2e4\ub294 \uc810\uc774 \ud070 \ucc28\uc774\uc810\uc774\ub2e4. \uacb0\ub860\uc801\uc73c\ub85c StatefulSet\uc740 \uc21c\ucc28\uc801\uc73c\ub85c \ubc30\ud3ec, \uc2dd\ubcc4\uc790 ID\uac00 \uc720\uc9c0 \ub418\uc5b4\uc57c \ud558\ub294 DB \ud639\uc740 leader/follower \uad6c\uc870\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc218\uc6a9\ud558\ub294\ub370 \uc801\ud569\ud558\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section03/statefulset/#_1","title":"\ud2b9\uc9d5","text":"<ul> <li>Pod \uc774\ub984\uc740 replica \uac1c\uc218\uc5d0 \ub9de\uac8c \uc5f0\uc18d\uc801\uc778 \uc22b\uc790\ub85c \uc0dd\uc131\ub428</li> <li>\ub370\uc774\ud130\uc758 \uc720\uc2e4\uc744 \ub9c9\uae30 \uc704\ud574 StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\ub294 \uac83\uc774 \uae30\ubcf8 \uac12</li> </ul> <p>Info</p> <p>1.23 \ubc84\uc804\ubd80\ud130 \uba85\uc2dc\uc801\uc73c\ub85c \uc218\ub3d9 scale\uc744 \ud560 \uacbd\uc6b0 volume\uc744 \uc790\ub3d9 \uc0ad\uc81c \uac00\ub2a5\ud55c PVC Retain \uae30\ub2a5\uc774 alpha\uc5d0 \ucd94\uac00\uac00 \ub418\uc5c8\ub2e4.</p> <pre><code>spec:\n  persistentVolumeClaimRetentionPolicy:\n    whenDeleted: Retain # StatefulSet\uc774 \uc0ad\uc81c\ub420 \ub54c \ub3d9\uc791\n    whenScaled: Delete # replica \uc218 scale down \ub54c \ub3d9\uc791\n</code></pre> <ul> <li>\ud30c\ub4dc\uc758 \ubc88\ud638, \ud638\uc2a4\ud2b8\ub124\uc784, SRV \ub808\ucf54\ub4dc\uc640 A \ub808\ucf54\ub4dc\uc774\ub984\uc740 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc9c0\ub9cc \ud30c\ub4dc\uc758 IP \uc8fc\uc18c\ub294 \ubcc0\uacbd\ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 IP\uac00 \uc544\ub2cc DNS\ub85c \uc9c8\uc758 \ud560 \uc218 \uc788\ub3c4\ub85d Headless \uc11c\ube44\uc2a4\uac00 \ud544\uc694 (ex, web-0.nginx)</li> </ul> <pre><code>kind: Service\nmetadata:\n  name: nginx\nspec:\n  ports:\n  - port: 80\n    name: web\n  clusterIP: None\n  selector:\n    app: nginx\n</code></pre> <ul> <li>\uc2a4\ucf00\uc77c\ub9c1\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub4e0 \uc120\ud589 \ud30c\ub4dc\uac00 Running \ubc0f Ready \uc0c1\ud0dc\uc5ec\uc57c \ud558\uba70, \uc2a4\ucf00\uc77c\ub2e4\uc6b4 \ud558\ub294 \uacbd\uc6b0 \ud6c4\uc18d \ud30c\ub4dc\uac00 \uc644\uc804\ud788 \uc885\ub8cc\ub41c \ud6c4 \uc0ad\uc81c\uac00 \ub428</li> </ul> <p></p>"},{"location":"hello-kubernetes/section03/storage-persistent-volume/","title":"3.2 Storage Volumes","text":"<p>\uc0c1\ud0dc\uac00 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub97c \uc548\uc815\uc801\uc774\uace0 \uc601\uad6c\uc801\uc73c\ub85c \uc6b4\uc601\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ud544\uc694\ud558\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \uc784\uc2dc(Ephemeral) \ub370\uc774\ud130 \ubcfc\ub968\ubd80\ud130 \uc601\uad6c\uc801\uc778(Persistent) \ub370\uc774\ud130 \ubcfc\ub968\uae4c\uc9c0 \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc81c\uacf5\ud558\uba70 CSI(Container Storage Interface)\ub97c \ud1b5\ud574\uc11c \ub2e4\uc591\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354 \uc194\ub8e8\uc158\uacfc \uc5f0\ub3d9\ub41c\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#ephemeral-volume","title":"Ephemeral Volume","text":"<p>\uc790\uccb4 \ud30c\uc77c\uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud558\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4(Stateless \uc6cc\ud06c\ub85c\ub4dc \uc640 \uac19\uc774 \ubcc4\ub3c4\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \uc635\uc158\uc744 \uc8fc\uc9c0 \uc54a\uc740)\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc784\uc2dc \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud558\uba70 \ucee8\ud14c\uc774\ub108\uac00 \uc7ac\uc2dc\uc791\uc774 \ub418\uba74 \uc2a4\ud1a0\ub9ac\uc9c0\uc758 \ub370\uc774\ud130\ub294 \uc720\uc2e4\uc774 \ub41c\ub2e4. \ub9cc\uc57d \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc5d0 \uc601\ud5a5 \ubc1b\uc9c0 \uc54a\uc73c\uba74\uc11c Pod \uc7ac\uc2dc\uc791\uc774\ub098 \ud06c\ub798\uc26c\uc758 \uc601\ud5a5\uc740 \ubc1b\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uc0ad\uc81c \ud558\uae30 \uc804\uae4c\uc9c0\ub9cc \uc720\uc9c0\ud558\uba74 \ub418\uba74 \ub418\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub77c\uba74 emptyDir \ubcfc\ub968 \ud0c0\uc785\uc744 \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4. \uc678\ubd80 \uc2a4\ud1a0\ub9ac\uc9c0\uc640 \uc5f0\ub3d9\ub418\uc5b4 \ubcfc\ub968\uc774 \uc0dd\uc131, \uad00\ub9ac \ub418\ub294 \uac83\uc774 \uc544\ub2cc \ub9ac\uc18c\uc2a4\uac00 \ub3d9\uc791 \uc911\uc778 \ub178\ub4dc\uc5d0\uc11c \uc0dd\uc131\ub41c \ubcfc\ub968\uc774\uba70 \ub178\ub4dc\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ubfd0\ub9cc\uc774 \uc544\ub2cc \uba54\ubaa8\ub9ac\uc5d0 \ub9c8\uc6b4\ud2b8\ud558\uc5ec \uc0ac\uc6a9\ub3c4 \uac00\ub2a5\ud558\ub2e4. \uce90\uc2dc \uc601\uc5ed\uc774\ub098 \uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \uacf5\uac04\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \uc801\ud569\ud558\ub2e4. \ub178\ub4dc\uc5d0 \uc788\ub294 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0ac\uc6a9\ud55c\ub2e4\ub294 \uad00\uc810\uc5d0\uc11c\ub294 HostPath\uc640 \ube44\uc2b7\ud558\ub098 \ub178\ub4dc\uc5d0 \uc788\ub294 \ud2b9\uc815 \ub370\uc774\ud130\uc5d0 \ubd88\uac00\ud53c\ud558\uac8c \uc811\uadfc\ud574\uc11c \uc77d\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\uace0\uc11c\ub294 emptyDir\uac00 \uc0ac\uc6a9\ub41c\ub2e4.</p> <pre><code>        volumeMounts:\n        - mountPath: /data\n          name: redis-data\n      volumes:\n      - name: redis-data\n        emptyDir: {}\n</code></pre> <p>Info</p> <p>\ub178\ub4dc\uc5d0\uc11c Pod\uc5d0 \ud560\ub2f9\ub41c emptyDir \ubcfc\ub968\uc758 \uc704\uce58\ub294 <code>/var/lib/kubelet/pods/PODUID/volumes/kubernetes.io~empty-dir/VOLUMENAME</code> \uc5d0\uc11c \ud655\uc778 \ud560 \uc218 \uc788\ub2e4</p>"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#persistant-volume-claim","title":"Persistant Volume &amp; Claim","text":"<p>PersistentVolume(PV)\ub294 \uc601\uad6c\uc801\uc778 \uc2a4\ud1a0\ub9ac\uc9c0 \ub9ac\uc18c\uc2a4\uc774\uba70 \uad00\ub9ac\uc790\uc5d0 \uc758\ud574\uc11c \uc0dd\uc131\ub418\uac70\ub098 StorageClasses\ub97c \ud1b5\ud574 \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd\ub41c \ud074\ub7ec\uc2a4\ud130\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc774\ub2e4. PersistentVolumeClaim(PVC)\ub294 \ub9ac\uc18c\uc2a4\uc5d0 PV\ub97c \ubc14\uc778\ub529\ud558\ub294 \ud558\ub098\uc758 \uc694\uccad(claim)\uc774\uba70 \uc0ac\uc6a9\uc790\uac00 \uc6a9\ub7c9\uacfc \uae30\ub2a5 \uadf8\ub9ac\uace0 \uc811\uadfc\ubaa8\ub4dc \ub4f1\uc744 \uc815\uc758\ud55c\ub2e4. \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c EKS, GKE\uc640 \uac19\uc740 \ub9e4\ub2c8\uc9c0\ub4dc \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\ub294 PVC\ub9cc \uc0dd\uc131\ud558\ub354\ub77c\ub3c4 \ub3d9\uc801\uc73c\ub85c CSI Provisioner\uac00 \uc694\uccad\ud55c \uc2a4\ud329\uc5d0 \ub9de\ucdb0\uc11c PV\ub97c \ub3d9\uc801\uc73c\ub85c \ud504\ub85c\ube44\uc800\ub2dd \ud574\uc900\ub2e4. \uc815\uc801\uc73c\ub85c \ubbf8\ub9ac PV\ub97c \ub9cc\ub4e4\uc5b4 \ub450\uace0 PVC\uc5d0 \ubc14\uc778\ub529 \ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>kind: PersistentVolumeClaim\nmetadata:\n  name: redis-pvc\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 5Gi\n</code></pre> <p> High-level Kubernetes archetypes integrated with CSI</p>"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#access-modes-claim-lifecycle","title":"Access Modes &amp; Claim Lifecycle","text":""},{"location":"hello-kubernetes/section03/storage-persistent-volume/#access-modes","title":"Access Modes","text":"<p>PVC\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 AccessModes\uac00 \uc874\uc7ac \ud55c\ub2e4. AWS, Azure\uc640 \uac19\uc774 \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \ud558\ub098\uc758 \uc11c\ubc84 \ub178\ub4dc\uc5d0\ub9cc \ubd99\ub294 \uacbd\uc6b0\ub294 RWO\uc73c\ub85c\ub9cc \uc81c\ud55c\uc774 \ub418\uace0 GCP\ucc98\ub7fc \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc774 \uc5ec\ub7ec \uc11c\ubc84 \ub178\ub4dc\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc788\ub294 \uacbd\uc6b0\ub294 RWO, ROX \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4. \uac01 \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ubc14\uc774\ub354\ubcc4\ub85c \uc81c\uacf5\ud558\ub294 \ubc94\uc704\uac00 \ub2e4\ub974\ubbc0\ub85c \uacf5\uc2dd \ud398\uc774\uc9c0\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <ul> <li>ReadWriteOnce(RWO): \ub2e8\uc77c \ub178\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ub3d9\uc77c\ud55c \ub178\ub4dc\uc5d0\uc11c \uc2e4\ud589 \uc911\uc778 \uc5ec\ub7ec \ud30c\ub4dc\uac00 \ubcfc\ub968\uc5d0 \uc561\uc138\uc2a4\ud558\ub3c4\ub85d \ud5c8\uc6a9\ud560 \uc218 \uc788\ub2e4</li> <li>ReadOnlyMany(ROX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc804\uc6a9\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4</li> <li>ReadWriteMany(RWX): \uc5ec\ub7ec \ub178\ub4dc\uc5d0\uc11c \uc77d\uae30 \uc4f0\uae30\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\ub2e4</li> <li>ReadWriteOncePod(RWOP): \ub2e8\uc77c \ud30c\ub4dc\uc5d0 \uc758\ud574 \uc77d\uae30 \uc4f0\uae30 \uad8c\ud55c\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ub420 \uc218 \uc788\uc73c\uba70 \ud558\ub098\uc758 \ud30c\ub4dc\uc5d0\uc11c\ub9cc \uc77d\uace0 \uc4f0\ub3c4\ub85d \ud655\uc2e4\ud558\uac8c \uc81c\ud55c\uc744 \ub450\uace0 \uc2f6\uc740 \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. CSI\uac00 \uc9c0\uc6d0\ud558\uace0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubc84\uc804\uc774 1.22 \uc774\uc0c1\uc77c \ub54c\ub9cc \uac00\ub2a5\ud558\ub2e4</li> </ul> <p>Info</p> <p>\ud074\ub77c\uc6b0\ub4dc \ub124\uc774\ud2f0\ube0c \ud658\uacbd\uc5d0\uc11c\ub294 RWO, RWOP\uac00 \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uba70 \uacf5\uc720\uac00 \ud544\uc694\ud55c \uc800\uc7a5\uc18c\uac00 \uaf2d \uc788\uc5b4\uc57c \ud55c\ub2e4\uba74 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\uc744 \ud1b5\ud574 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 \ud30c\uc77c\uc774\ub77c\uba74 S3\uc640 \uac19\uc740 \uc624\ube0c\uc81d\ud2b8 \uc2a4\ud1a0\ub9ac\uc9c0, \ub370\uc774\ud130\ub77c\uba74 Database, \uba54\uc2dc\uc9c0 \ub77c\uba74 \uba54\uc2dc\uc9c0\ud050\ub97c \ub300\uccb4\uc81c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section03/storage-persistent-volume/#claim-lifecycle","title":"Claim Lifecycle","text":"<ul> <li>Binding: pvc\uc5d0 \ub9de\ub294 pv\uac00 controller\uc5d0 \uc758\ud574 binding\ub41c \uc0c1\ud0dc \uc774\uba70 \ub3d9\uc801 \ud504\ub85c\ube44\uc800\ub2dd\ub41c \uacbd\uc6b0 controller\ub294 \ud56d\uc0c1 pv\uac00 pvc\uc5d0 \ubc14\uc778\ub529\ub418\uc5b4 \uc788\ub2e4</li> <li>Using: \ud074\ub7ec\uc2a4\ud130\ub294 \ud074\ub808\uc784\uc744 \uac80\uc0ac\ud558\uc5ec \ubc14\uc778\ub529\ub41c \ubcfc\ub968\uc744 \ucc3e\uace0 \ud574\ub2f9 \ubcfc\ub968\uc774 \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8\uac00 \ub418\uc5b4 pvc\uac00 \uc0ac\uc6a9\uc911\uc778 \uc0c1\ud0dc \uc774\uba70 pv\uc640 pvc\ub294 1:1\ub85c \ub9e4\ud551 \ub41c\ub2e4</li> <li>Reclaiming: PV\uc758 \ubc18\ud658(\ud68c\uc218) \uc815\ucc45\uc740 persistentVolumeReclaimPolicy\uc73c\ub85c Retain, Delete, Recycle\uc911 \ud558\ub098\ub85c \uc9c0\uc815\ud560 \uc218 \uc788\uace0, \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud560 \uacbd\uc6b0 StorageClass\uc5d0 \uc9c0\uc815\ub418\uc5b4 \uc788\ub294 ReclaimPolicy\uc5d0 \ub530\ub77c \uacb0\uc815\uc774 \ub41c\ub2e4</li> </ul>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/","title":"\ud578\uc988\uc628 3.1 HPA","text":"<p>CPU Utilization\uc744 \uae30\ubc18\uc73c\ub85c Pod Autoscaling\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Nginx Deployment\uc5d0 HPA\ub97c \uc124\uc815 \ud6c4 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c \uc790\ub3d9 \ud655\uc7a5\uc744 \ud574\ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>HPA\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#architecture","title":"Architecture","text":"<p>Nginx \ub9ac\uc18c\uc2a4, HPA \uc124\uc815 \ubc0f \ubd80\ud558\ud14c\uc2a4\ud2b8\uc6a9 busybox \uad6c\uc131</p> <p></p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#1-nginx","title":"1 Nginx \ub9ac\uc18c\uc2a4 \uad6c\uc131","text":"<p>Nginx deployment \ubc30\ud3ec \ubc0f DNS\ub85c \uc811\uadfc \ud560 \uc218 \uc788\ub3c4\ub85d service\ub97c \uad6c\uc131</p> <p>Deployments \ubc0f Service \ubc30\ud3ec</p> <p>\uc694\uccad 100m \ubc0f \ucd5c\ub300 200m CPU \uc6a9\ub7c9\uc744 \uac00\uc9c4 Nginx \uc6cc\ud06c\ub85c\ub4dc\ub97c Deployment\ub85c \ubc30\ud3ec \ubc0f service \uc124\uc815</p> <p>nginx-deployment-service.yaml</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: nginx\n  name: nginx\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: nginx\n        name: nginx\n        ports:\n        - containerPort: 80\n        resources:\n          limits:\n            cpu: 200m\n          requests:\n            cpu: 100m\n---\nkind: Service\napiVersion: v1\nmetadata:\n  name: nginx-service\nspec:\n  selector:\n    app: nginx\n  ports:\n  - port: 80\n</code></pre> <pre><code>kubectl apply -f nginx-deployment-service.yaml\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#2-metric-server","title":"2 Metric Server \uad6c\uc131","text":"<p>Metric server\ub294 \uae30\ubcf8\uc73c\ub85c \uc124\uce58\uac00 \ub418\uc5b4 \uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 Pod \uba54\ud2b8\ub9ad \uc218\uc9d1\uc744 \uc704\ud55c metic server \uad6c\uc131</p> <p>Info</p> <p>Public Cloud\uc758 Managed K8S\uc758 \uacbd\uc6b0\ub294 \uae30\ubcf8\uc73c\ub85c metric server\uac00 \uad6c\uc131\ub41c \uacbd\uc6b0\uac00 \uc788\uc73c\uba70 TOP \uc0ac\uc6a9\ub7c9 \uacb0\uacfc\uac00 \uc62c\ubc14\ub974\uac8c \ub098\uc628\ub2e4\uba74 \ud65c\uc131\ud654\uac00 \ub418\uc5b4 \uc788\ub294 \uc0c1\ud0dc\uc774\ub2e4. <code>kubectl top pods -n kube-system</code></p> <p>\ub85c\uceec Kind \ud658\uacbd\uc5d0\uc11c\ub294 metric server deployment\uc5d0 \uc544\ub798\uc640 \uac19\uc774 TLS\ub97c bypass\ud558\uace0 kubelet\uc758 address type\uc744 Internal IP\ub85c \ucd94\uac00 \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>    spec:\n      containers:\n      - args:\n        ...\n        - --kubelet-insecure-tls\n        - --kubelet-preferred-address-types=InternalIP\n</code></pre> <p>\uc544\ub798 \ud30c\uc77c\uc740 metric-server v0.6.1\uc758 install components\uc5d0 \uc704\uc758 \ub450 argument\ub97c \ucd94\uac00 \uc644\ub8cc\ub41c \ubc84\uc804\uc774\ub2e4.</p> <p>kind-metrics-server.yaml</p> <pre><code>kubectl apply -f kind-metrics-server.yaml\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#3-hpa","title":"3 HPA \uc124\uc815","text":"<p>Nginx Deployment \ub9ac\uc18c\uc2a4\uc5d0 CPU averageUtilization \uae30\ubc18\uc73c\ub85c Autoscaling \uc124\uc815</p> <p>nginx-hpa.yaml</p> <pre><code>apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: nginx\nspec:\n  maxReplicas: 5\n  metrics:\n  - resource:\n      name: cpu\n      target:\n        averageUtilization: 10\n        type: Utilization\n    type: Resource\n  minReplicas: 1\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: nginx\n</code></pre> <pre><code>kubectl apply -f nginx-hpa.yaml\n</code></pre> <p>Tip</p> <p>\ub9cc\uc57d Imperative(\uba85\ub839\ud615)\ud558\uac8c nginx deployment\uc5d0 HPA\ub97c \uc801\uc6a9 \ud558\uace0\uc790 \ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uac00\ub2a5\ud558\ub2e4 <code>bash kubectl autoscale deployment nginx --cpu-percent=10 --min=1 --max=5</code></p> <p>HPA \uc124\uc815\uc774 \uc798 \uad6c\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \ud560 \uc218 \uc788\ub2e4.</p> <pre><code>kubectl get hpa -w\n\nNAME    REFERENCE          TARGETS   MINPODS   MAXPODS   REPLICAS   AGE\nnginx   Deployment/nginx   0%/10%    1         5         1          16m\n</code></pre> <p>Info</p> <p>HPA v2\ub85c custom metric\uc744 \uae30\uc900\uc73c\ub85c autoscaling\uc744 \uc218\ud589\ud558\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c \ud29c\ud1a0\ub9ac\uc5bc\uc744 \ucc38\uace0:  autoscaling-on-multiple-metrics-and-custom-metrics</p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#4-hpa","title":"4 HPA \ub3d9\uc791 \uac80\uc99d","text":"<p>\uad6c\uc131\ub41c HPA\ub97c \uac80\uc99d\ud558\uae30 \uc704\ud574 busybox\ub85c nginx\uc5d0 \ubd80\ud558\ub97c \uc77c\uc73c\ucf1c\uc11c \ub9ac\uc18c\uc2a4\uac00 \uc790\ub3d9\uc73c\ub85c \ud655\uc7a5\uc774 \ub418\ub294\uc9c0 \ud655\uc778\ud574 \ubcf8\ub2e4.</p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#41-busybox","title":"4.1 \ubd80\ud558 \uc0dd\uc131\uc6a9 Busybox \ubc30\ud3ec","text":"<p>Busybox Pod\uc5d0\uc11c http request\ub97c \ubb34\uc81c\ud55c\uc73c\ub85c \ubc1c\uc0dd\uc2dc\ucf1c nginx\uc5d0 \ubd80\ud558\uac00 \uc77c\uc5b4\ub098\ub3c4\ub85d \ud55c\ub2e4.</p> <pre><code>kubectl run -i --tty load-generator --rm --image=busybox:1.28 --restart=Never \\\n-- /bin/sh -c \"while sleep 0.01; do wget -q -O- http://nginx-service; done\"\n</code></pre> <p>Tip</p> <p>\uc9c0\uc18d\ud574\uc11c \ubd80\ud558\ub97c \uc8fc\uae30 \uc704\ud574 busybox \uc218\ud589\uc6a9 terminal \ucc3d\uc744 \ubcc4\ub3c4\ub85c \uc5f4\uc5b4\uc11c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub3c4\ub85d \ud55c\ub2e4. \ubd80\ud558\ub97c \uc911\ub2e8\ud558\uace0 \uc2f6\uc744 \ub54c\ub294 CTRL+C \ub97c \ud1b5\ud574\uc11c Pod\ub97c \uc885\ub8cc\ud558\uba74 \ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#42-hpa","title":"4.2 HPA \ub3d9\uc791 \ud655\uc778","text":"<p>Pod\uc758 CPU \uc0ac\uc6a9\ub7c9\uc774 10% \ub118\uc5b4\uac10\uc5d0 \ub530\ub77c\uc11c \uc815\uc0c1\uc801\uc73c\ub85c replica\uac00 \ub298\uc5b4\ub098\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl get hpa -w\n\nNAME    REFERENCE          TARGETS   MINPODS   MAXPODS   REPLICAS   AGE\nnginx   Deployment/nginx   0%/10%    1         5         1          16m\n\nnginx   Deployment/nginx   12%/10%   1         5         1          17m\n\nnginx   Deployment/nginx   22%/10%   1         5         2          17m\n\nnginx   Deployment/nginx   13%/10%   1         5         3          17m\n\nnginx   Deployment/nginx   8%/10%    1         5         3          17m\n\nnginx   Deployment/nginx   3%/10%    1         5         3          18m\n\nnginx   Deployment/nginx   0%/10%    1         5         3          19m\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/horizontal-pod-autoscaling/#clean-up","title":"Clean Up","text":"<p>\ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c</p> <pre><code>kubectl delete -f nginx-hpa.yaml\nkubectl delete -f nginx-deployment-service.yaml\n</code></pre> <p>kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/","title":"\ud578\uc988\uc628 3.3 StatefulSet","text":"<p>StatefulSet\ub85c Mariadb Cluster\ub97c \uad6c\uc131 \ud574\ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c Mariadb \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131\uc744 \uc704\ud574 Persistent Volume\uc744 \ud3ec\ud568\ud558\uc5ec StatefulSet\ub85c \ubc30\ud3ec \ud574\ubcf4\ub294 \uc2e4\uc2b5</p> <p>Example from: https://mariadb.org/mariadb-k8s-how-to-replicate-mariadb-in-k8s</p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>StatefulSet\uc758 \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p> <p>Demo \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0dd\uc131:</p> <pre><code>kubectl create ns mariadb\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#architecture","title":"Architecture","text":"<p>StatefulSet, Service, Persistent Volume\uc744 \ud1b5\ud574 Mariadb Cluster \uad6c\uc131</p> <p></p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#1-configmap-service-secret","title":"1 ConfigMap, Service, Secret \uad6c\uc131","text":"<p>Mariadb Cluster\uc758 Primary, Secondary \uc124\uc815 \ud30c\uc77c\uc5d0 \ub300\ud574 ConfigMap\uc73c\ub85c \uad6c\uc131 \ubc0f Mariadb Pod\uc5d0 DNS\ub85c \ud1b5\uc2e0\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud558\uae30 \uc704\ud574 Headless Service\ub97c \uad6c\uc131</p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#11-configmap","title":"1.1 ConfigMap \uc124\uc815","text":"<p>mariadb-replica-sts.yaml</p> <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  namespace: mariadb\n  name: mariadb-configmap\ndata:\n\n  primary.cnf: |\n    [mariadb]\n    log-bin                         # enable binary logging\n    log-basename=my-mariadb         # used to be independent of hostname changes (otherwise is in datadir/mysql)\n\n  replica.cnf: |\n    [mariadb]\n    log-basename=my-mariadb         # used to be independent of hostname changes (otherwise is in datadir/mysql)\n\n  primary.sql: |\n    CREATE USER 'repluser'@'%' IDENTIFIED BY 'replsecret';\n    GRANT REPLICATION REPLICA ON *.* TO 'repluser'@'%';\n    CREATE DATABASE primary_db;\n\n  secondary.sql: |\n    # We have to know name of sts (`mariadb`) and\n    # service `mariadb-service` in advance as an FQDN.\n    # No need to use master_port\n    CHANGE MASTER TO\n    MASTER_HOST='mariadb-0.mariadb-service.mariadb.svc.cluster.local',\n    MASTER_USER='repluser',\n    MASTER_PASSWORD='replsecret',\n    MASTER_CONNECT_RETRY=10;\n</code></pre> <p>Info</p> <p>\ub9cc\uc57d namespace\ub098 service \uc774\ub984 \ub4f1\uc744 \ubcf8\uc778\uc758 \ud658\uacbd\uc5d0 \ub9de\ucdb0\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 MASTER_HOST \uac12\uc744 \ubcc0\uacbd\ud574\uc57c \ud55c\ub2e4 <code>mariadb-0.&lt;headless service name&gt;.&lt;namespace name&gt;.svc.cluster.local</code></p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#12-headless-service","title":"1.2 Headless Service \uc124\uc815","text":"<p>DNS\ub85c Primary, Secondary\uac04 \ud1b5\uc2e0\uc744 \uc704\ud55c Headless Serivce \uc124\uc815</p> <p>mariadb-replica-sts.yaml</p> <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  namespace: mariadb\n  name: mariadb-service\n  labels:\n    app: mariadb\nspec:\n  ports:\n  - port: 3306\n    name: mariadb-port\n  clusterIP: None\n  selector:\n    app: mariadb\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#13-secret","title":"1.3 Secret \uc124\uc815","text":"<p>Secret\uc5d0 DB root password\ub97c \uc800\uc7a5</p> <p>Info</p> <p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c Secret\uc740 \ud14d\uc2a4\ud2b8\ub97c base64\ub85c \uc778\ucf54\ub529\ud558\ub294 \uac83\uc774\uba70 \uc554\ud638\ud654(encryption)\ub294 \uc544\ub2c8\uae30 \ub54c\ubb38\uc5d0 Hashicorp Vault\ub098 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Secret Manager \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubcf4\uc548 \uce21\uba74\uc5d0\uc11c \ub6f0\uc5b4\ub098\ub2e4.</p> <p>mariadb-replica-sts.yaml</p> <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n    namespace: mariadb\n    name: mariadb-secret\ntype: Opaque\ndata:\n  mariadb-root-password: c2VjcmV0 # echo -n 'secret'|base64\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#14-configmap-service-secret","title":"1.4 ConfigMap, Service, Secret \uc124\uc815","text":"<p>ConfigMap, Service, Secret\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec \ub418\uc5c8\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl get svc,configmap,secret\nNAME                      TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE\nservice/mariadb-service   ClusterIP   None         &lt;none&gt;        3306/TCP   24s\n\nNAME                          DATA   AGE\nconfigmap/kube-root-ca.crt    1      4d14h\nconfigmap/mariadb-configmap   4      24s\n\nNAME                    TYPE     DATA   AGE\nsecret/mariadb-secret   Opaque   1      24s\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#2-statefulset","title":"2 StatefulSet \uad6c\uc131","text":"<p>Mariadb Cluster\uc758 \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\uc778 MariaDB\ub97c StatefulSet\uc73c\ub85c \ubc30\ud3ec</p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#21-statefulset","title":"2.1 StatefulSet \uc124\uc815","text":"<p>\uc608\uc81c\uc758 MariaDB Pod\ub294 initContainers\uc640 Containers\ub85c \uad6c\uc131\uc774 \ub418\uc5b4\uc838 \uc788\uc73c\uba70 initContainers(name: init-mariadb)\ub97c \ud1b5\ud574\uc11c \uc124\uc815\uac12(configmap)\uc744 /etc/mysql/conf.d/ \ubcfc\ub968\uc5d0 \ucd08\uae30 \uad6c\uc131 \ud558\ub294 \uc791\uc5c5\uc744 \uc9c4\ud589 \ud558\uc5ec \uc2e4\uc81c \uc6cc\ud06c\ub85c\ub4dc\ub294 MariaDB containers(name: mariadb)\uc5d0\uc11c \uc11c\ube44\uc2a4 \ub41c\ub2e4</p> <p>mariadb-replica-sts.yaml</p> <pre><code>apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  namespace: mariadb\n  name: mariadb\nspec:\n  serviceName: \"mariadb-service\"\n  replicas: 3\n  selector:\n    matchLabels:\n      app: mariadb\n  template:\n    metadata:\n      labels:\n        app: mariadb\n    spec:\n      initContainers:\n      - name: init-mariadb\n        image: mariadb\n        imagePullPolicy: Always\n        command:\n        - bash\n        - \"-c\"\n        - |\n          set -ex\n          echo 'Starting init-mariadb';\n          # Check config map to directory that already exists\n          # (but must be used as a volume for main container)\n          ls /mnt/config-map\n          # Statefulset has sticky identity, number should be last\n          [[ `hostname` =~ -([0-9]+)$ ]] || exit 1\n          ordinal=${BASH_REMATCH[1]}\n          # Copy appropriate conf.d files from config-map to\n          # mariadb-config volume (emptyDir) depending on pod number\n          if [[ $ordinal -eq 0 ]]; then\n            # This file holds SQL for connecting to primary\n            cp /mnt/config-map/primary.cnf /etc/mysql/conf.d/server-id.cnf\n            # Create the users needed for replication on primary on a volume\n            # initdb (emptyDir)\n            cp /mnt/config-map/primary.sql /docker-entrypoint-initdb.d\n          else\n            # This file holds SQL for connecting to secondary\n            cp /mnt/config-map/replica.cnf /etc/mysql/conf.d/server-id.cnf\n            # On replicas use secondary configuration on initdb volume\n            cp /mnt/config-map/secondary.sql /docker-entrypoint-initdb.d\n          fi\n          # Add an offset to avoid reserved server-id=0 value.\n          echo server-id=$((3000 + $ordinal)) &gt;&gt; etc/mysql/conf.d/server-id.cnf\n          ls /etc/mysql/conf.d/\n          cat /etc/mysql/conf.d/server-id.cnf\n        volumeMounts:\n          - name: mariadb-config-map\n            mountPath: /mnt/config-map\n          - name: mariadb-config\n            mountPath: /etc/mysql/conf.d/\n          - name: initdb\n            mountPath: /docker-entrypoint-initdb.d\n      restartPolicy: Always\n      containers:\n      - name: mariadb\n        image: mariadb\n        ports:\n        - containerPort: 3306\n          name: mariadb-port\n        env:\n        # Using Secrets\n        - name: MARIADB_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mariadb-secret\n              key: mariadb-root-password\n        - name: MYSQL_INITDB_SKIP_TZINFO\n          value: \"1\"\n        # Mount volume from persistent volume claim\n        volumeMounts:\n        - name: datadir\n          mountPath: /var/lib/mysql/\n        - name: mariadb-config\n          mountPath: /etc/mysql/conf.d/\n        - name: initdb\n          mountPath: /docker-entrypoint-initdb.d\n      volumes:\n      - name: mariadb-config-map\n        configMap:\n          name: mariadb-configmap\n          #defaultMode: 0544\n      - name: mariadb-config\n        emptyDir: {}\n      - name: initdb\n        emptyDir: {}\n\n  volumeClaimTemplates:\n  - metadata:\n      name: datadir\n    spec:\n      accessModes: [ \"ReadWriteOnce\" ]\n      resources:\n        requests:\n          storage: 300M\n</code></pre> <pre><code>kubectl apply -f mariadb-replica-sts.yaml\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#22-pod-volume","title":"2.2 \ubc30\ud3ec\ub41c Pod \ubc0f Volume \ud655\uc778","text":"<p>Pod \ubc30\ud3ec\uac00 \uc815\uc0c1\uc801\uc73c\ub85c 3\ub300(replicas: 3)\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl get pods -l app=mariadb\nNAME        READY   STATUS    RESTARTS   AGE\nmariadb-0   1/1     Running   0          11s\nmariadb-1   1/1     Running   0          11s\nmariadb-2   1/1     Running   0          11s\n</code></pre> <p>Info</p> <p>\uae30\ubcf8\uc73c\ub85c Dynamic Provisioner\uac00 \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c PV\ub294 PVC \uc694\uccad\uc2dc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131</p> <p>StatefulSet \ubc30\ud3ec\uc2dc PV \uc0dd\uc131 \ubc0f PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778</p> <pre><code>kubectl get pv,pvc\n\nNAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS        CLAIM                                  STORAGECLASS   REASON   AGE\npersistentvolume/pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0   300M       RWO            Delete           Bound         mariadb/datadir-mariadb-0              standard                20s\npersistentvolume/pvc-3c897244-b250-4a5e-9dd3-324da13696aa   300M       RWO            Delete           Bound         mariadb/datadir-mariadb-1              standard                20s\npersistentvolume/pvc-951c940c-5d9b-4f46-afe3-3ee94435d491   300M       RWO            Delete           Bound         mariadb/datadir-mariadb-2              standard                20s\n\nNAME                                      STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\npersistentvolumeclaim/datadir-mariadb-0   Bound    pvc-0220af2d-8020-4a3b-96b5-6195aa3945b0   300M       RWO            standard       20s\npersistentvolumeclaim/datadir-mariadb-1   Bound    pvc-3c897244-b250-4a5e-9dd3-324da13696aa   300M       RWO            standard       20s\npersistentvolumeclaim/datadir-mariadb-2   Bound    pvc-951c940c-5d9b-4f46-afe3-3ee94435d491   300M       RWO            standard       20s\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#23-mariadb-cluster","title":"2.3 MariaDB Cluster \uad6c\uc131 \ud655\uc778","text":"<p>\ubc30\ud3ec\ub41c MariaDB Cluster\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary/Secondary \uad6c\uc131\uc744 \uac00\uc9c0\uace0 \uc788\ub294\uc9c0 \uac80\uc99d</p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#primary-db-dummy-data","title":"Primary DB\uc5d0 Dummy Data \ucd94\uac00","text":"<p>PrimaryDB(mariadb-0) Pod\uc5d0 shell \uc811\uadfc</p> <p>Info</p> <p>secret\uc5d0\uc11c mariadb-root-password \ubc14\uafbc \uacbd\uc6b0 \ud574\ub2f9 password\ub85c \ubcc0\uacbd \ud558\uc5ec \uc811\uadfc</p> <pre><code>kubectl exec -it mariadb-0 -- mariadb -uroot -psecret\n\nDefaulted container \"mariadb\" out of: mariadb, init-mariadb (init)\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 8\n.....\n\n# Secondary\uc5d0\uc11c repluser\ub85c Binary log dump\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c0\uace0 \uc788\ub294\uc9c0 \ud655\uc778\nMariaDB [primary_db]&gt; SHOW PROCESSLIST;\n+----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+\n| Id | User     | Host              | db         | Command     | Time  | State                                                         | Info             | Progress |\n+----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+\n|  4 | repluser | 10.244.1.22:44876 | NULL       | Binlog Dump | 60552 | Master has sent all binlog to slave; waiting for more updates | NULL             |    0.000 |\n|  5 | repluser | 10.244.3.25:53204 | NULL       | Binlog Dump | 60544 | Master has sent all binlog to slave; waiting for more updates | NULL             |    0.000 |\n|  8 | root     | localhost         | primary_db | Query       |     0 | starting                                                      | SHOW PROCESSLIST |    0.000 |\n+----+----------+-------------------+------------+-------------+-------+---------------------------------------------------------------+------------------+----------+\n3 rows in set (0.001 sec)\n\nMariaDB [(none)]&gt; SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| primary_db         |\n| sys                |\n+--------------------+\n5 rows in set (0.004 sec)\n\nMariaDB [(none)]&gt; USE primary_db;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nMariaDB [primary_db]&gt;\n\n# Dummy Data \ucd94\uac00\ub97c \uc704\ud55c Table \uc0dd\uc131\nMariaDB [primary_db]&gt; CREATE TABLE test (\n    -&gt;         id INTEGER NOT NULL AUTO_INCREMENT,\n    -&gt;         content VARCHAR(255) NOT NULL,\n    -&gt;         PRIMARY KEY (id)\n    -&gt; ) ;\nQuery OK, 0 rows affected (0.013 sec)\n\n# Dummy Data \ucd94\uac00\nMariaDB [primary_db]&gt; INSERT INTO `test` (\n    -&gt;     `content`)\n    -&gt;     values\n    -&gt;     ('first');\nQuery OK, 1 row affected (0.007 sec)\n\nMariaDB [primary_db]&gt; SELECT * FROM test;\n+----+---------+\n| id | content |\n+----+---------+\n|  1 | first   |\n+----+---------+\n1 row in set (0.001 sec)\n</code></pre> <p>dummy table, data \uc148\ud50c \ucffc\ub9ac: init-table-data.txt</p>"},{"location":"hello-kubernetes/section03/handson/statefulset/#secondary-db-data","title":"Secondary DB\uc5d0\uc11c Data \ud655\uc778","text":"<p>\ub450\uac1c\uc758 Secondary(mariadb-1 \ud639\uc740 2) \uc911 \ud558\ub098\uc5d0 shell\ub85c \uc811\uadfc</p> <pre><code>kubectl exec -it mariadb-2 -- mariadb -uroot -psecret\n\nDefaulted container \"mariadb\" out of: mariadb, init-mariadb (init)\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 6\nServer version: 10.9.2-MariaDB-1:10.9.2+maria~ubu2204 mariadb.org binary distribution\n\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]&gt;\n\n# Secondary\uac00 \uc815\uc0c1\uc801\uc73c\ub85c Primary\uc758 \ub370\uc774\ud130\ub97c Dumping \ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778\nMariaDB [(none)]&gt; SHOW SLAVE STATUS \\G;\n*************************** 1. row ***************************\n                Slave_IO_State: Waiting for master to send event\n                   Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local\n                   Master_User: repluser\n                   Master_Port: 3306\n                 Connect_Retry: 10\n               Master_Log_File: my-mariadb-bin.000002\n           Read_Master_Log_Pos: 2492\n                Relay_Log_File: my-mariadb-relay-bin.000004\n                 Relay_Log_Pos: 2796\n         Relay_Master_Log_File: my-mariadb-bin.000002\n              Slave_IO_Running: Yes\n...\n                 Parallel_Mode: optimistic\n                     SQL_Delay: 0\n           SQL_Remaining_Delay: NULL\n       Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates\n              Slave_DDL_Groups: 7\nSlave_Non_Transactional_Groups: 0\n    Slave_Transactional_Groups: 5\n1 row in set (0.001 sec)\n\nERROR: No query specified\n\nMariaDB [(none)]&gt; USE primary_db\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\n\n# Dummy Data \ud655\uc778\nMariaDB [primary_db]&gt; SELECT * FROM test;\n+----+---------+\n| id | content |\n+----+---------+\n|  1 | first   |\n+----+---------+\n1 row in set (0.001 sec)\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#24-mariadb-cluster","title":"2.4 MariaDB Cluster \uc2a4\ucf00\uc77c \uc870\uc815","text":"<p>replicaset\uc758 \uc124\uc815\uc744 \uc5c5\ub370\uc774\ud2b8 \ud558\uba70 cluster\uc758 \uc2a4\ucf00\uc77c \uc870\uc808 \ubc0f \uc811\uadfc \ud655\uc778</p> <pre><code>kubectl get pods -l app=mariadb\n\nNAME        READY   STATUS    RESTARTS   AGE\nmariadb-0   1/1     Running   0          24h\nmariadb-1   1/1     Running   0          24h\nmariadb-2   1/1     Running   0          24h\n\n#replica \uac1c\uc218\ub97c 4\uac1c\ub85c \uc870\uc815(+1)\nkubectl scale sts mariadb --replicas=4\nstatefulset.apps/mariadb scaled\n\nkubectl get pods -l app=mariadb\nNAME        READY   STATUS            RESTARTS   AGE\nmariadb-0   1/1     Running           0          2h\nmariadb-1   1/1     Running           0          2h\nmariadb-2   1/1     Running           0          2h\nmariadb-3   0/1     PodInitializing   0          8s\n</code></pre> <p>\ucd94\uac00 \ubc30\ud3ec\ub41c secondary db(<code>mariadb-3</code>)\ub3c4 \uc815\uc0c1\uc801\uc73c\ub85c primary\ub97c \ubc14\ub77c\ubcf4\uace0 \uc788\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl exec -it mariadb-3 -- mariadb -uroot -psecret\nDefaulted container \"mariadb\" out of: mariadb, init-mariadb (init)\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 6\n...\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]&gt; SHOW SLAVE STATUS \\G;\n*************************** 1. row ***************************\n                Slave_IO_State: Waiting for master to send event\n                   Master_Host: mariadb-0.mariadb-service.mariadb.svc.cluster.local\n                   Master_User: repluser\n                   Master_Port: 3306\n                 Connect_Retry: 10\n               Master_Log_File: my-mariadb-bin.000002\n               ...\n                 Parallel_Mode: optimistic\n                     SQL_Delay: 0\n           SQL_Remaining_Delay: NULL\n       Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates\n              Slave_DDL_Groups: 7\nSlave_Non_Transactional_Groups: 0\n    Slave_Transactional_Groups: 5\n1 row in set (0.000 sec)\n\nERROR: No query specified\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/statefulset/#clean-up","title":"Clean Up","text":"<p>\ubc30\ud3ec\ud55c StatefulSet \ub9ac\uc18c\uc2a4 \uc0ad\uc81c</p> <pre><code>kubectl delete -f mariadb-replica-sts.yaml\n</code></pre> <p>Warn</p> <p>StatefulSet\uc744 \uc0ad\uc81c\ub098 \uc2a4\ucf00\uc77c\ub2e4\uc6b4\ud574\ub3c4 \ub9e4\ud551\uc774 \ub418\uc5b4 \uc788\ub294 \ubcfc\ub968\uc740 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub418\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 PV, PVC\ub294 \uc218\ub3d9\uc73c\ub85c \uc0ad\uc81c</p> <p>kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/","title":"\ud578\uc988\uc628 3.2 Persistent Volume","text":"<p>Persistent Volume \uad6c\uc131 \ubc0f Pod\uc5d0 \uc0dd\uc131\ud55c \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5</p> <p>\ub85c\uceec \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c EmptyDir\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud574\ubcf4\ub294 \uc2e4\uc2b5</p>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#_1","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<p>Kind Kubernetes Cluster \uad6c\uc131: \uc2e4\uc2b5 \ub9c1\ud06c</p> <p>Kubernetes Volume \uc774\ud574: \uad00\ub828 \ub9c1\ud06c</p>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#architecture","title":"Architecture","text":"<p>Ephemeral\uacfc Persistent Volume\uc744 \uac01\uac01 \uad6c\uc131\ud558\uace0 Pod\uc5d0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8</p> <p></p>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#1-ephemeral-volume","title":"1 Ephemeral Volume","text":"<p>\uc784\uc2dc\ub85c \ub370\uc774\ud130\ub97c \uc801\uc7ac\ud574\uc57c \ud558\ub294 \ubcfc\ub968\uc744 \ub9cc\ub4e4\uae30 \uc704\ud574 \ubcfc\ub968 \uc18d\uc131\uc744 emptyDir\ub85c \uc120\uc5b8\ud55c\ub2e4</p>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#11-emptydir","title":"1.1 EmptyDir \uc124\uc815","text":"<p>\ud30c\ub4dc \uc0dd\uc131\uc2dc emptydir\uc744 \ubcfc\ub968\uc73c\ub85c \ub9c8\uc6b4\ud2b8 \ud558\ub3c4\ub85d \uc124\uc815</p> <p>busybox-emptydir.yaml</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: busybox-sleep-1000\nspec:\n  containers:\n  - name: busybox\n    image: busybox:1.28\n    args:\n    - sleep\n    - \"1000\"\n    volumeMounts:\n    - mountPath: /data\n      name: empty-data\n  volumes:\n  - name: empty-data\n    emptyDir: {}\n</code></pre> <pre><code>kubectl apply -f busybox-emptydir.yaml\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#12-volume","title":"1.2 Volume \ud655\uc778","text":"<pre><code># Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131\nkubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd &gt; /data/test.txt\"\n# Pod\uc758 UID \ud655\uc778\nkubectl get pods/busybox-sleep-1000 -o jsonpath='{.metadata.uid}'\n# Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778\nkubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}'\n</code></pre> <p>Pod\uac00 \uae30\ub3d9\uc911\uc778 Node\uc5d0\uc11c \uc2e4\uc81c emptyDir\uc774 \ub9cc\ub4e4\uc5b4\uc838 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc784\uc758\ub85c \uc0dd\uc131\ud55c \ud30c\uc77c\uc774 \ubcf4\uc774\ub294\uc9c0 \ud655\uc778</p> <pre><code># \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4\ndocker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash\n</code></pre> <pre><code>root@kind-worker3:/# ls -al /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/\ntotal 12\ndrwxrwxrwx 2 root root 4096 Aug  3 20:31 .\ndrwxr-xr-x 3 root root 4096 Aug  3 20:29 ..\n-rw-r--r-- 1 root root    5 Aug  3 20:31 test.txt\nroot@kind-worker3:/# cat /var/lib/kubelet/pods/fd0b963c-3ef0-4ebb-be52-258f935f161b/volumes/kubernetes.io~empty-dir/empty-data/test.txt\nabcd\n</code></pre> <p>Pod \uc0ad\uc81c, \uc7ac\uc0dd\uc131\uc2dc \ube48 \ubcfc\ub968\uc73c\ub85c \ubd99\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl delete pod/busybox-sleep-1000\nkubectl apply -f busybox-emptydir.yaml\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#2-persistent-volume","title":"2 Persistent Volume","text":"<p>\ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \ubcf4\uad00\uc744 \uc704\ud574\uc11c\ub294 Persistent Volume\uc744 \uc0ac\uc6a9\ud574\uc57c \ud558\uba70 \uc9c1\uc811 Static \ud558\uac8c PVC\uc640 PV\ub97c \ubc14\uc778\ub529\uc2dc\ucf1c\uc8fc\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc CSI Provider\ub97c \ud1b5\ud574\uc11c Dynamic \ud558\uac8c \ub9e4\ud551\uc744 \uc2dc\ud0ac \uc218\ub3c4 \uc788\ub2e4. Kind \ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c\ub294 \uae30\ubcf8\uc73c\ub85c local-path-provisioner\uac00 Dynamic Provisioner\ub85c \uad6c\uc131\uc774 \ub418\uc5b4 \uc788\uc5b4 \ubcc4\ub3c4\uc758 CSI Provisioner\ub97c \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. \ud574\ub2f9 \ub9ac\uc18c\uc2a4\ub294 <code>local-path-storage</code> \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0 \uad6c\uc131 \ub418\uc5b4 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#21-persistent-volume-claim","title":"2.1 Persistent Volume Claim \uad6c\uc131","text":"<p>busybox-data-pvc.yaml</p> <pre><code>apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: data-pv-claim\nspec:\n  storageClassName: standard\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n</code></pre> <pre><code>kubectl apply -f busybox-data-pvc.yaml\n</code></pre> <p>Info</p> <p>StorageClass\uc5d0 VOLUMEBINDINGMODE\uac00 WaitForFirstConsumer\ub77c\uba74 PV\uac00 \uc2e4\uc81c\ub85c \uc0dd\uc131\ub418\ub294 \uc2dc\uc810\uc740 PVC\uac00 \uc0dd\uc131\ub41c \uc2dc\uc810\uc774 \uc544\ub2cc \uc2e4\uc81c \ud30c\ub4dc \ub9ac\uc18c\uc2a4\uac00 PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\ub294 \uc2dc\uc810\uc5d0 \uc0dd\uc131\uc774 \ub41c\ub2e4</p> <pre><code>kubectl get sc\nNAME                 PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE\nstandard (default)   rancher.io/local-path          Delete          WaitForFirstConsumer   false                  25h\n\nkubectl get pv,pvc\nNAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                 STORAGECLASS    REASON   AGE\n\nNAME                                   STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS    AGE\npersistentvolumeclaim/data-pv-claim    Pending                                                                        standard        24s\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#22-pod-volume","title":"2.2 Pod \ubc30\ud3ec \ubc0f Volume \ub9c8\uc6b4\ud2b8","text":"<p>\uc704\uc5d0\uc11c \uc694\uccad\ud55c PVC\ub97c BusyBox \ud30c\ub4dc\uc5d0 \ub9c8\uc6b4\ud2b8</p> <p>busybox-pv.yaml</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: busybox-sleep-1000\nspec:\n  containers:\n  - name: busybox\n    image: busybox:1.28\n    args:\n    - sleep\n    - \"1000\"\n    volumeMounts:\n    - mountPath: /data\n      name: data-volume\n  volumes:\n  - name: data-volume\n    persistentVolumeClaim:\n      claimName: data-pv-claim\n</code></pre> <pre><code>kubectl apply -f busybox-pv.yaml\n</code></pre> <p>Pod \ubc30\ud3ec\uc2dc Dynamic\ud558\uac8c PV\uae4c\uc9c0 \uc0dd\uc131\ub418\uc5b4 PVC\uc5d0 Bound \ub41c \uac83\uc744 \ud655\uc778</p> <pre><code>kubectl get pod,pvc,pv\nNAME                          READY   STATUS    RESTARTS   AGE\npod/busybox-sleep-1000        1/1     Running   0          28s\n\nNAME                                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS    AGE\npersistentvolumeclaim/data-pv-claim    Bound    pvc-c2e346e2-c9df-410a-835d-9b1a06eda595   1Gi        RWO            standard        2m27s\n\nNAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                 STORAGECLASS    REASON   AGE\npersistentvolume/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595   1Gi        RWO            Delete           Bound    demo/data-pv-claim    standard                 24s\n</code></pre> <p>Pod\uc758 Data \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc784\uc2dc \ud30c\uc77c \uc0dd\uc131</p> <pre><code>kubectl exec -it busybox-sleep-1000 -- /bin/sh -c \"echo abcd &gt; /data/test.txt\"\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#23-volume","title":"2.3 Volume \ud655\uc778","text":"<p>\ud30c\ub4dc\uac00 \uc0dd\uc131\ub41c \uc6cc\ucee4 \ub178\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec local-path-provisioner \ub514\ub809\ud1a0\ub9ac\uc5d0 PV \ud3f4\ub354\uac00 \uc0dd\uc131\ub418\uc5b4 \uc0dd\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc788\ub294\uc9c0 \ud655\uc778</p> <pre><code># Pod\uac00 \uae30\ub3d9\uc911\uc778 Node \ud655\uc778\nkubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}'\n# \uc6cc\ucee4\ub178\ub4dc \uc811\uadfc\uc744 \uc704\ud55c docker \uba85\ub839\uc5b4\ndocker exec -it $(kubectl get pods/busybox-sleep-1000 -o jsonpath='{.spec.nodeName}') /bin/bash\n</code></pre> <pre><code>root@kind-worker:/# ls -al /var/local-path-provisioner/pvc-c2e346e2-c9df-410a-835d-9b1a06eda595_demo_data-pv-claim/\ntotal 12\ndrwxrwxrwx 2 root root 4096 Aug  3 23:03 .\ndrwxr-xr-x 3 root root 4096 Aug  3 22:57 ..\n-rw-r--r-- 1 root root    6 Aug  3 23:03 test.txt\n</code></pre> <p>Pod \uc0ad\uc81c \ubc0f \ub3d9\uc77c\ud55c PVC\ub97c \ub9c8\uc6b4\ud2b8 \ud558\uba70 \uc7ac\uc0dd\uc131</p> <pre><code>kubectl delete pod/busybox-sleep-1000\nkubectl apply -f busybox-pv.yaml\n</code></pre> <p>Pod\ub97c \uc0ad\uc81c\ud558\ub354\ub77c\ub3c4 \uae30\uc874\uc5d0 \uc791\uc131\ud55c \uc784\uc2dc \ud30c\uc77c\uc774 \uc601\uad6c\uc801\uc73c\ub85c \ub0a8\uc544\uc11c \uc77d\uace0 \uc4f0\uae30\uac00 \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778: Pod\ub294 \uc0ad\uc81c \ub418\uc5c8\ub354\ub77c\ub3c4 Volume\uc740 \uc0ad\uc81c \ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130\ub97c \uc601\uad6c\uc801\uc73c\ub85c \uad00\ub9ac \uac00\ub2a5</p> <pre><code>kubectl exec -it busybox-sleep-1000 -- /bin/sh\n/ # cd /data/\n/data # ls\ntest.txt\n/data # ls -al\ntotal 12\ndrwxrwxrwx    2 root     root          4096 Aug  3 22:07 .\ndrwxr-xr-x    1 root     root          4096 Aug  3 22:38 ..\n-rw-r--r--    1 root     root             6 Aug  3 22:07 test.txt\n</code></pre>"},{"location":"hello-kubernetes/section03/handson/storage-persistent-volume/#clean-up","title":"Clean Up","text":"<p>\uc2e4\uc2b5 \uc644\ub8cc \ud6c4 kind cluster \uc0ad\uc81c</p> <pre><code>kind delete cluster\n</code></pre>"},{"location":"hello-kubernetes/section04/container-network-interface/","title":"4.1 Container Network Interface","text":""},{"location":"hello-kubernetes/section04/container-network-interface/#cni","title":"CNI","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section04/container-resource-interface/","title":"4.3 Container Resource Interface","text":""},{"location":"hello-kubernetes/section04/container-resource-interface/#cri","title":"CRI","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section04/container-storage-interface/","title":"4.2 Container Storage Interface","text":""},{"location":"hello-kubernetes/section04/container-storage-interface/#csi","title":"CSI","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section04/coredns/","title":"4.4 CoreDNS","text":""},{"location":"hello-kubernetes/section04/coredns/#coredns","title":"CoreDNS","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section05/backup-management/","title":"5.8 Backup Management","text":""},{"location":"hello-kubernetes/section05/backup-management/#velero","title":"Velero","text":"<p>velero</p> <p>TODO</p>"},{"location":"hello-kubernetes/section05/cert-management/","title":"5.5 Certificate Management","text":""},{"location":"hello-kubernetes/section05/cert-management/#lets-encrypt","title":"Let's Encrypt","text":"<p>letsencrypt</p> <p>TODO</p>"},{"location":"hello-kubernetes/section05/continuous-deployment/","title":"5.7 Continuous Deployment","text":""},{"location":"hello-kubernetes/section05/continuous-deployment/#argocd","title":"ArgoCD","text":"<p>argocd</p> <p>TODO</p>"},{"location":"hello-kubernetes/section05/dns-management/","title":"5.4 DNS Management","text":""},{"location":"hello-kubernetes/section05/dns-management/#external-dns","title":"External DNS","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section05/ingress-controller/","title":"Ingress Controller","text":"<p>Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \ud2b8\ub808\ud53d \uc815\ucc45\uc758 \uc9d1\ud569\uc774\ub2e4. Ingress Controller\ub294 Ingress\ub97c \uad6c\ud604, \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774\ub2e4. \ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 Ingress Controller\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140 \ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc0c1\uc6a9 \ud639\uc740 \uc624\ud508\uc18c\uc2a4 Ingress Controller (Additional)\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section05/ingress-controller/#cloud-native-ingress-controller","title":"Cloud Native Ingress Controller","text":"<p>EKS, GKE\uc640 \uac19\uc740 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uae30\ubcf8 Ingress Class\ub294 AWS: Application Load Balancer, GCP: GCE L7 Load Balancer\uc640 \uac19\uc740 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4. \ud2b9\ud788 \ud074\ub77c\uc6b0\ub4dc\uc5d0\uc11c \uc9c1\uc811 \uc81c\uacf5\ud558\ub294 LB\ub294 \uae30\uc220\uc801\uc778 \uc131\uc219\ub3c4\uac00 \ub192\uace0, \uae30\uc874 VM\uacfc\ub3c4 (\uc218\ub3d9\uc73c\ub85c)\uc5f0\ub3d9\ud560 \uc218 \uc788\uc73c\uba70, \uc0ac\uc6a9\uc790 \uc785\uc7a5\uc5d0\uc11c \ubcc4\ub3c4\uc758 \uad00\ub9ac\uac00 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4. \ubcc4\ub3c4\uc758 \ucee4\uc2a4\ud140 \ud55c Load Balancing \uae30\ub2a5\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4\uba74 \uc81c\uacf5\ud558\ub294 LB\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ud6a8\uc728\uc801\uc774\ub2e4. \ub9cc\uc57d\uc5d0 Managed \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc544\ub2cc \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd \uc704\uc5d0\uc11c Kops\uac19\uc740 \ub3c4\uad6c\ub97c \ud1b5\ud574\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc9c1\uc811 \uad6c\uc131 \ud55c\ub2e4\uace0 \ud574\ub3c4 Custom Resource Definitions (CRDs)\uac00 \uc81c\uacf5\ub418\uae30 \ub54c\ubb38\uc5d0 \uc190\uc27d\uac8c LB \ub9ac\uc18c\uc2a4\ub97c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4.</p> <p></p>  \ucd9c\ucc98: AWS Blog - Kubernetes Ingress with AWS ALB Ingress Controller"},{"location":"hello-kubernetes/section05/ingress-controller/#ingress-nginx-controller","title":"Ingress Nginx Controller","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc790\uccb4\ub294 \ud074\ub77c\uc6b0\ub4dc\uc5d0 \uc885\uc18d\uc801\uc774\uc9c0 \uc54a\ub294 \uc560\uadf8\ub178\uc2a4\ud2f1\ud55c \ub3c4\uad6c\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c Ingress Controller\uac00 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c \uc624\ud508\uc18c\uc2a4 ingress \uc911\uc5d0\uc11c\ub294 Ingress-Nginx\uac00 \uc720\uba85\ud558\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uacf5\uc2dd\uc801\uc73c\ub85c \uc9c0\uc6d0\uc744 \ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \uc774\ub2e4. \ub2e8 Nginx\uac00 \uc9c1\uc811 \uad00\ub9ac\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uac00 \uc544\ub2c8\ub77c Kubernetes \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uad00\ub9ac\ub97c \ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uc774\uae30 \ub54c\ubb38\uc5d0 \uae30\uc874\uc5d0 \uc4f0\ub358 \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc640 \uac19\uc740 rich\ud55c Nginx \uae30\ub2a5\ub4e4\uc744 \uadf8\ub300\ub85c \uc124\uc815\ud558\uace0 \uad00\ub9ac\ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 Nginx-Ingress\ub97c \uc4f0\ub294 \uac83\ub3c4 \ubc29\ubc95\uc774\ub2e4. \ub9cc\uc57d Nginx Ingress\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud558\uc600\ub2e4\uba74 \ub458 \uac04\uc758 \uc5b4\ub5a4 \ucc28\uc774\uc810\uc774 \uc788\ub294\uc9c0 \ud55c\ubc88 \ud655\uc778\ud574 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4.</p> <p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller vs. NGINX Ingress Controller</p>"},{"location":"hello-kubernetes/section05/ingress-controller/#ingress-nginx-setup","title":"Ingress Nginx Setup","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0 Ingress Controller\ub97c \uc14b\uc5c5\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \ud65c\uc131\ud654\ud558\ub294 \ubc29\uc548\uc744 \uc18c\uac1c\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section05/ingress-controller/#prerequisites","title":"Prerequisites","text":"<ul> <li>Helm3</li> <li>EKS, GKE\uc640 \uac19\uc740 Cloud Kubernetes Cluster \ud639\uc740 MiniKube</li> </ul>"},{"location":"hello-kubernetes/section05/ingress-controller/#install-ingress-nginx","title":"Install Ingress-Nginx","text":"<p>\uc124\uc815\uac12\uc740 \ub2e4\uc74c repo\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \uc124\uce58\ub294 \uae30\ubcf8 \uc124\uc815\uac12\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4. (\ucd94\ud6c4 \ubcc0\uacbd \uc608\uc815)</p> <pre><code>helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\nhelm repo update\n\nhelm upgrade --install ingress-nginx ingress-nginx \\\n  --repo https://kubernetes.github.io/ingress-nginx \\\n  --namespace ingress-nginx --create-namespace\n</code></pre> <p>\ub9cc\uc57d Public cloud \ud658\uacbd\uc5d0\uc11c ingress-nginx\ub97c \uad6c\uc131\ud558\uc600\ub2e4\uba74 ingress-nginx\uc758 \uc11c\ube44\uc2a4\uc758 type: LoadBalancer\uc774 \uae30\ubcf8 \uc774\ubbc0\ub85c L4 level(TCP/UDP) LoadBalancer\uac00 ingress-nginx Pod \uc55e\ub2e8\uc5d0 \uad6c\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc608\uc0c1 output - EKS</p> <pre><code>kubectl get svc -n ingress-nginx\nNAME                                         TYPE           CLUSTER-IP      EXTERNAL-IP                                                                    PORT(S)                      AGE\nservice/ingress-nginx-controller             LoadBalancer   10.100.193.33   a6764e85cc5404c079112dbb75a60078-1098452773.ap-northeast-2.elb.amazonaws.com   80:30446/TCP,443:31287/TCP   38s\n</code></pre> <p>AWS EKS\uc758 ingress-controller \uad6c\uc131 </p> <p>Info</p> <p>Minikube\uc758 \uacbd\uc6b0\ub294 \uc2e4\uc81c LoadBalancer \ub9ac\uc18c\uc2a4\uac00 \uc5c6\uc73c\ubbc0\ub85c EXTERNAL-IP \uac00 \ud655\uc778 \ub418\uc9c0 \uc54a\ub294\ub2e4</p>"},{"location":"hello-kubernetes/section05/ingress-controller/#deploy-sample-app","title":"Deploy Sample App","text":"<pre><code>kubectl create ns demo\nkubectl create deployment demo --image=cloudacode/hello-go-app:v1.0.0 --port=8080 -n demo\nkubectl expose deployment demo -n demo\n\nkubectl create ingress demo-localhost --class=nginx \\\n  --rule=\"ing.localdev.demo/*=demo:8080\" -n demo\n</code></pre>"},{"location":"hello-kubernetes/section05/ingress-controller/#verify-ingress-rule","title":"Verify ingress rule","text":"<p>\ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c ing.localdev.demo:8080 \uc811\uc18d\ud558\uc5ec \uc6d0\ud558\ub294 \uacb0\uacfc\uac00 \ub098\ud0c0\ub098\ub294\uc9c0 \ud655\uc778</p> <p>\uc608\uc0c1 output</p> <pre><code>Hello, world!\nVersion: 1.0.0\nHostname: demo-7fbd87c6b9-qd6qt\n</code></pre> <p>Info</p> <p>cloud \ud658\uacbd: \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 kubectl get ingress \ud588\uc744\ub54c \ub098\uc624\ub294 EXTERNAL-IP\uc758 IP \uc8fc\uc18c\ub97c hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \uc784\uc2dc \ucd94\uac00</p> <p><code>External-IP's IP  ing.localdev.demo #ingress test</code></p> <p>minikube \ud658\uacbd: local \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 hosts \ud30c\uc77c \ub9c8\uc9c0\ub9c9 \uc904\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00.</p> <p><code>127.0.0.1  ing.localdev.demo #ingress test</code></p> <p>Tip</p> <p>hosts \ud30c\uc77c\uc740 linux, mac\uc778 \uacbd\uc6b0 /etc/hosts, \uc708\ub3c4\uc6b0 os\uc778 \uacbd\uc6b0 C:\\Windows\\System32\\drivers\\etc\\hosts</p> <p>Minikube\ub85c \uc9c4\ud589 \ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc774 port-forwarding\uc73c\ub85c local\uc5d0\uc11c ingress-nginx-controller\uc5d0 \uc5f0\uacb0 \ud544\uc694</p> <pre><code>kubectl port-forward --namespace=ingress-nginx \\\n  service/ingress-nginx-controller 8080:80\n</code></pre>"},{"location":"hello-kubernetes/section05/ingress-controller/#enable-metric","title":"Enable Metric","text":"<p>Prometheus \ubaa8\ub2c8\ud130\ub9c1 \uc5f0\ub3d9\uc744 \uc704\ud574 Ingress Nginx \uc5d0\uc11c metric\uc744 enable</p> <p>helm \uc124\uc815 \ud30c\uc77c(values.yaml)</p> <pre><code>controller:\n  metrics:\n    enabled: true\n    service:\n      annotations:\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"10254\"\n</code></pre> <pre><code>helm upgrade --install ingress-nginx ingress-nginx \\\n  --repo https://kubernetes.github.io/ingress-nginx \\\n  --namespace ingress-nginx --create-namespace -f values.yaml\n</code></pre> <p>ingress nginx controller metric endpoint\uac00 \uc0dd\uc131 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778</p> <pre><code>kubectl get svc ingress-nginx-controller-metrics -n ingress-nginx\n\nkubectl port-forward --namespace=ingress-nginx \\\n  service/ingress-nginx-controller-metrics 10254\n</code></pre> <p>\ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c \uc0c8\ub85c\uc6b4 \ud0ed\uc73c\ub85c http://127.0.0.1:10254/metrics \uc5d0 \uc811\uc18d\ud558\uc5ec ingress-nginx\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 metrics\ub97c \uc218\uc9d1\ud558\uace0 \uc788\ub294\uc9c0 \uac80\uc99d</p> <p>\uc704\uc5d0\uc11c port-forwarding\uc73c\ub85c \uc811\uc18d\ud55c http://ing.localdev.demo:8080 \uc744 \uc5ec\ub7ec \ubc88 \ud638\ucd9c \ud6c4 metrics \ud56d\ubaa9\uc5d0 \ud574\ub2f9 endpoint\uc758 \uc218\uc9d1\ub41c metrics \ucd94\uac00\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778</p> <p></p>"},{"location":"hello-kubernetes/section05/ingress-controller/#wrap-up","title":"Wrap up","text":"<p>\uc774 \uae00\uc5d0\uc11c\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uacf5\uc2dd \uc9c0\uc6d0\ud558\ub294 Ingress-Nginx\ub97c \uc54c\uc544 \ubcf4\uc558\uc73c\uba70 \ucd94\ud6c4 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 metrics \uae4c\uc9c0 \ud65c\uc131\ud654 \uc2dc\ucf1c\ubcf4\uc558\ub2e4. Ingress Controller\ub294 \uc11c\ube44\uc2a4 \uc6cc\ud06c\ub85c\ub4dc\uc758 \ud2b8\ub808\ud53d\uc744 \ubc1b\ub294 \uac00\uc7a5 \uccab \ubc88\uc9f8 \uad6c\uc131\uc694\uc18c\uc774\uba70 \ub2e4\uc591\ud55c \uc194\ub8e8\uc158\ub4e4\uc774 \uc788\uc73c\ubbc0\ub85c \uc2dc\uac04\uc744 \ub450\uace0 \ud2b9\uc131\uc5d0 \ub9de\ub294 Ingress Controller\ub97c \ub3c4\uc785 \uac80\ud1a0\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx\ub294 \ud558\ub098\uc758 controller\uc5d0 \ud558\ub098\uc758 domain\ub9cc \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \ub9cc\uc57d\uc5d0 \uc5ec\ub7ec domain\uc744 \ud558\ub098\uc758 ingress\uc5d0\uc11c \ucc98\ub9ac\ud574\uc57c \ud558\ub294 \ud544\uc694\uac00 \uc788\ub294 \uacbd\uc6b0\ub294 Istio\uac19\uc740 Ingress controller\ub97c \ub300\uccb4 \ud560 \uc218 \uc788\ub294 \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574 \ubcfc \ud544\uc694\uac00 \uc788\ub2e4.</p> Star <p>\uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/","title":"5.1 Kubernetes Essential Component","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ud544\uc218 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad00\ub9ac \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc774\ud574\ud558\uace0 \uad6c\uc131\ud560 \ud544\uc694\uac00 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#kubernetes-components","title":"Kubernetes Components \ub780?","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uad6c\uc131 \ud6c4 \uace7\ubc14\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f8 \uc218 \uc788\ub294 \uac83\uc740 \uc544\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uba74 \ub9ac\ub205\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 user\ub97c \ub9cc\ub4e4\uace0 ldap\uc744 \uc5f0\ub3d9\ud558\uace0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub9de\ub294 \ub2e4\uc591\ud55c runtime\uc744 \uc124\uce58\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc5f0\ub3d9\ud574\uc57c \ud558\ub294 \uac83\ucc98\ub7fc \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4\uc5d0 \uadf8 \uc704\uc5d0 \ub2e4\uc591\ud55c k8s components\ub97c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4.</p> <p>CNCF(Cloud Native Cloud Foundation)\uc5d0\uc11c \ub2e4\uc591\ud55c \uc18c\ud504\ud2b8\uc6e8\uc5b4\ub4e4\uc744 sandboxing, inclubating\ud558\uace0 graduating \uc2dc\ud0a4\uace0 \uc788\uc73c\uba70 \ub2e4\uc591\ud55c \ub3c4\uad6c\ub4e4, \uc11c\ube44\uc2a4\ub4e4\uc774 \uc0dd\uae40\uc5d0 \ub530\ub77c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc0dd\ud0dc\uacc4\uac00 \uc5c4\uccad\ub098\uac8c \ubc1c\uc804\ud558\uace0 \ub9e4 \uc21c\uac04 \uc9c4\ud654\ub418\uace0 \uc788\ub2e4. \uc544\ub798\ub294 2022\ub144 \ud604\uc7ac(1\uc6d4) CNCF Landscape \uc0dd\ud0dc\uacc4 \ubaa8\uc2b5\uc774\ub2e4.</p> <p> \ucd9c\ucc98: CNCF Landscape</p> <p>Kubernetes\ub97c \ube44\ub86f\ud574 \uc720\uba85\ud55c \ub3c4\uad6c \ud639\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\ub85c\ub294 \ud328\ud0a4\uc9d5 \uad00\ub9ac Helm, CI/CD \ub3c4\uad6c\uc778 ArgoCD, \ud2b8\ub808\ud53d \uad00\ub9ac \ub3c4\uad6c\uc778 Istio, \uc11c\ube44\uc2a4 \ud504\ub85d\uc2dc Envoy\ub4e4\uc774 CNCF \uc0dd\ud0dc\uacc4 \uc548\uc5d0\uc11c \uacc4\uc18d \ucf54\ub4dc\ub97c \uae30\uc5ec\ud558\uace0 \ubc1c\uc804 \uc911\uc774\ub2e4. \uc218\ub9ce\uc740 \uc11c\ube44\uc2a4\uac00 \uacc4\uc18d \uc774\uacf3 \uc548\uc5d0\uc11c \uc0dd\uaca8\ub098\uace0 \uc788\uc73c\uba70 \ud2b8\ub79c\ub4dc\ub97c \ub530\ub77c\uac00\uae30 \uc704\ud574 \uc8fc\uc758 \uae4a\uac8c \ubcf4\uace0 \uc788\uc5b4\uc57c \ud55c\ub2e4.</p> <p>\uc774\uc81c \ud55c \uac00\uc9c0 \uc758\ubb38\uc810\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4. \uadf8\ub798\uc11c \ub0b4\uac00 \"\ubb34\uc5c7\uc744 \uc368\uc57c \ud558\uc9c0?\" \ud639\uc740 \"\ub0b4\uac00 \ud558\ub098\uc529 \ub2e4 \uac80\uc99d(PoC)\ud574\uc11c \ub098\uc5d0\uac8c \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc9c1\uc811 \ucc3e\uc544\uc57c \ud558\ub294 \uac74\uac00?\" \uc6b0\uc120 \uacb0\ub860 \ubd80\ud130 \ub9d0\ud558\uc790\uba74 \ub9de\ub2e4 \ud558\ub098\uc758 \uc815\ub2f5\uc740 \uc5c6\uc73c\ubbc0\ub85c \uc9c1\uc811 \uac80\uc99d\ud574\ubcf4\uace0 \ubcf8\uc778 \uc11c\ube44\uc2a4\uc5d0 \ub9de\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ucc3e\uc544\uc57c\ud55c\ub2e4. \uadf8\ub7fc \uadf8\ub2e4\uc74c \uc9c8\ubb38\uc740 \"\ub108\ubb34 \ub9ce\uc740\ub370 \uc5b4\ub514\uc11c\ubd80\ud130 \uc5b4\ub5bb\uac8c \uc2dc\uc791\ud574\uc57c \ud558\uc9c0?\" \uac00 \ub098\uc62c \uc218\ubc16\uc5d0 \uc5c6\uc744 \uac83\uc774\ub2e4. \ud604\uc5c5\uc5d0\uc11c \uc77c\ud558\uba74\uc11c \uc9c0\uc778\ub4e4\uc5d0\uac8c \uac00\uc7a5 \ub9ce\uc774 \ub4e4\uc5c8\ub358 \uc9c8\ubb38\uc774\uae30\ub3c4 \ud558\uace0 \uc0dd\ud0dc\uacc4 \uc790\uccb4\uac00 \ubc29\ub300\ud558\ub2e4 \ubcf4\ub2c8 \uc2e4\uc81c\ub85c \uae38\uc744 \uc783\uae30 \uc27d\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc5b4\ub835\ub2e4\uace0 \ub9d0\ud558\ub294 \ubd80\ubd84 \uc911 \ud558\ub098\uac00 \ubc14\ub85c \uc774\uac83\uc774\ub2e4.</p> <p>\ud604\uc5c5\uc5d0\uc11c\ub3c4 \uac00\uc7a5 \ub9ce\uc774 \uacaa\ub294 \ud5c8\ub4e4\uc774\uace0 \uc5b4\ub5bb\uac8c \ubcf4\uba74 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\ucd95 \ucd08\uae30\uc5d0 \uac00\uc7a5 \ub9ce\uc740 \uc2dc\uac04\uc744 \uc9d1\uc911\ud574\uc11c \ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ub41c\ub2e4\ub294 \ub9c8\ubc95\uc758 \uad6c\uc131 \ud45c\uc900\uc740 \uc5c6\uc73c\ub098 \ud604\uc5c5\uc5d0\uc11c \uc2e4\uc81c\ub85c \uad6c\uc131\ud558\uace0 \uc6b4\uc601\ud558\uba74\uc11c \uc774\ub7f0 \uac74 \ud544\uc218\ub85c \uc788\uc73c\uba74 \uc88b\uc740 \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc5d0 \ub300\ud574\uc11c \uac04\ub7b5\ud558\uac8c \uc544\ub798\uc5d0\uc11c \uc815\ub9ac\ud574 \ubcf8\ub2e4.</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#kubernetes-essential-component","title":"Kubernetes Essential Component","text":"<p>\ub2e4\uc591\ud55c \ub3c4\uad6c\ub97c \uac80\ud1a0\ud574\ubcf4\uace0 \ud504\ub7ec\ub355\uc158\uc5d0 \uc801\uc6a9\ud574 \ubcf4\uba74\uc11c \uc774 \uc815\ub3c4\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad6c\uc131 \ud6c4 Week 1\uc5d0 \ud544\uc218\ub85c \ucd94\uac00\ud574\uc57c \ud55c\ub2e4\uace0 \uc0dd\uac01\ud558\ub294 \ubaa9\ub85d\uc774\ub2e4. </p> * \uc0c1\uc138 \uadf8\ub9bc \ubcf4\ub4dc \ubc14\ub85c\uac00\uae30 \ube44\ubc00\ubc88\ud638: \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \uc5d0\uc11c \ud655\uc778"},{"location":"hello-kubernetes/section05/k8-essential-components/#_1","title":"\uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec","text":"<p>Ingress\ub294 \uc544\ub798 \uadf8\ub9bc\uacfc \uac19\uc774 \ud074\ub7ec\uc2a4\ud130 \uc678\ubd80\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub85c HTTP\uc640 HTTPS \uacbd\ub85c\ub97c \ub178\ucd9c\ud558\uace0 \ub4b7\ub2e8\uc758 Service\ub85c \ub77c\uc6b0\ud305\uc2dc\ucf1c\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4. </p> <p>\ub9cc\uc57d \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \uc4f4\ub2e4\uba74 \ud074\ub77c\uc6b0\ub4dc \ud504\ub85c\ubc14\uc774\ub354\uac00 managed \ud615\ud0dc\ub85c \uc81c\uacf5\ud574\uc8fc\ub294 \uc778\uadf8\ub798\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc608\ub97c \ub4e4\uba74 AWS\uc5d0\uc11c \uae30\ubcf8 Ingress\ub294 ALB\ub85c \ub9e4\ud551\uc774 \ub418\uba70 \uc774\uac83\uc740 AWS\uac00 \uad00\ub9ac\ud574 \uc8fc\ub294 \ub9ac\uc18c\uc2a4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac04\ud3b8\ud558\uac8c \uc0ac\uc6a9 \ud560 \uc218 \uc788\ub2e4. \ud558\uc9c0\ub9cc \ub2e4\uc591\ud55c \uae30\ub2a5\ub4e4\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uac70\ub098 self managed \ud560 \uc218\ubc16\uc5d0 \uc5c6\ub294 \uc0c1\ud669\uc778 \uacbd\uc6b0\ub294 \uc624\ud508\uc18c\uc2a4 Ingress Controller\ub97c \uace0\ub824\ud574\uc57c \ud55c\ub2e4. Ingress-Nginx\uac00 \uac00\uc7a5 \ub300\ud45c\uc801\uc774\uba70 \uc2e0\ub8b0 \ud560\uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4. \uc131\ub2a5 \ud29c\ub2dd\uc774\ub098 Rate limit, JWT vailidation\uc744 Proxy(\ud639\uc740 LB \ub808\ubca8)\uc5d0\uc11c \ud558\uae30\ub97c \uc6d0\ud55c\ub2e4\uba74 \uacf5\uc2dd\uc801\uc73c\ub85c Nginx\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Nginx-Ingress\ub97c \uc368\ub3c4 \uc88b\ub2e4. \uc624\ub798\ub41c \uae00\uc774\uc9c0\ub9cc \ub2e4\uc591\ud55c Ingress Controller\uc5d0 \ub300\ud574 \ube44\uad50\ud55c medium \ube14\ub85c\uadf8\ub3c4 \uc77d\uc5b4 \ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4.</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#dns","title":"DNS \uad00\ub9ac","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 ingress \ud639\uc740 service\ub97c \ud1b5\ud574 \uc678\ubd80\ub85c \uc11c\ube44\uc2a4\ub97c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 \uadf8 LB Endpoint \uc774\ub984(\ud639\uc740 IP) \ub808\ucf54\ub4dc\ub97c DNS ZONE\uc5d0 \ub204\uad70\uac00\ub294 \ub4f1\ub85d\uc2dc\ucf1c\uc918\uc57c \ud55c\ub2e4. \uc608\ub97c \ub4e4\uba74 EKS\uc5d0\uc11c Ingress\ub97c \uc0dd\uc131\ud558\uba74 ALB endpoint\uac00 \ub0b4 External-IP\ub85c \ub9e4\ud551\uc774 \ub418\ub294\ub370 \uc774 External-IP\ub97c \ub0b4 \ub3c4\uba54\uc778 DNS\uc5d0 \uc6d0\ud558\ub294 Subdomain\uc73c\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 \uc9c1\uc811 Route53\uc5d0 \ucd94\uac00\ud574 \uc918\uc57c \ud55c\ub2e4. \ub9e4\ubc88 \uc11c\ube44\uc2a4\uac00 \uc62c\ub77c\uc62c \ub54c \ub9c8\ub2e4 \uc218\ub3d9\uc73c\ub85c \ub4f1\ub85d\ud558\ub294 \uac83\uc740 \ud6a8\uc728\uc801\uc774\uc9c0 \ubabb\ud558\uae30\uc5d0 \uc774\uac83\uc744 External-DNS\ub85c \uc790\ub3d9\ud654 \uc2dc\ucf1c\uc57c \ud560 \ud544\uc694\uac00 \uc788\ub2e4. </p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_2","title":"\uc778\uc99d\uc11c \uad00\ub9ac","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc678\ubd80\ub85c \ub178\ucd9c \uc2dc\ucf30\ub2e4\uba74 HTTPS \ud1b5\uc2e0\uc744 \uc704\ud574 LB\uc5d0\uc11c SSL termination\uc744 \uc2dc\ud0a4\ub3c4\ub85d \uc138\ud305 \ud574\uc918\uc57c \ud55c\ub2e4. AWS, GCP\uc640 \uac19\uc740 \uc77c\ubc18\uc801\uc778 \ud074\ub77c\uc6b0\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud074\ub77c\uc6b0\ub4dc LB\uc5d0 SSL \uc778\uc99d\uc11c\ub97c \uc9c1\uc811 \uc784\ud3ec\ud2b8 \ud558\uace0 \uad00\ub9ac \ud560 \uc218 \uc788\uc9c0\ub9cc, \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uc77c\uc815\uc5d0 \ub9de\ucdb0\uc11c \uc218\ub3d9\uc73c\ub85c \ud574\uc918\uc57c \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ubb3c\ub860 \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud560 \uc218\ub294 \uc788\uc73c\ub098 \uc778\uc99d \uae30\uad00(Certificate Authority e.g. DigiCert, Comodo\ub4f1)\uc5d0 API \uc5f0\ub3d9\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \ub9e4\ubc88 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \uc778\uc99d\uc11c\ub97c \ubc1c\uae09(issue), \uac31\uc2e0(re-issue)\ud558\uace0 \uc218\ub3d9\uc73c\ub85c TLS\ub97c Secrets\uc73c\ub85c \ub123\ub294 \uac83\uc740 \ub9e4\uc6b0 \ube44\ud6a8\uc728\uc801\uc774\ub2e4. \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc790\ub3d9\ud654\ud558\uae30 \uc704\ud574 Cert-Manager\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uc73c\uba70 Cert-Manager\ub294 \uac1c\ubc29\ud615 \uc778\uc99d \uae30\uad00\uc778 Let's Encrypt\uc5d0 \ub9e4\ubc88 \uc778\uc99d\uc11c \uac31\uc2e0 \uae30\uac04\uc5d0 \ub9de\ucdb0\uc11c \uc778\uc99d\uc11c\ub97c \uc7ac\uac31\uc2e0 \uc2dc\ud0a4\uba74\uc11c Secerts\uc5d0 TLS key\ub97c \uc5c5\ub370\uc774\ud2b8 \uc790\ub3d9\uc73c\ub85c \ud574\uc8fc\uae30 \ub54c\ubb38\uc5d0 \uc778\uc99d\uc11c \ub9cc\ub8cc\uc5d0 \ub300\ud55c \uac71\uc815\uc744 \ud560 \ud544\uc694\uac00 \uc5c6\ub2e4. </p>  \ucd9c\ucc98: Banzai Cloud - Cert management on kubernetes"},{"location":"hello-kubernetes/section05/k8-essential-components/#continuos-delivery","title":"Continuos Delivery","text":"<p>\ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \ucfe0\ubc84\ub124\ud2f0\uc2a4\ub97c \ud1b5\ud574\uc11c \uc815\uc758\ud558\uace0 declarative(\uc120\uc5b8\ud615)\ud558\uac8c \ubc30\ud3ec \ubc0f \uad00\ub9ac\ub97c \ud560 \uc218 \uc788\uac8c \ub428\uc5d0 \ub530\ub77c GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \ub300\uc138\uac00 \ub418\uace0 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c ArgoCD\uc640 FluxCD\uac00 GitOps \uc804\ub7b5\uc73c\ub85c \ub9ac\uc18c\uc2a4\ub97c \ubc30\ud3ec\ud558\uace0 \uc5c5\ub370\uc774\ud2b8 \ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uad00\ub9ac \ubc0f CD(Continuous Delivery)\ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \uc544\ub798 \uadf8\ub9bc\uc740 Pull Based\ub85c \ubc30\ud3ec \ud558\ub294 GitOps \uc804\ub7b5 \ubc29\ubc95\uc774\ub2e4. \ud300 \ud639\uc740 \ud504\ub85c\uc81d\ud2b8\ubcc4\ub85c \ud6a8\uacfc\uc801\uc778 Flow\uac00 \uac01\uac01 \ub2e4\ub974\ubbc0\ub85c \ubc30\ud3ec \uc804\ub7b5\uc5d0 \ub300\ud574 \ucda9\ubd84\ud788 \ud1a0\ub860\ud55c \ud6c4 ArgoCD \ud639\uc740 FluxCD\ub97c \ub3c4\uc785\ud558\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. </p>  \ucd9c\ucc98: GitOps tech blog <p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4\ub97c kustomize \ud639\uc740 helm\uc73c\ub85c \uad6c\uc131\ud558\ub294 \uacbd\uc6b0\ub294 FluxCD\uac00 \ubcf4\ub2e4 native \ud558\uac8c \uc4f8 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc73c\ub098 WebUI\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc544 \uc5ec\ub7ec \uc0ac\uc6a9\uc790\ub97c \uc218\uc6a9\ud574\uc57c\ud558\ub294 Multi-tenecy Cluster \uc77c \uacbd\uc6b0\ub294 ArgoCD\uac00 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 CLI, UI\uac00 \uc788\uc5b4\uc11c \ubcf4\ub2e4 \uc801\ud569 \ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_3","title":"\ud2b8\ub808\ud53d \uad00\ub9ac \ubc0f \uc11c\ube44\uc2a4 \ub9e4\uc26c","text":"<p>Ingress\ub85c \uc678\ubd80\uc5d0\uc11c \ub4e4\uc5b4\uc624\ub294 \ud2b8\ub808\ud53d\uc5d0 \ub300\ud55c \uc81c\uc5b4\ub97c \ud558\uc600\ub2e4\uba74 \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc801\uc73c\ub85c \ud2b8\ub808\ud53d\uc758 \ud750\ub984 \ubc0f \uc81c\uc5b4\uac00 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud55c\ub2e4. \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uc571\uacfc \uac19\uc774 \ub2e4\uc591\ud55c \ubc31\uc5d4\ub4dc \uc11c\ube44\uc2a4\ub4e4\uc774 \uc11c\ub85c \uc720\uc5f0\ud558\uac8c \ud1b5\uc2e0\ud558\uace0 \uc2ec\ub9ac\uc2a4 \ud558\uac8c Failover\uac00 \ub418\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0 \ud2b8\ub808\ud53d\uc744 \uc138\uc138\ud558\uac8c \uc81c\uc5b4(Fine-grained control)\uc774 \ud544\uc694\ud558\uae30\ub3c4 \ud558\ub2e4. \uc608\ub97c \ub4e4\uba74 Istio\ub97c \ud1b5\ud574\uc11c \ucee4\uc2a4\ud140 \ud55c \ub77c\uc6b0\ud305 \uaddc\uce59\uc774\ub098 Rate Limit\uacfc \uac19\uc740 \uc815\ucc45\ub4e4\uc744 \ucd94\uac00 \ud560 \uc218 \uc788\uc73c\uba70 \ubaa8\ub4e0 \ud074\ub7ec\uc2a4\ud130\uc5d0 Ingress/Engress \ud2b8\ub808\ud53d\uc744 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ucd94\uc801 \ud560 \uc218 \uc788\ub2e4. \uc774\ub7f0 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \ubcc4\ub3c4\uc758 \ucf54\ub4dc\ub97c \ucd94\uac00\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c Linkerd \ud639\uc740 Envoy Proxy \uac19\uc740 \uc11c\ube44\uc2a4 \ub9e4\uc26c\ub97c \ud1b5\ud574\uc11c Sidecar \ubc29\uc2dd\uc73c\ub85c \uac01 Pod\uc5d0 proxy\uac00 \ucd94\uac00\ub418\uc5b4 \uac01 \uc11c\ube44\uc2a4 \uac04 \uc5f0\uad00 \uad00\uacc4\ub97c \ud30c\uc545\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\ud55c\ub2e4. </p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_4","title":"\ubc31\uc5c5 \uad00\ub9ac","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 cloud agnostic \ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubc18\ub300\ub85c \uadf8\ub9cc\ud07c \ucd94\uc0c1\ud654\ub41c \uc601\uc5ed\uc774 \ub9ce\ub2e4 \ubcf4\ub2c8 \uc5b4\ub514\uc11c \uc5b4\ub5a4 \uac83\uc744 \uc5b4\ub5bb\uac8c \ubc31\uc5c5\ud574\uc57c \ud558\ub294\uc9c0 \uc54c\uae30 \uc5b4\ub824\uc6b4 \ubd80\ubd84\uc774 \uc788\ub2e4. Stateless \ud55c \uc11c\ube44\uc2a4\ub4e4 \uac19\uc740 \uacbd\uc6b0\ub294 GitOps \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \uc798 \uc815\ub9bd\ub418\uc5b4 \uc788\ub2e4\uba74 \ubc14\ub85c ArgoCD, FluxCD\ub85c \ub2e4\uc2dc \ubc30\ud3ec\ud558\uba74 \ub418\uae30 \ub54c\ubb38\uc5d0 \ubc31\uc5c5\uc5d0 \uad00\ud574 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub418\uc9c0\ub9cc DB\ub098 Vault \uac19\uc740 State\uac00 \uc911\uc694\ud55c \uc11c\ube44\uc2a4\ub4e4\uc740 PersistentVolume\uc5d0 State\ub97c \uc800\uc7a5\ud558\uace0 \ub370\uc774\ud130\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ubc31\uc5c5\uc744 \ud574\uc57c \ud55c\ub2e4. VMWare(\uc774\uc804 Pivotal)\uc5d0\uc11c \uc624\ud508\uc18c\uc2a4\ud654\ud55c Velero\uac00 \ud604\uc7ac\uae4c\uc9c0\ub294 \uac00\uc7a5 \uc190\uc27d\uac8c \ubc31\uc5c5\ud558\uace0 \ub9ac\uc18c\uc2a4\ub4e4\uc744 \ubcf5\uc6d0\ud560 \uc218 \uc788\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc774\ub2e4. \ub2f9\uc5f0\ud558\uaca0\uc9c0\ub9cc \uc778\ud504\ub77c, \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub808\uc774\uc5b4\uc758 \ubc31\uc5c5\uc774\uae30 \ub54c\ubb38\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub808\ubca8\uc758 \ub370\uc774\ud130 \ubc31\uc5c5\uc740 \ucd94\uac00\ub85c \uac01\uc790 \uace0\ubbfc\ud574\uc57c \ud558\ub294 \ubd80\ubd84\uc774\ub2e4. </p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_5","title":"\uc815\ucc45 \uad00\ub9ac","text":"<p>\ubaa8\ub4e0 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 API \uc624\ube0c\uc81d\ud2b8\ub4e4\uc744 \uc218\ub3d9\uc73c\ub85c \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \ud798\ub4e0 \uc77c\uc774\ub2e4. \ud2b9\ud788\ub098 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ud5c8\uc6a9\ud558\uae30\ub85c \ud639\uc740 \ud558\uc9c0 \uc54a\uae30\ub85c \ud55c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc815\ucc45\uc744 \uc778\uc9c0\ud558\uc9c0 \ubabb\ud55c \uc0c1\ud0dc\uc5d0\uc11c \ub9ac\uc18c\uc2a4\ub4e4\uc744 \uc6d0\ud558\ub294 \uc124\uc815\uc73c\ub85c \ubc30\ud3ec\ud558\ub2e4 \ubcf4\uba74 \ucd94\ud6c4 \uc6b4\uc601 \uc2dc \uc5b4\ub824\uc6c0\uc774 \ubc1c\uc0dd \ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uba74 \uac1c\ubc1c\ud300\uc774 \uc2e4\uc218\ub85c \ud68c\uc0ac\uc5d0\uc11c \uc815\ud55c environment label\uc744 \ub123\uc9c0 \uc54a\uace0 \ubc30\ud3ec\ud55c\ub2e4\uba74 \ucd94\ud6c4\uc5d0 label\ub85c prometheus, loki\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1 \ub300\uc0c1\uc73c\ub85c \ucd94\uac00\uc2dc\ud0ac \uc218 \uc5c6\ub2e4. \ubb3c\ub860 \uc218\ub3d9\uc73c\ub85c \ub2e4\uc2dc \ucd94\uac00\ud558\uba74 \ub418\ub294 \ubd80\ubd84\uc774\ub098 \uc774\ub7f0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc6b4\uc601 \uc5c5\ubb34\ub97c \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574\uc11c\ub294 \ubc30\ud3ec \ud639\uc740 API \uc694\uccad \ub2e8\uacc4\ubd80\ud130 \uc81c\ud55c\uc744 \uc2dc\ud0a4\ub294 \ubc29\ubc95\uc774 \uc788\ub2e4. GateKeeper \ub098 Kyverno\uac00 Policy\uc5d0 \ub300\ud574\uc11c \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uc0ac\uc804 \uac80\uc99d(Validation)\ud558\uace0 \ud544\uc694\uc5d0 \ub530\ub77c\uc11c\ub294 \uc815\ucc45\uc5d0 \ub9de\ub3c4\ub85d \ubcc0\uc870(Mutation)\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub808\ud3ec\ud305 \uac00\ub2a5\ud558\ub2e4. \uc8fc\uc694\ud55c \uae30\ub2a5(Validation, Mutation, Montoring)\uc740 \ub300\ubd80\ubd84 \ube44\uc2b7\ud558\uace0 GateKeeper\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ubfd0\ub9cc\uc774 \uc544\ub2c8\ub77c \ub2e4\uc591\ud55c \uc815\ucc45\uc744 \uac80\uc99d \uac00\ub2a5\ud55c \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \ubcc4\ub3c4\uc758 \ubb38\ubc95\uc744 \ubc30\uc6cc\uc57c \ud55c\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4. Kyverno\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 yaml \ud615\ud0dc\ub85c \uc791\uc131\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 \ube60\ub974\uac8c \ub3c4\uc785 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. </p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_6","title":"\ubaa8\ub2c8\ud130\ub9c1","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uacfc \uac19\uc740 \ubd84\uc0b0\ud615 \uc2dc\uc2a4\ud15c \ud658\uacbd\uc5d0\uc11c\ub294 \ub9ac\uc18c\uc2a4\ub97c \uc11c\ubc84 \uc774\ub984 \ud639\uc740 IP\ub85c \uae30\uc900\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \uc804\ud1b5\uc801\uc778 \ubaa8\ub2c8\ud130\ub9c1 \ubc29\ubc95\ubcf4\ub2e4\ub294 tag \ud639\uc740 label \uae30\ubc18\uc73c\ub85c \uc11c\ube44\uc2a4\uc758 \uc804\uccb4 \uc0ac\uc6a9\ub7c9, \uac00\uc6a9\ub7c9\uacfc \uac19\uc740 \ud074\ub7ec\uc2a4\ud130 \uad00\uc810\uc758 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \uac83\uc774 \ub354\uc6b1 \uc801\ud569\ud558\ub2e4.</p> <p>\ud2b9\ud788 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 4\uac00\uc9c0 \ud56d\ubaa9\uc758 \uad00\uc810\uc5d0\uc11c \ubaa8\ub2c8\ud130\ub9c1\uc774 \ud544\uc694\ud558\ub2e4.</p> <ul> <li>Metric: \uc0ac\uc6a9\ub7c9(Utilization), \ud3ec\ud654\ub3c4(Saturation), \uc560\ub7ec(Error), \uac00\uc6a9\ub7c9(Availability) \ub4f1</li> <li>Event: \ub9b4\ub9ac\uc988 \ubc84\uc804(Release version), \ud604\uc7ac \ubc84\uc804\uc758 \uac00\ub3d9 \uc2dc\uac04(Uptime for current version), \ud655\uc7a5 \uc774\ubca4\ud2b8(Scaling event) \ub4f1</li> <li>Log: \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uadf8(Application log), \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub85c\uadf8(Kubernetes log) \ub4f1</li> <li>K8S Resource: \ud074\ub7ec\uc2a4\ud130 \uc6a9\ub7c9(Cluster capacity), \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ub9ac\uc18c\uc2a4 \uc6a9\ub7c9(Namespace resource) \ub4f1</li> </ul> <p></p> <p>\ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c): \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \uac19\uc740 \uacbd\uc6b0\ub294 \ub300\ubd80\ubd84 \uc2dc\uacc4\uc5f4(time series) \ub370\uc774\ud130\uc774\uae30 \ub54c\ubb38\uc5d0 \ud655\uc7a5\uc131\uc758 \uc81c\ud55c\uc774 \uc788\ub294 rrdtool\uacfc \uac19\uc740 \ubc29\uc2dd \ubcf4\ub2e4\ub294 NoSql \ud639\uc740 \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc5d0 \ucd5c\uc801\ud654\ub41c Prometheus, InfluxDB, \ud639\uc740 TSDB \uac19\uc740 time series database\ub97c \uc4f0\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc774\ub2e4. \uc774 \uc911\uc5d0\uc11c\ub3c4 Prometheus\uac00 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c \ub370\uc774\ud130\ub97c exporter\ub4e4\uc744 \ud1b5\ud574 \uc218\uc9d1\ud560 \uc218 \uc788\uace0 \ucee4\uc2a4\ud140\ud558\uac8c \ucd94\uac00 \uac1c\ubc1c \uac00\ub2a5\ud558\uba70 \ub2e4\ucc28\uc6d0\uc758 \ucffc\ub9ac\ub97c \uc9c0\uc6d0\ud55c\ub2e4. \ub610\ud55c AlertManager\uc640 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc2ac\ub809\uacfc \uac19\uc740 \uba54\uc2dc\uc9d5 \ud50c\ub7ab\ud3fc \ud639\uc740 PagerDuty\uc640 \uac19\uc740 incidient management \ub3c4\uad6c\ub4e4\uacfc\ub3c4 \uc190\uc27d\uac8c \uc5f0\ub3d9\ud560 \uc218 \uc788\ub2e4.</p> <p></p>  \ucd9c\ucc98: prometheus.io <p>\ubaa8\ub2c8\ud130\ub9c1(\ub85c\uadf8): \ubd84\uc0b0\ud615 \ud658\uacbd\uc5d0\uc11c\ub294 \uc11c\ubc84\uc5d0 \uac01\uac01 \uc811\uc18d\ud574 \ub85c\uadf8\ub97c \ubcf8\ub2e4\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\ubbc0\ub85c \uc911\uc559\uc9d1\uc911\ud615 \ub85c\uadf8 \uc2dc\uc2a4\ud15c\uc740 \ud544\uc218\uc801\uc778 \ud56d\ubaa9\uc774\ub2e4. \ud2b9\ud788 \ub85c\uadf8\ub97c STDOUT \ud639\uc740 STDERR\ub85c \uc4f0\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc778 \ud328\ud134\uc778 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc758 \uacbd\uc6b0 \ub85c\uadf8\uac00 node \ub85c\uceec\uc5d0 \uc800\uc7a5\uc774 \ub418\uace0 label \uc140\ub809\ud130\ub97c \ud1b5\ud574 \ud544\uc694\ud560 \ub54c \uc218\uc9d1 \ud560 \uc218 \uc788\uc9c0\ub9cc node\ub098 pod\uac00 \uc8fd\ub294 \uacbd\uc6b0\ub97c \ub300\ube44\ud558\uc5ec log stream\uc73c\ub85c \uc2e4\uc2dc\uac04(\ud639\uc740 \uc900\uc2e4\uc2dc\uac04)\uc73c\ub85c \ub85c\uadf8\ub97c \uc804\uc1a1 \ud574\uc57c \ud55c\ub2e4.</p> <p>\ub9cc\uc57d \ub85c\uadf8 \uac80\uc0c9\uc744 full-text search\ub85c \ud558\uace0 \uadf8\uac83 \uacb0\uacfc\ub97c \uac01\uc885 \ucc28\ud2b8\ub85c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 ElasticSearch \ubcf4\ub2e4\ub294 \uacfc\uac10\ud558\uac8c \uc2dc\uacc4\uc5f4 \uae30\ubc18\uc73c\ub85c \ub85c\uadf8\ub97c \uc800\uc7a5\ud558\uace0 label\ub9cc indexing\uc744 \ud558\ub294 Loki\ub85c \uac00\ub294 \uac83\uc744 \ucd94\ucc9c\ud55c\ub2e4. \uc27d\uac8c \ub9d0\ud558\uba74 \ud2b9\uc815 \uae30\uac04\ub3d9\uc548 \ud2b9\uc815 \uc774\ub984\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \uc571 \uc11c\ubc84 \uc804\uccb4 \uc911 \ud2b9\uc815 \uc560\ub7ec \ud328\ud134\uc5d0 \ub300\ud574 top ranking\uc744 \ub9e4\uae30\ub294 \ub85c\uadf8 \uac80\uc0c9\uacfc \ucc28\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, production \uc640 web\uc758 label\uc744 \uac16\ub294 \uc11c\ubc84\ub4e4\uc758 \uc5d0\ub7ec \uc911\uc5d0 403\uc774 \uc788\ub294 \uc11c\ubc84\uc758 1\ubd84 \ub3d9\uc548 \ub85c\uadf8\ub97c \ud655\uc778\ud558\ub294 \uac83\ub9cc\uc73c\ub85c\ub3c4 \ucda9\ubd84\ud558\ub2e4\uba74 Loki\uac00 \ubcf4\ub2e4 \uc11c\ubc84 \ubc0f \uc6b4\uc601 \uce21\uba74\uc5d0\uc11c ELK \uc2a4\ud0dd\ubcf4\ub2e4 \ub9ac\uc18c\uc2a4\ub3c4 \ub35c \ub4e4\uba70 \ube44\uc6a9 \ud6a8\uc728\uc801\uc774\ub2e4. \ub610\ud55c Prometheus like\ud55c \ucee8\uc149\uacfc \ucffc\ub9ac \ud328\ud134\uc744 \uac16\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 Prometheus\ub85c \uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud558\uace0 \uc788\ub2e4\uba74 \ube60\ub974\uac8c Loki\ub97c \uc801\uc751 \ud560 \uc218 \uc788\ub2e4.</p> <p>\ubb3c\ub860 \ud37c\ube14\ub9ad \ud074\ub77c\uc6b0\ub4dc \uc704\uc5d0\uc11c Managed Kubernetes Cluster\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\uba74 \uc774\ubbf8 CloudWatch, StackDriver\uc5d0\uc11c \uc190\uc27d\uac8c \ub85c\uadf8\ub97c \uc218\uc9d1, \ucffc\ub9ac \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc81c\uacf5\ud558\ub294 \uae30\ubcf8 Log \ubaa8\ub2c8\ud130\ub9c1 \uc194\ub8e8\uc158\uc744 \uc4f0\ub294 \uac83\ub3c4 \uc88b\uc740 \ubc29\ubc95\uc774\ub2e4.</p> <p>\ubaa8\ub2c8\ud130\ub9c1(\ub300\uc2dc\ubcf4\ub4dc): \ub300\uc2dc\ubcf4\ub4dc\ub294 \ub9d0\ud560 \uac83\uc774 \uc5c6\ub2e4. \ubaa8\ub4e0 \ubaa8\ub2c8\ud130\ub9c1(\uc2dc\uc2a4\ud15c, \ub85c\uadf8, APM)\uc744 \ube44\uc6a9 \uac71\uc815 \uc5c6\uc774 Datadog \uc4f0\ub294 \uc0c1\ud669\uc774 \uc544\ub2c8\ub77c\uba74 Grafana \uac00\uc790. \ub9cc\uc57d\uc5d0 \uae30\uc874\uc5d0 Telegraf\ub85c \uc218\uc9d1\ud558\uace0 InfluxDB, Kapacitor\ub97c \uc0ac\uc6a9 \uc911\uc774\ub77c\uba74 Chronograf\ub85c \ub300\uccb4 \ud560 \uc218 \uc788\uc73c\ub098 Grafana\uac00 \ucee4\ubba4\ub2c8\ud2f0 \ud06c\uae30\ub098 github star \uac1c\uc218\ub9cc \ube44\uad50\ud558\ub354\ub77c\ub3c4 \ube44\uad50 \ud560 \uc218 \uc5c6\uc744 \uc815\ub3c4\ub85c \ub192\ub2e4(\ub300\uc138\uc774\ub2e4).</p> <p></p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#tracing","title":"Tracing","text":"<p>\uc11c\ube44\uc2a4\uac04 \uc5f0\uad00\uad00\uacc4\uac00 \ubcf5\uc7a1\ud558\uac8c \uc5f0\uacb0\ub418\uc5b4 \uc788\ub294 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\ub4dc \ud658\uacbd\uc5d0\uc11c\ub294 \ud2b9\ud788\ub098 \uc11c\ube44\uc2a4\ub4e4 \ub07c\ub9ac\uc758 \ud2b8\ub808\ud53d\uc744 \ucd94\ucc99\ud558\uc5ec \uc548\uc815\uc131 \ud639\uc740 \uc131\ub2a5 \uac1c\uc120\uc744 \uc704\ud55c \uc815\ud655\ud55c \uc9c0\uc810\uc744 \ucc3e\ub294 \uac83\ub3c4 \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c Jaeger\uc640 ZipKin\uc774 \uc788\uc73c\uba70 \uae30\ub2a5\uc0c1\uc73c\ub85c\ub294 \ub300\ub3d9\uc18c\uc774 \ud558\ub098 Jager\uac00 OpenTracing \uae30\ub2a5\uc744 \ub124\uc774\ud2f0\ube0c \ud558\uac8c \uc9c0\uc6d0\ud558\uace0 \uc788\uc73c\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \uc788\ub294 CNCF \ucee4\ubba4\ub2c8\ud2f0\uc5d0\uc11c \uc131\uacf5\uc801\uc73c\ub85c Graduated \ud55c \ub300\ud45c\uc801\uc778 \ud504\ub85c\uc81d\ud2b8\uc774\ub2e4.</p> <p></p>  \ucd9c\ucc98: Evolving Distributed Tracing at Uber"},{"location":"hello-kubernetes/section05/k8-essential-components/#local-development","title":"Local Development","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc544\ubb34\ub9ac CICD \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\uace0 \ube14\ub8e8\uadf8\ub9b0 \ubc30\ud3ec \uc804\ub7b5 \uadf8\ub9ac\uace0 \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd\uc774 \uc798\ub418\uc5b4 \uc788\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \ube60\ub974\uac8c \ub514\ubc84\uae45\uc744 \ub0b4 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \ud558\uace0 \uc2f6\uc740 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud560 \uac83\uc774\ub2e4. \ubb3c\ub860 port-fowarding\uc744 \ud1b5\ud574\uc11c \ud574\ub2f9 Pod\ub85c \ub4e4\uc5b4\uac00\uc11c \ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc \ub098\uc758 \ub85c\uceec \ud658\uacbd\uc5d0\uc11c \uc2e4\uc81c \ud2b8\ub808\ud53d\uc744 \ubc1b\uc544\uc11c \ub514\ubc84\uae45\ud558\uace0 \uc2f6\uac70\ub098 \ud639\uc740 \ubc30\ud3ec \ud558\uae30 \uc804\uc5d0 \uac04\ub2e8\ud788 Production\uc5d0\uc11c Pod \ud558\ub098\ub9cc \ud14c\uc2a4\ud2b8 \ud574\ubcf4\uace0 \uc2f6\ub2e4\uba74 Telepresence\ub97c \ud65c\uc6a9\ud558\uba74 \ub41c\ub2e4. Proxy \uc5ed\ud560\uc744 \ud574\uc8fc\ub294 telepresence traffic-agent \ucee8\ud14c\uc774\ub108\uac00 sidecar \ud328\ud134\uc73c\ub85c Pod\uc5d0 \ucd94\uac00\ub418\uc5b4 \uc694\uccad\uc5d0 \ub530\ub77c traffic\uc744 intercept \ud558\uc5ec traffic-manager\uc5d0\uac8c \uc804\ub2ec\ud558\uace0 \ub0b4 \ub85c\uceec\uc5d0 \uc788\ub294 telepresence daemon\uc744 \ud1b5\ud574 \ub85c\uceec app\uc73c\ub85c \ud2b8\ub808\ud53d\uc744 \ud3ec\uc6cc\ub529\uc2dc\ucf1c\uc900\ub2e4.</p> <p></p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_7","title":"\ud328\ud0a4\uc9c0 \ubc0f \uc124\uc815 \uad00\ub9ac","text":"<p>\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc5d0\uc11c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 \uba87\uac00\uc9c0\uc758 \ubc29\ubc95\uc774 \uc788\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c kubectl manifest\ub85c \ub098\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub300\ud55c \uad6c\uc131\uc815\ubcf4\ub97c yaml\ud615\ud0dc(manifest)\ub85c \ub9cc\ub4e4\uac8c \ub41c\ub2e4. \ud558\uc9c0\ub9cc \uad6c\uc131\uc815\ubcf4\uac00 \ubcf5\uc7a1\ud574\uc9c8\uc218\ub85d \ub9e4\ubc88 kubectl apply \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\ub294 \uac83 \uc790\uccb4\uac00 \uc2dc\uac04 \uc18c\ubaa8\uc801\uc778 \uc791\uc5c5\uc774\uba70 \uc0ac\ub78c\uc758 \uc2e4\uc218\ub85c \ud2b9\uc815 \ub9ac\uc18c\uc2a4\uac00 \uc81c\uc678\ub418\uace0 \ubc30\ud3ec\ub418\uae30\ub3c4 \ud55c\ub2e4. \ud2b9\ud788\ub098 \ub611\uac19\uc740 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ud558\ub098\uc758 \ud658\uacbd\uc774 \uc544\ub2cc \uc5ec\ub7ec \ud658\uacbd\uc5d0 \uc124\uc815\ub9cc \ubc14\uafd4\uc11c \ubc30\ud3ec\ud558\ub294 \uacbd\uc6b0 \uc911\ubcf5\ub418\ub294 \ucf54\ub4dc\uac00 \ub9e4\uc6b0 \ub298\uc5b4\ub098\uac8c \ub41c\ub2e4.</p> <p>\uc7ac\uc0ac\uc6a9\uc131\uc744 \ub192\uc774\uace0\uc790 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c \ud639\uc740 \ud15c\ud50c\ub9bf \ub3c4\uad6c\uc778 Helm\uc774 \ub098\uc624\uac8c \ub418\uace0 patch\uc640 \uac19\uc774 \ud2b9\uc815 \ud658\uacbd\uc5d0\ub9cc \uc801\uc6a9\ub418\uc5b4\uc57c \ud558\ub294 \ucd94\uac00\uc801\uc778 manifest \ub300\ud574 \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \uc124\uc815 \uad00\ub9ac \ub3c4\uad6c\uc778 Kustomize\uac00 \ub4f1\uc7a5\ud558\uac8c \ub41c\ub2e4. Helm\uacfc Kustomize\uac00 \uc11c\ub85c \ub300\uccb4\ud558\ub294 \uc194\ub8e8\uc158\uc73c\ub85c \uc0dd\uac01 \ud560 \uc218\ub3c4 \uc788\uc9c0\ub9cc helm\uc5d0\uc11c\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud15c\ud50c\ub9bf \ud300\ub9cc \ud558\uace0(chart\ub85c\ub9cc \ub9cc\ub4e4\uace0) Kustomize\uc5d0\uc11c helm chart\ub97c overlaying \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 helm \uc790\uccb4\ub3c4 kustomize\ub85c \uc720\uc5f0\ud558\uac8c \ubc30\ud3ec \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section05/k8-essential-components/#_8","title":"\ub9c8\uc9c0\ub9c9\uc73c\ub85c","text":"<p>AWS Solution Architect \ucc98\ub7fc CNCF Landscape\uc758 \uc194\ub8e8\uc158\ub4e4\uc744 Architecting \ud574\uc8fc\uace0 on-boarding\ub3c4 \uc2dc\ucf1c\uc8fc\ub294 \uc0ac\ub78c\uc774 \uc788\uc73c\uba74 \uc88b\uaca0\uc73c\ub098 \uc544\uc27d\uac8c\ub3c4 \uadf8\ub7f0 \uc0ac\ub78c\uc740 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4. (\uc2e4\uc81c\ub85c\ub294 \uc788\uc73c\ub098 \ub0b4 \uc8fc\uc704\uc5d0 \uc5c6\ub2e4!) \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ucee8\uc124\ud305 \ud30c\ud2b8\ub108\ub77c\ub294 \ud68c\uc0ac\ub4e4\uc774 \uc0dd\uaca8 \ub098\uace0 \uc788\uc73c\ub098 \uc5b4\ub290\uc815\ub3c4 \uc5ed\ub7c9\uc744 \ubcf4\uc720\ud558\uace0 \uc788\ub294\uc9c0\ub294 \ud45c\uba74\uc0c1\uc73c\ub85c \ud655\uc778 \ud558\uae30 \uc5b4\ub835\ub2e4. \uac1c\uc778\uc801\uc73c\ub85c Jetstack\uc774\ub098 WeaveWorks \ucc98\ub7fc \ubcf8\uc778\ub4e4\uc758 \uc194\ub8e8\uc158\uc744 \uacc4\uc18d CNCF\uc5d0 \uae30\uc5ec \ud558\uba74\uc11c \ucee8\uc124\ud305\uc744 \ud558\ub294 \ud68c\uc0ac\uac00 \uc5ed\ub7c9\uc774 \uc788\ub294 \uacf3\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4.</p> <p>\ub9c8\uc9c0\ub9c9\uc73c\ub85c \ud56d\uc0c1 \uac15\uc870\ud558\ub294 \uac83\uc774\uc9c0\ub9cc \ud604\uc7ac \ud2b8\ub79c\ub4dc\uc778 \ub3c4\uad6c\ub9cc \ub3c4\uc785\ud55c\ub2e4\uace0 \ub05d\uc774 \uc544\ub2c8\uba70 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\uc6a9\uc790(stakeholder)\ub4e4\uc5d0\uac8c \uc694\uad6c\uc0ac\ud56d \uc870\uc0ac\ub97c \uc8fc\uae30\uc801\uc73c\ub85c \ud574\uc11c \uc2dc\uc2a4\ud15c\uc744 \uace0\ub3c4\ud654\uc2dc\ucf1c\uc57c \ud55c\ub2e4. \ub610\ud55c \uac19\uc774 \uac1c\ubc1c, \uc6b4\uc601\ud574 \ub098\uac00\ub294 \ub3d9\ub8cc(placeholder)\ub4e4\uacfc \uc815\uae30\uc801\uc73c\ub85c \uc2dc\uc2a4\ud15c\uc744 \uac1c\uc120\ud558\uace0 \ud568\uaed8 \ub808\ubca8\uc5c5 \ud574\uc57c\uc9c0\ub9cc \uc548\uc815\uc801\uc73c\ub85c \ubaa8\ub358 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\uccd0\ub97c \ubc1c\uc804\uc2dc\ucf1c\ub098\uac08 \uc218 \uc788\uc744 \uac83\uc774\ub2e4.</p> Star <p>\uc774 \uae00\uc774 \uc720\uc6a9\ud558\uc600\ub2e4\uba74 \u2b50 Star\ub97c, \ud83d\udcac 1:1 \uc9c8\ubb38\uc774\ub098 \uae30\uc220 \uad00\ub828 \ubb38\uc758\uac00 \ud544\uc694\ud558\uc2e0 \ubd84\ub4e4\uc740 \ud074\ub77c\uc6b0\ub4dc\uc5b4\ucf54\ub4dc \uce74\uce74\uc624\ud1a1 \ucc44\ub110 \ucd94\uac00 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.\ud83e\udd17</p>"},{"location":"hello-kubernetes/section05/monitoring/","title":"5.3 Monitoring","text":""},{"location":"hello-kubernetes/section05/monitoring/#prometheus","title":"Prometheus","text":""},{"location":"hello-kubernetes/section05/monitoring/#thanos","title":"Thanos","text":""},{"location":"hello-kubernetes/section05/monitoring/#loki","title":"Loki","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section05/secret-management/","title":"5.6 Secret Management","text":""},{"location":"hello-kubernetes/section05/secret-management/#external-secrets","title":"External Secrets","text":""},{"location":"hello-kubernetes/section05/secret-management/#vault","title":"Vault","text":"<p>vault</p> <p>TODO</p>"},{"location":"hello-kubernetes/section06/istio-architecture/","title":"6.1 Istio","text":""},{"location":"hello-kubernetes/section06/istio-architecture/#istio","title":"Istio","text":""},{"location":"hello-kubernetes/section06/istio-architecture/#architecture","title":"Architecture","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section06/security-observability/","title":"6.4 Security &amp; Observability","text":""},{"location":"hello-kubernetes/section06/security-observability/#security","title":"Security","text":""},{"location":"hello-kubernetes/section06/security-observability/#observability","title":"Observability","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section06/service-mesh/","title":"6.3 Service Mesh","text":""},{"location":"hello-kubernetes/section06/service-mesh/#istio-service-mesh","title":"Istio Service Mesh","text":""},{"location":"hello-kubernetes/section06/service-mesh/#envoy-proxy","title":"Envoy Proxy","text":"<p>Todo</p>"},{"location":"hello-kubernetes/section06/traffic-management/","title":"6.2 Traffic Management","text":""},{"location":"hello-kubernetes/section06/traffic-management/#istio-traffic-management","title":"Istio Traffic Management","text":""},{"location":"hello-kubernetes/section06/traffic-management/#virtualservice","title":"VirtualService","text":""},{"location":"hello-kubernetes/section06/traffic-management/#destinationrule","title":"DestinationRule","text":""},{"location":"hello-kubernetes/section06/traffic-management/#gateway","title":"Gateway","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section07/aws-eks/","title":"7.1 AWS EKS Architecture","text":""},{"location":"hello-kubernetes/section07/aws-eks/#eks","title":"EKS","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section07/gcp-gke/","title":"7.2 GCP GKE Architecture","text":""},{"location":"hello-kubernetes/section07/gcp-gke/#gke","title":"GKE","text":"<p>TODO</p>"},{"location":"hello-kubernetes/section99/pod-resource-advanced/","title":"Deep dive in k8s Pod resources","text":""},{"location":"hello-kubernetes/section99/pod-resource-advanced/#deep-dive-in-k8s-pod-resources","title":"Deep dive in k8s Pod resources","text":""},{"location":"hello-kubernetes/section99/pod-resource-advanced/#kubernetes-resource-requests-limits","title":"\uc5b4\ub5bb\uac8c kubernetes\ub294 resource\uc758 requests\uc640 limits\ub97c \uc801\uc6a9\ud558\ub294\uac00?","text":"<p>kubelet\uc774 pod\uc758 \uc77c\ubd80\uc778 container\ub97c \uc2e4\ud589\ud560\ub54c, kubelet\uc740 container\uc758 cpu/memory\uc758 requests\uc640 limits\ub97c container runtime(e.g. Docker)\ub85c \uc804\ub2ec\ud55c\ub2e4. Linux \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 container\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \uc815\uc758\ud55c \uc218\ub7c9\uc758 resource\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574 kernel cgroups\uc744 \uc774\uc6a9\ud558\uc5ec \uad6c\uc131\ud55c\ub2e4.</p> <ul> <li>cpu limits : container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu \uc2dc\uac04\uc758 \ud558\ub4dc \ub9ac\ubc0b\uc744 \uc815\uc758\ud568. \ub9e4 \uc2a4\ucf00\uc904\ub9c1 \uc778\ud130\ubc8c\ub3d9\uc548(100ms), \ub9ac\ub205\uc2a4 \ucee4\ub110\uc740 \uc9c0\uc815\ud55c cpu \uc2dc\uac04 \uc81c\ud55c\uc744 \ub118\uacbc\ub294\uac00\ub97c \ud655\uc778\ud55c\ub2e4. \ub9cc\uc57d \ub118\uacbc\ub2e4\uba74, \ucee4\ub110\uc740 \ud574\ub2f9 container\uc758 \ud504\ub85c\uc138\uc2a4\uc758 cpu \uc5f0\uc0b0\uc744 \uba48\ucd94\uace0 \ub2e4\uc2dc \uc2e4\ud589\ub420\ub54c\uae4c\uc9c0 \uc2e4\ud589\uc744 \uae30\ub2e4\ub9b0\ub2e4(throttled)</li> <li> <p>cpu requests: container\uac00 \uc0ac\uc6a9\uac00\ub2a5\ud55c cpu\uc758 \uac00\uc911\uce58. \ud558\ub098\uc758 \ud638\uc2a4\ud2b8\uc5d0\uc11c \uc5ec\ub7ec\uac1c\uc758 \ucee8\ud14c\uc774\ub108(cgroups)\ub97c \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0, \ub354 \ud070 \uc694\uccad(request)\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc\ub294 \uc791\uc740 \uc694\uccad\uc774 \uc788\ub294 \uc6cc\ud06c\ub85c\ub4dc \ubcf4\ub2e4 \ub354 \ub9ce\uc740 cpu \uc2dc\uac04\uc774 \ud560\ub2f9\ub428.</p> </li> <li> <p>memory limits: container\uc2e4\ud589\uc2dc, cgroup \uc758 memory limit\ub97c \uc815\uc758\ud568. \ub9cc\uc57d container\uac00 limit\ubcf4\ub2e4 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \ud560\ub2f9\ud574\uc11c \uc0ac\uc6a9\ud558\ub824\uace0 \uc2dc\ub3c4\ud558\uba74, linux kernel\uc758 oom subsystem\uc774 \uc2e4\ud589\ub418\uace0, \uba54\ubaa8\ub9ac \ud560\ub2f9\uc744 \uc2dc\ub3c4\ud55c container\uc758 \ud504\ub85c\uc138\uc2a4 \uc911 \ud558\ub098\ub97c \uc911\uc9c0\ud558\uc5ec \uac1c\uc785\ud55c\ub2e4.</p> </li> <li>memory requests: container\ub97c \uc2e4\ud589\ud560 \ub54c, kubernetes\uc758 \ub178\ub4dc \uc2a4\ucf00\uc904\ub9c1\uc5d0 \uc0ac\uc6a9\ub418\uace0, \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc591(Allocatable resource)\ub97c \ub118\uc744\uacbd\uc6b0, \uc2a4\ucf00\uc904\ub9c1\uc774 pending\ub41c\ub2e4.</li> </ul> <p>container\uac00 memory reuests \ucd08\uacfc\ud558\uace0, \uc2e4\ud589\ub418\ub294 \ub178\ub4dc\uc758 \uba54\ubaa8\ub9ac\uac00 \ubd80\uc871\ud574\uc9c0\uba74 container\uac00 \uc18d\ud55c Pod\uac00 \ucd95\ucd9c\ub420(evicted) \uac00\ub2a5\uc131\uc774 \ub192\ub2e4.</p> <p>Info</p> <p>kubernetes.io/memory\ub294 incompressible \uc18d\uc131 - isCompressble: false \uc744 \uac00\uc9d0</p> <p>\uadf8\ub9ac\uace0 container\ub294 \uc624\ub79c \uae30\uac04 \ub3d9\uc548 CPU \uc81c\ud55c\uc744 \ucd08\uacfc\ud558\ub3c4\ub85d \ud5c8\uc6a9\ub418\uac70\ub098 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.(cpu throttling) \uadf8\ub7ec\ub098 container runtime(e.g. Docker)\uc740 \uacfc\ub3c4\ud55c CPU \uc0ac\uc6a9\uc73c\ub85c \uc778\ud574 Pod \ub610\ub294 container\ub97c \uc885\ub8cc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p> <p>Info</p> <p>kubernetes.io/cpu \ub294 compressible \uc18d\uc131 - isCompressble: true\uc744 \uac00\uc9d0</p> <p>container\ub294 \uc9c0\uc815\ud55c limits\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc694\uccad \ubc0f \uc81c\ud55c\uc774 \uc801\uc6a9\ub418\ub294 \ubc29\uc2dd\uc740 \ub9ac\uc18c\uc2a4\uac00 \uc555\ucd95 \uac00\ub2a5(compressible)\ud55c\uc9c0 \ub610\ub294 \uc555\ucd95\ud560 \uc218 \uc5c6\ub294\uc9c0(incompressible)\uc5d0 \ub530\ub77c \ub2e4\ub974\ub2e4.</p>"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#compressible-resource-guarantees","title":"Compressible Resource Guarantees","text":"<p>resource metadata\uc5d0 isCompressble: true \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. cpu) container\ub294 \uc694\uccad\ud55c cpu \uc591\uc744 \ubcf4\uc7a5\ubc1b\uc73c\uba70 \ucd94\uac00 cpu\uc2dc\uac04\uc744 \ubc1b\uc744 \uc218\ub3c4 \uc788\uace0 \ubc1b\uc9c0 \uc54a\uc744 \uc218\ub3c4 \uc788\ub2e4.(\uc2e4\ud589 \uc911\uc778 \ub2e4\ub978 \uc791\uc5c5\uc5d0 \ub530\ub77c \ub2e4\ub984) \ucd08\uacfc\ud558\ub294 cpu\ub9ac\uc18c\uc2a4\ub294 \uc694\uccad\ub41c cpu \uc591\uc5d0 \ub530\ub77c \ubd84\ubc30\ub41c\ub2e4.(A : 600m, B: 300m, Node extra 100m -&gt; 2:1 \ube44\uc728\ub85c 100milli\uac00 \ubd84\ubc30\ub428) container\uac00 limits\ub97c \ucd08\uacfc\ud558\uba74 \uc81c\ud55c(throttled)\ub429\ub2c8\ub2e4. \uc81c\ud55c\uc774 \uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\ub294 \uc0ac\uc6a9 \uac00\ub2a5\ud55c cpu \uc5ec\uc720\uac00 \uc788\ub294 \uacbd\uc6b0, \ucd08\uacfc cpu\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"hello-kubernetes/section99/pod-resource-advanced/#incompressible-resource-guarantees","title":"Incompressible Resource Guarantees","text":"<p>resource metadata\uc5d0 isCompressble: fales \uc18d\uc131\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0.(e.g. memory) container\ub294 \uc694\uccad\ud55c \uba54\ubaa8\ub9ac \uc591\uc744 \uc5bb\ub294\ub2e4. \uba54\ubaa8\ub9ac \uc694\uccad\uc744 \ucd08\uacfc\ud558\uba74 \uc0c1\ud669\uc5d0 \ub530\ub77c container\uac00 \uc885\ub8cc\ub420 \uc218 \uc788\ub2e4. \uadf8\ub7ec\ub098 container\uac00 \uc694\uccad\ud55c \uac83\ubcf4\ub2e4 \uc801\uc740 \ub9ac\uc18c\uc2a4\ub97c \uc18c\ube44\ud558\ub294 \uacbd\uc6b0, \uc885\ub8cc\ud558\uc9c0 \uc54a\ub294\ub2e4.(\uc2dc\uc2a4\ud15c \uc791\uc5c5 \ub610\ub294 \ub370\ubaac\uc5d0 \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 \uc81c\uc678). limits\ubcf4\ub2e4 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c\ub2e4.</p>"},{"location":"hello-kubernetes/section99/troubleshooting-runbook/","title":"Troubleshooting runbook","text":""},{"location":"hello-kubernetes/section99/troubleshooting-runbook/#troubleshooting","title":"Troubleshooting","text":"<p>TODO</p>"}]}